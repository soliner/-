#现代操作系统 第十章 实例研究：Linux

## 10.1 UNIX与Linux的历史

- ​

##  10.2 Linux概述

- ​

### 10.2.4 Linux应用程序

- 大致分成以下6类

  - 文件和目录操作命令
  - 过滤器
  - 程序设计工具，如编辑器和编译器
  - 文档处理
  - 系统管理
  - 其他

- 除了这些应用程序外，当然还有许多其他应用程序

- 首先从文件很和目录开始

  | 命令    | 效果                                       |
  | ----- | ---------------------------------------- |
  | cp    | 将文件a移动到b，而不改变原文件                         |
  | mv    | 将文件a移动到文件b但是删除源文件                        |
  | cat   | 把多个文件的内容连接起来，它读入每一个输入文件然后把它们按顺序复制到标准输出中  |
  | rm    | 删除文件                                     |
  | chmod | 让属主通过修改文件的权限来改变其访问权限                     |
  | mkdir | 目录的创建                                    |
  | rmdir | 目录的删除                                    |
  |       | 列出一个目录下的文件，包含大量的标志来控制要显示文件的那些特征、决定文件的显示顺序、指定文件输出格式等 |

- 过滤器

  | 命令    | 效果                           |
  | ----- | ---------------------------- |
  | grep  | 从标准输入或者一个或多个输入文件中提取包含特定模式的行  |
  | sort  | 将输入进行排序并输出到标准输出              |
  | head  | 提取输入的前几行                     |
  | tail  | 提出输入后的后几行                    |
  | cut   | 文档的剪切                        |
  | paste | 文档的粘贴                        |
  | od    | 将输入转换成ASCⅡ文档，包括八进制，十进制或者十六进制 |
  |       | 实现字符大小写转换                    |
  | pr    | 打印机格式化输出，包括一些格式选项，如运行头、页码等   |

- 编译器和程序设计工具

  | 命令      | 效果                                       |
  | ------- | ---------------------------------------- |
  | gcc     | 调用C语言编译器                                 |
  | ar      | 将库函数收集到存档文件中                             |
  | make    | 负责维护大的程序，这些程序分布在多个文件中，作用是跟踪哪些文件依赖于哪些头文件等，然后安排所有需要进行的编译自动进行 |
  | include | 将头文件包含进来                                 |

- 一部分POSIX标准应用程序列在图10-2中![10-2](F:\现代操作系统\resource\10-2.jpg)

### 10.2.5 内核结构

- Linux系统的总体结构

![10-1](F:\现代操作系统\resource\10-1.jpg)

- 内核坐落于硬件之上，负责实现与I/O设备和存储管理单元的交互，并控制CPU对前述设备的访问
- 如图10-3所示，在底层，它们是与设备交互的主要方式，以及底层的分派机制
  - 这种分派在中断时发生
  - 进程分派的代码时汇编代码，并且和进程调度代码有很大不同

![10-3](F:\现代操作系统\resource\10-3.jpg)

- 内核子系统分为是三个主要部件
  - I/O部件包含所有负责与设备交互以及实现联网和存储的I/O功能的内核部件
    - 在最高层，这些IO功能全部整合在一个虚拟文件系统层中
    - 从底层来看，所有的I/O操作都要通过某一个设备驱动程序
    - 所有的Linux驱动程序都可以被分类为字符驱动或块驱动程序网络设备实际上是字符设备，不过它们的处理和其他字符设备不太一样
    - 字符设备有两种不用的使用方式
      - 有些程序，如可视编辑器vi，emacs等，需要一个键盘输入
- 我们将从Linux开始，它是UNIX的一个很流行的衍生版本，可以运行在各类计算机上。它不仅是高端工作站和服务器上的主流操作系统之一，还在移动电话到超级计算机的一系列系统中得到应用。


- 我们将从Linux的历史以及UNIX与Linux的演化开始讨论，然后给出Linux的概述，从而使读者对它的使用有一些概念
- 接下来是本章的核心内容，我们将分析Linux的进程与内存管理、I/O、文件系统以及安全机制
- 因为大多数读者相对于其他系统而言更容易接触到Linux，故我们选中Linux作为例子。况且除了实现相关


- 因为大多数读者相对于其他系统而言更容易接触到Linux，故我们选中Linux作为例子。况且除了实现相关的内容，本章的大部分内容对所有UNIX系统都是适用的。
- UNIX开始只是一个年轻的研究人员（Ken Thompson）的业余项目，后来发展成价值数十亿美元
- UNIX开始只是一个年轻的研究人员（Ken Thompson）的业余项目，后来发展成价值数十亿美元的产业，涉及大学、跨国公司、政府与国际标准化组织

### 10.1.1　UNICS

- 回到20世纪40～50年代，当时使用计算机的标准方式是签约租用一个小时的机时，然后在这个小时内独占整


- 回到20世纪40～50年代，当时使用计算机的标准方式是签约租用一个小时的机时，然后在这个小时内独占整台机器。


- 为了摆脱这种公认的令人失望且没有效率的设计安排，Dartmouth学院与M.I.T发明了分时系统
- 不久之后，来自Bell实验室与通用电器（随后成为计算机的销售者）的研究者与M.I.T合作开始设计第二代系统MULTICS（


- Information and Computing Service，多路复用信息与计算服务），


- 虽然Bell实验室是MULTICS项目的创始方之一，但是它后来撤出了这个项目，仅留下一位研究人员Ken Thompson寻找一些有意思的东西继续研究

###10.1.2　PDP-11 UNIX

- Bell实验室的另一位研究者Brian Kernighan有点开玩笑地把它叫做UNICS（UNiplexed Information and Computing Service，单路信息与计算服务）。


- 在这段时间，UNIX系统有两个重大的发展。第一，UNIX从过时的PDP-7计算机移植


- 在这段时间，UNIX系统有两个重大的发展。第一，UNIX从过时的PDP-7计算机移植到更现代化的PDP-11/20，然后是PDP-11/45和PDP-11/70。


- 第二个发展则与编写UNIX的编程语言有关


- Ritchie设计了B语言的后继者，很自然地命名为C。Ritchie同时为C编写了一个出色的编译器。Thompson


- Ritchie设计了B语言的后继者，很自然地命名为C。Ritchie同时为C编写了一个出色的编译器。Thompson和Ritchie一起工作，用C重写了UNIX。


- 1974年，Ritchie和Thompson发表了一篇关于UNIX的里程碑式的论文（Ritchie和Thompson，1974）。由于


- 1974年，Ritchie和Thompson发表了一篇关于UNIX的里程碑式的论文（Ritchie和Thompson，1974）。由于他们在论文中介绍的工作，他们随后获得了享有盛誉的图灵奖（


- 关于UNIX系统的新想法和改进迅速传播开来。


- 由于以上所有这些活动，关于UNIX系统的新想法和改进迅速传播开来。
- 32上），已经有18 800行C代码以及2100行汇编代码


- 在几年内，版本6被版本7代替，后者是UNIX的第一个可移植版本（运行在PDP-11以及Interdata 8/32上），已经有18 800行C代码以及2100行汇编代码中。源代码包含8200行C代码以及900行汇编代码。由于以上所有这些活动，关于UNIX系统的新想法和改进迅速传播开来。UNIX程序员手册的第6版中。源代码包含8200行C代码以及900行汇编代码。由于以上所有这些活动，关于UNIX系统的新想法和改进迅速传播开来。

### 10.1.3　可移植的UNIX 

- 既然UNIX是用C编写的，将它移动或者移植（正式说法）到一台新机器上比早先的时候要容易多了。


- 最终，一小部分依赖于机器的代码，如中断处理或内存管理程序，必须重写，通常使用汇编语言。


- 从PDP-11向外的第一次移植是到Interdata 8/32小型机上


- 另一个问题来自Ritchie的编译器。


- 别于针对Interdata机器写一个新编译器的通常做法，Bell实验室的Steve Johnson设计并实现了可移植的C编译器，只需要适量的修改工作就能够为任何设计合理的机器生成目标代码。

### 10.1.4　Berkeley UNIX

- 在ARPA（Advanced Research Project Agency，（美国国防部）高级研究计划署）的赞助下，Berkeley开发并发布了针对PDP-11的UNIX改进版本，称为1BSD（First Berkeley Software Distribution，Berkeley软件发行第1版）。


- 加州大学伯克利分校（University of California at Berkeley）是早期获得UNIX第6版的众多大学之一。


- 网络的引入使得其使用的网络协议TCP/IP成为UNIX世界的实际标准。因为Internet由基于UNIX的服务器统治，TCP/IP接着也成为了Internet的实际标准。


- 所有这些改进使得Sun Microsystems，DEC以及其他计算机销售商基于Berkeley UNIX开发它们自己的UNIX版本，而不是基于AT＆T的“官方”版本System V。

### 10.1.5　标准UNIX

- UNIX世界的这种分裂，加上二进制程序格式没有标准的事实，使得任何软件销售商编写和打包的UNIX程序都不可能在其他UNIX


- 第一次使UNIX的两种流派一致的严肃尝试来源于IEEE


- 他们共同决定将这个项目命名为POSIX。前三个字母代表可移植操作系统（Portable Operating System），后缀IX用来使这个名字与UNIX的构词相似。


- 经过一次又一次的争论与辩驳之后，POSIX委员会制定了一个称为1003.1的标准。


- ANSI与ISO组织也对C语言进行了标准化。


- IEEE委员会并没有采用System V与BSD特性的并集作为标准的起始点（大部分的标准组织常这样做），而是采用了两者的交集。

### 10.1.6 MINIX

- 作者编写了一个新的类UNIX系统，它足够小，因而比较容易理解。它的


- 这种情况导致本书的作者编写了一个新的类UNIX系统，它足够小，因而比较容易理解。


- MINIX属于最早的一批基于微内核设计的类UNIX系统。微内核背后的思想是在内核中只提供最少的功能，从而使其可靠和高效。


- 由于高度模块化的结构，微内核相对于单核系统有着易于理解和维护的优点。


- 微内核的主要缺点是用户态与内核态的额外切换会带来较大的性能损失。


- 2004年左右，MINIX发展方向发生了巨大的变化，它聚焦到发展一个极其可靠、可依赖的系统，能够自动修复自身错误并且自恢复，即使在可重复软件缺陷被触发的情况下也能够继续正常工作


- 2004年左右，MINIX发展方向发生了巨大的变化，它聚焦到发展一个极其可靠、可依赖的系统，能够自动修复自身错误并且自恢复，即使在可重复软件缺陷被触发的情况下也能够继续正常工作。因此


- 第1版中的模块化思想在MINIX 3.0中得到极大扩展，几乎所有的设备驱动被移到了用户空间，每一个驱动作为独立的进程运行。


- UNIX程序被移植到MINIX 3.0，包括X Window系统（有时候只用X代表）、各种各样的编译器（包括gcc）、文本处理软件、网络软件、浏览器以及其他很多程序。


- 另外，超过500种流行的UNIX程序被移植到MINIX 3.0，包括X Window系统（有时候只用X代表）、各种各样的编译器（包括gcc）、文本处理软件、网络软件、浏览器以及其他很多程序。

### 10.1.7　Linux

- 在互联网上关于MINIX的讨论和发展的早期，很多人请求（在很多情况下是要求）添加更多更好的特性。对于这些请求作者通常说“不”（


- 一位芬兰学生Linus Torvalds决定编写另外一个类UNIX系统，称为Linux。Linux将会是一个完备的系统产品，拥有许多MINIX一开始缺乏的特性。


- 当加入了虚拟内存、一个更加复杂的文件系统以及更多的特征之后，Linux的大小急速增长，并且演化成了一个完整的UNIX克隆产品


- Linux和UNIX之间还是有一个很明显的不同：Linux利用了gcc编译器的很多特性，需要做大量的工作，才能使Linux能够被ANSI标准C编译器编译。


- 接下来的一个主要的Linux发行版是1994年发布的版本1.0。

  - 到这个时候，Linux已经和UNIX充分兼容，大量的UNIX软件都被移植到了Linux上，使得它比起以前具有了更强的可用性。


- 之后一个主要的发行版，是1996年发布的2.0版本。它由大约470 000行C代码和8000行汇编代码组成。


- 接下来的一个主要的Linux发行版是1994年发布的版本1.0。它大概有165 000行代码，


- Linux0.01版本共有9300行C代码和950行汇编代码，


- Linux内核的版本号由四个数字组成，A.B.C.D，如2.6.9.11。


- 大量的标准UNIX软件移植到了Linux上，包括X窗口系统和大量的网络软件。也有人为Linux开发了两个不同的GUI（GNOME和KDE）。


- 两个不同的GUI（GNOME和KDE）。
- Linux的一个独特的特征是它的商业模式：它是自由软件。
- 作为Linux故事的一个有趣的脚注，我们注意到在Linux变得越来越流行时，它从一个意想不到的源头（AT＆T）获得了很大的推动

## 10.2 linux概述 

- 为了那些对Linux不熟悉的用户的利益，在这一节我们将对Linux本身以及如何使用Linux进行简单的介绍。

### 10.2.1　Linux的设计目标

- 一种能够同时处理多进程和多用户的交互式系统。它是由程序员设计的，也是给程序员使用的，而使用它的用户大多都比较有经验并且经常参与（通常较为复杂的）软件开发项目。


- 一直以来，UNIX都被设计成一种能够同时处理多进程和多用户的交互式系统。它是由程序员设计的，也是给程序员使用的，而使用它的用户大多都比较有经验并且经常参与（通常较为复杂的）软件开发项目。


- Linux系统自然而然地继承了这些设计目标，尽管它的第一个版本是面向个人人电脑的。


- 好的程序员追求什么样的系统？首先，大多数程序员喜欢让系统尽量简单，优雅，并且具有一致性

  - 这个特性有时被称为最小惊讶原理。


- 有经验的程序员通常还希望系统具有较强的功能性和灵活性。这意味着


- 最后，大多数程序员非常反感没用的冗余。

现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum) 
### 10.2.2　到Linux的接口

- 一个Linux系统可被看成一座金字塔，如图10-1所示。

![10-1](F:\现代操作系统\resource\10-1.jpg)

- 程序通过把参数放入寄存器（有时是栈）来调用系统调用，并发出陷阱指令从用户模式切换到内核模式。由于

现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13536-13536的标注 | 添加于 2019年4月23日星期二 上午8:51:44

系统提供了一个库，每个函数对应一个系统调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13540-13542的标注 | 添加于 2019年4月23日星期二 上午8:52:08

除了操作系统和系统调用库，所有版本的Linux必须提供大量的标准程序，其中一些是由POSIX 1003.2标准指定的，其他的根据不同版本的Linux而有所不同。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13543-13544的标注 | 添加于 2019年4月23日星期二 上午8:52:22

Linux具有三种不同的接口：真正的系统调用接口、库函数接口和由标准应用程序构成的接口。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13544-13545的标注 | 添加于 2019年4月23日星期二 上午8:52:39

大多数的Linux个人计算机发行版都把上述的面向键盘的用户界面替换为面向鼠标
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13544-13545的标注 | 添加于 2019年4月23日星期二 上午8:52:43

大多数的Linux个人计算机发行版都把上述的面向键盘的用户界面替换为面向鼠标
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13548-13549的标注 | 添加于 2019年4月23日星期二 上午8:53:25

比较流行的Linux桌面环境包括GNOME（GNU网络对象模型环境）和KDE（K桌面环境）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13549-13550的标注 | 添加于 2019年4月23日星期二 上午8:53:58

Linux上的GUI由X窗口系统（常常称为X11或者X）所支持，它负责
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13549-13551的标注 | 添加于 2019年4月23日星期二 上午8:54:05

Linux上的GUI由X窗口系统（常常称为X11或者X）所支持，它负责定义用于UNIX和类UNIX系统中基于位图显示的操作窗口的通信和显示协议。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13554-13555的标注 | 添加于 2019年4月23日星期二 上午8:56:30

当在Linux上使用图形界面时，用户可以通过鼠标点击运行程序或者打开
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13554-13555的标注 | 添加于 2019年4月23日星期二 上午8:56:37

当在Linux上使用图形界面时，用户可以通过鼠标点击运行程序或者打开文件，通过拖拉将文件从一个地方复制到另一个地方等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13554-13556的标注 | 添加于 2019年4月23日星期二 上午8:56:41

当在Linux上使用图形界面时，用户可以通过鼠标点击运行程序或者打开文件，通过拖拉将文件从一个地方复制到另一个地方等。另外，用户也可以启动一个终端模拟程序xterm，它为用户提供一个到操作系统的基本命令行界面
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13559-13560的标注 | 添加于 2019年4月23日星期二 上午8:57:01

尽管Linux系统具有图形用户界面，然而大多数程序员和高级用户都更愿意使用一个命令行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13559-13560的标注 | 添加于 2019年4月23日星期二 上午8:57:04

尽管Linux系统具有图形用户界面，然而大多数程序员和高级用户都更愿意使用一个命令行界面，称作shell。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13563-13563的标注 | 添加于 2019年4月23日星期二 上午8:58:56

bash shell（bash）。它是基于UNIX最原始的shell（Bourne shell）的，而且实际上它的名字也是Bourne Again shell的首
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13563-13564的标注 | 添加于 2019年4月23日星期二 上午8:59:01

bash shell（bash）。它是基于UNIX最原始的shell（Bourne shell）的，而且实际上它的名字也是Bourne Again shell的首字母缩写。经常
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13563-13564的标注 | 添加于 2019年4月23日星期二 上午8:59:09

bash shell（bash）。它是基于UNIX最原始的shell（Bourne shell）的，而且实际上它的名字也是Bourne Again shell的首字母缩写。经常
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13563-13564的标注 | 添加于 2019年4月23日星期二 上午8:59:30

bash shell（bash）。它是基于UNIX最原始的shell（Bourne shell）的，而且实际上它的名字也是Bourne Again shell的首字母缩写。经常使用的还有很多其他的shell（ksh，csh等
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13565-13565的标注 | 添加于 2019年4月23日星期二 上午8:59:43

当shell被启动时，它初始化自己，然后在屏幕上输出一个提示符（prompt）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13566-13566的标注 | 添加于 2019年4月23日星期二 上午9:00:10

用户输入一个命令行后，shell提取其中的第一个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13566-13566的标注 | 添加于 2019年4月23日星期二 上午9:00:14

用户输入一个命令行后，shell提取其中的第一个字，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13569-13570的标注 | 添加于 2019年4月23日星期二 上午9:00:20

命令中还可以包含参数，它们作为字符串传给所调用的程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13573-13574的标注 | 添加于 2019年4月23日星期二 上午9:01:35

负责控制一个命令的操作或者指定一个可选数值的参数称为标志（flag），习惯上由一个破折号标记。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13577-13577的标注 | 添加于 2019年4月23日星期二 上午9:02:09

为了更容易地指定多个文件名，shell支持魔法字符，有时称为通配符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13580-13581的标注 | 添加于 2019年4月23日星期二 上午9:02:52

一组在中括号中的字符可以表示其中的任意
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13580-13581的标注 | 添加于 2019年4月23日星期二 上午9:02:56

一组在中括号中的字符可以表示其中的任意一个，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13583-13584的标注 | 添加于 2019年4月23日星期二 上午9:04:30

输出。当它（或者任何其他程序）启动时，它自动获得了对标准输入（负责正常输入），标准输出（负责正常输出）和标准错误（负责输出错误信息）文件进行访问的能力。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13582-13584的标注 | 添加于 2019年4月23日星期二 上午9:04:34

像shell这样的程序不一定非要通过终端（键盘和显示器）进行输入输出。当它（或者任何其他程序）启动时，它自动获得了对标准输入（负责正常输入），标准输出（负责正常输出）和标准错误（负责输出错误信息）文件进行访问的能力。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13588-13588的标注 | 添加于 2019年4月23日星期二 上午9:04:40

也可以对标准输入和输出进行重定位，因为这种情况通常会很有用。对
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13592-13593的标注 | 添加于 2019年4月23日星期二 上午9:06:11

一个从标准输入中读取数据，对数据进行某种处理，然后输出到标准输出的程序称为过滤器（filter）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13598-13599的标注 | 添加于 2019年4月23日星期二 上午9:07:55

竖杠，也常被称为管道符（pipe symbol），告诉程序从sort中得到输出并且将其作为输入传给head，由此消除了创建、使用和删除一个临时文件的过程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13598-13600的标注 | 添加于 2019年4月23日星期二 上午9:08:04

竖杠，也常被称为管道符（pipe symbol），告诉程序从sort中得到输出并且将其作为输入传给head，由此消除了创建、使用和删除一个临时文件的过程。由管道符连接起来的命令，称为一个管线（pipeline），可以包含任意多的命令
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13598-13600的标注 | 添加于 2019年4月23日星期二 上午9:08:10

竖杠，也常被称为管道符（pipe symbol），告诉程序从sort中得到输出并且将其作为输入传给head，由此消除了创建、使用和删除一个临时文件的过程。由管道符连接起来的命令，称为一个管线（pipeline），可以包含任意多的命令。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13604-13605的标注 | 添加于 2019年4月23日星期二 上午9:09:50

Linux是一种通用多道程序设计系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13604-13605的标注 | 添加于 2019年4月23日星期二 上午9:10:39

Linux是一种通用多道程序设计系统。一个用户可以同时运行多个程序，每一个作为一个独立的进程存在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13604-13606的标注 | 添加于 2019年4月23日星期二 上午9:10:44

Linux是一种通用多道程序设计系统。一个用户可以同时运行多个程序，每一个作为一个独立的进程存在。在shell中，后台运行一个程序的语法是在原本命令后加一个“＆”。因此
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13612-13612的标注 | 添加于 2019年4月23日星期二 上午9:10:56

10.2.4　Linux应用程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13613-13613的标注 | 添加于 2019年4月23日星期二 上午9:11:07

大致分成以下6类：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13613-13614的标注 | 添加于 2019年4月23日星期二 上午9:11:10

1)文件和目录操作命令。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13613-13614的标注 | 添加于 2019年4月23日星期二 上午9:11:16

1)文件和目录操作命令。 2)过滤器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13614-13615的标注 | 添加于 2019年4月23日星期二 上午9:11:28

3)程序设计工具，如编辑器和编译器。 4)文档处理。 5)系统管理。 6)其他。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13617-13618的标注 | 添加于 2019年4月23日星期二 上午9:12:01

除了这些标准应用程序外，当然还有许多其他应用程序，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13619-13620的标注 | 添加于 2019年4月23日星期二 上午9:12:40

cp a b 将文件a移动到b，而不改变原文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13620-13621的标注 | 添加于 2019年4月23日星期二 上午9:12:45

mv a b 将文件a移动到b但是删除原文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13621-13622的标注 | 添加于 2019年4月23日星期二 上午9:12:51

cat命令可以把多个文件的内容连接起来，它读入每一个输入文件然后把它们按顺序复制到标准输出中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13621-13622的标注 | 添加于 2019年4月23日星期二 上午9:13:01

cat命令可以把多个文件的内容连接起来，它读入每一个输入文件然后把它们按顺序复制到标准输出中。可以通过
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13619-13619的标注 | 添加于 2019年4月23日星期二 上午9:13:55

首先从文件和目录操作开始。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13626-13626的标注 | 添加于 2019年4月23日星期二 上午9:14:02

过滤器：grep从标准输入或者一个或多个输入文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13626-13626的标注 | 添加于 2019年4月23日星期二 上午9:14:21

我们已经见到了很多过滤器：grep
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13619-13620的标注 | 添加于 2019年4月23日星期二 上午9:22:20

cp a b 将文件a移动到b，而不改变原文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13620-13621的标注 | 添加于 2019年4月23日星期二 上午9:22:25

mv a b 将文件a移动到b但是删除原文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13657-13658的标注 | 添加于 2019年4月23日星期二 上午10:14:55

网络软件通常是模块化的，由不同的设备和协议来支持。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13662-13662的标注 | 添加于 2019年4月23日星期二 上午11:02:25

在磁盘驱动器之上是I/O调度器，它负责排序和分配磁盘读写操作，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13663-13663的标注 | 添加于 2019年4月23日星期二 上午11:02:33

块设备列的最顶层是文件系统。Linux
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13665的标注 | 添加于 2019年4月23日星期二 上午11:04:47

图10-3的右边是Linux内核的另外两个重要组成部件，它们
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13666的标注 | 添加于 2019年4月23日星期二 上午11:04:52

图10-3的右边是Linux内核的另外两个重要组成部件，它们负责存储和进程管理任务。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13666的标注 | 添加于 2019年4月23日星期二 上午11:04:55

图10-3的右边是Linux内核的另外两个重要组成部件，它们负责存储和进程管理任务。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13667-13668的标注 | 添加于 2019年4月23日星期二 上午11:05:11

进程管理部件的最主要任务是进程的创建和终止。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13669的标注 | 添加于 2019年4月23日星期二 上午11:05:19

图10-3的右边是Linux内核的另外两个重要组成部件，它们负责存储和进程管理任务。存储管理任务包括维护虚拟内存到物理内存的映射，维护最近被访问页面的缓存以及实现一个好的页面置换算法，并且根据需要把需要的数据和代码页读入内存中。 进程管理部件的最主要任务是进程的创建和终止。它还包括一个进程调度器，负责选择下一步运行哪个进程或线程。我们将在下一节看到，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13667的标注 | 添加于 2019年4月23日星期二 上午11:05:28

图10-3的右边是Linux内核的另外两个重要组成部件，它们负责存储和进程管理任务。存储管理任务包括维护虚拟内存到物理内存的映射，维护最近被访问页面的缓存以及实现一个好的页面置换算法，并且
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13665-13667的标注 | 添加于 2019年4月23日星期二 上午11:05:29

图10-3的右边是Linux内核的另外两个重要组成部件，它们负责存储和进程管理任务。存储管理任务包括维护虚拟内存到物理内存的映射，维护最近被访问页面的缓存以及实现一个好的页面置换算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13667-13668的标注 | 添加于 2019年4月23日星期二 上午11:05:33

进程管理部件的最主要任务是进程的创建和终止。它
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13669-13670的标注 | 添加于 2019年4月23日星期二 上午11:05:49

，信号处理的代码也属于进程管理部件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13674-13675的标注 | 添加于 2019年4月23日星期二 上午11:06:43

除了内核内的静态部件外，Linux支持动态可装载模块。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13676-13676的标注 | 添加于 2019年4月23日星期二 上午11:08:04

最后，处在最顶层的是到内核的系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13676-13676的标注 | 添加于 2019年4月23日星期二 上午11:08:08

最后，处在最顶层的是到内核的系统调用接口。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13683-13683的标注 | 添加于 2019年4月23日星期二 上午11:08:53

nux系统所支持的基本概念，即进程、内存、文件系统和输入/输出。这
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13688-13688的标注 | 添加于 2019年4月23日星期二 上午11:09:33

10.3.1　基本概念
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13688-13689的标注 | 添加于 2019年4月23日星期二 上午11:09:36

Linux系统中主要的活动实体就是进程。Linux
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13688-13689的标注 | 添加于 2019年4月23日星期二 上午11:10:35

Linux系统中主要的活动实体就是进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13689-13690的标注 | 添加于 2019年4月23日星期二 上午11:13:21

。每个进程执行一段独立的程序并且在进程初始
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13690-13691的标注 | 添加于 2019年4月23日星期二 上午11:13:33

每一个进程都拥有一个独立的程序计数器，用这个程序计数器可以追踪下一条将要被执行的指令。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13689-13690的标注 | 添加于 2019年4月23日星期二 上午11:13:38

。每个进程执行一段独立的程序并且在进程初始化的时候拥有一个独立的控制线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13692-13692的标注 | 添加于 2019年4月23日星期二 上午11:13:55

由于Linux是一个多道程序设计系统，因此系统中可能会有多个彼此之间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13692-13692的标注 | 添加于 2019年4月23日星期二 上午11:14:00

由于Linux是一个多道程序设计系统，因此系统中可能会有多个彼此之间相互独立的进程在同时运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13694-13695的标注 | 添加于 2019年4月23日星期二 上午11:16:54

，在大多数单用户的工作站里，即使用户已经退出登录，仍然会有很多后台进程，即守护进程（daemon），在运行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13696-13696的标注 | 添加于 2019年4月23日星期二 上午11:17:14

计划任务（cron daemon）是一个典型的守护进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13698-13698的标注 | 添加于 2019年4月23日星期二 上午11:29:45

在Linux系统中，你可以把在未来几分钟、几个小时、几天甚至几个月会发生的事件列成时间表
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13702-13702的标注 | 添加于 2019年4月23日星期二 上午11:30:01

计划任务也可以执行一些周期性的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13702-13702的标注 | 添加于 2019年4月23日星期二 上午11:30:13

计划任务也可以执行一些周期性的活动，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13698-13699的标注 | 添加于 2019年4月23日星期二 上午11:30:21

在Linux系统中，你可以把在未来几分钟、几个小时、几天甚至几个月会发生的事件列成时间表，所以这个守护进程是非常必要
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13698-13699的标注 | 添加于 2019年4月23日星期二 上午11:30:25

在Linux系统中，你可以把在未来几分钟、几个小时、几天甚至几个月会发生的事件列成时间表，所以这个守护进程是非常必要的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13742-13742的标注 | 添加于 2019年4月23日星期二 下午6:25:09

10.3.2　Linux中进程管理相关的系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13783-13784的标注 | 添加于 2019年4月23日星期二 下午6:48:26

如果一个进程退出但是它的父进程并没有在等待它，这个进程进入僵死状态（zombie state）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13785-13785的标注 | 添加于 2019年4月23日星期二 下午6:48:34

一些与信号相关的系统调用以各种各样的方式被运用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13788-13789的标注 | 添加于 2019年4月23日星期二 下午6:50:51

为了表明所关心的信号有哪些，进程可以调用系统调用sigaction。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13788-13789的标注 | 添加于 2019年4月23日星期二 下午6:51:36

为了表明所关心的信号有哪些，进程可以调用系统调用sigaction。这个函数的第一个参数是希望捕捉的信号（如图10-5所示）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13791-13792的标注 | 添加于 2019年4月23日星期二 下午6:52:18

信号处理函数可以运行任意长的时间。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13793-13793的标注 | 添加于 2019年4月23日星期二 下午6:52:33

sigaction系统调用也可以用来忽略
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13793-13793的标注 | 添加于 2019年4月23日星期二 下午6:52:45

sigaction系统调用也可以用来忽略一个信号
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13788-13789的标注 | 添加于 2019年4月23日星期二 下午6:54:27

为了表明所关心的信号有哪些，进程可以调用系统调用sigaction。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13794-13794的标注 | 添加于 2019年4月23日星期二 下午6:54:34

敲击DEL键并不是发送信号的惟一方式。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13794-13795的标注 | 添加于 2019年4月23日星期二 下午6:56:06

敲击DEL键并不是发送信号的惟一方式。系统调用kill允许一个进程给它相关的进程发送信号。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13794-13795的标注 | 添加于 2019年4月23日星期二 下午6:56:09

敲击DEL键并不是发送信号的惟一方式。系统调用kill允许一个进程给它相关的进程发送信号。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13793-13794的标注 | 添加于 2019年4月23日星期二 下午6:56:20

sigaction系统调用也可以用来忽略一个信号，或者恢复为一个杀死进程的缺省操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13796-13797的标注 | 添加于 2019年4月23日星期二 下午7:00:37

对于很多实时应用程序，在一段特定的时间间隔之后，一个进程必须被打断，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13796-13797的标注 | 添加于 2019年4月23日星期二 下午7:00:43

对于很多实时应用程序，在一段特定的时间间隔之后，一个进程必须被打断，系统会转去做一些其他的事情，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13798-13798的标注 | 添加于 2019年4月23日星期二 下午7:01:00

为了处理这种情况，系统提供了alarm系统调
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13798-13798的标注 | 添加于 2019年4月23日星期二 下午7:01:07

为了处理这种情况，系统提供了alarm系统调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13798-13799的标注 | 添加于 2019年4月23日星期二 下午7:04:29

了一个以秒为单位的时间间隔，这个时间间隔过后，一个名为SIGALRM的信号会被发送给进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13798-13800的标注 | 添加于 2019年4月23日星期二 下午7:05:59

了一个以秒为单位的时间间隔，这个时间间隔过后，一个名为SIGALRM的信号会被发送给进程。一个进程在某一个特定的时刻只能有惟一一个未处理的警报。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13804-13804的标注 | 添加于 2019年4月23日星期二 下午11:21:06

有些时候会发生这样的情况，在信号到来之前，进程无事可做。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13807-13808的标注 | 添加于 2019年4月23日星期二 下午11:21:12

一个更好的解决办法就是使用pause系统调用，它会通知Linux系统将本进程挂起直到下一个信号到来。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13812-13812的标注 | 添加于 2019年4月23日星期二 下午11:22:00

一个进程都有一个运行用户程序的用户模式。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13813-13813的标注 | 添加于 2019年4月23日星期二 下午11:23:28

程调用系统调用之后，进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13813-13813的标注 | 添加于 2019年4月23日星期二 下午11:23:34

用系统调用之后，进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13813-13813的标注 | 添加于 2019年4月23日星期二 下午11:23:38

用系统调用之后，进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13813-13813的标注 | 添加于 2019年4月23日星期二 下午11:23:42

调用系统调用之后，进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13813-13814的标注 | 添加于 2019年4月23日星期二 下午11:23:45

调用系统调用之后，进程会陷入内核模式并且运行在内核上下文中，它将使用不同的内存映射并且拥有对所有机器资源的访问权。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13814-13815的标注 | 添加于 2019年4月23日星期二 下午11:24:12

拥有自己的内核堆栈以及内核程序计数器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13817-13817的标注 | 添加于 2019年4月23日星期二 下午11:24:21

Linux系统内核中，进程通过数据结构task_struct被表示成任务（task）。不像
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13817-13817的标注 | 添加于 2019年4月23日星期二 下午11:24:25

Linux系统内核中，进程通过数据结构task_struct被表示成任务（task）。不像
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13818-13819的标注 | 添加于 2019年4月23日星期二 下午11:25:59

个单线程的进程只有一个任务数据结构，而一个多线程的进程将为每一个用户级线程分配一个任务数据结构。最
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13818-13820的标注 | 添加于 2019年4月23日星期二 下午11:26:16

个单线程的进程只有一个任务数据结构，而一个多线程的进程将为每一个用户级线程分配一个任务数据结构。最后，Linux的内核是多线程的，并且它所拥有的是与任何用户进程无关的内核级线程，这些内核级线程执行内核代码。稍后
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13818-13820的标注 | 添加于 2019年4月23日星期二 下午11:26:29

个单线程的进程只有一个任务数据结构，而一个多线程的进程将为每一个用户级线程分配一个任务数据结构。最后，Linux的内核是多线程的，并且它所拥有的是与任何用户进程无关的内核级线程，这些内核级线程执行内核代码。稍后
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13821-13822的标注 | 添加于 2019年4月23日星期二 下午11:26:36

对于每一个进程，一个类型为task_struct的进程描述符是始终存在于内存当中的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13823-13824的标注 | 添加于 2019年4月23日星期二 下午11:26:50

为了与其他UNIX系统兼容，Linux还通过进程标识符（PID）来区分进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13826-13826的标注 | 添加于 2019年4月23日星期二 下午11:27:25

任务数据结构包含非常多的分量。其中一些分量包含指向其他数据结构或段的指针，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13832-13833的标注 | 添加于 2019年4月23日星期二 下午11:31:42

进程描述符的信息包含以下几大类： 1)调度参数。进程优先级，最近消耗
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13832-13833的标注 | 添加于 2019年4月23日星期二 下午11:31:54

进程描述符的信息包含以下几大类： 1)调度参数。进程优先级，最近消耗的CPU时间，最近睡眠的时间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13834-13834的标注 | 添加于 2019年4月23日星期二 下午11:33:16

2)内存映射。指向代码、数据、堆栈段或页表的指针
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13836-13836的标注 | 添加于 2019年4月23日星期二 下午11:40:58

3)信号。掩码显示了哪些信号被忽略、哪些信号需要捕捉、哪些信号被暂时阻塞以及哪些信号在传递当中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13837-13838的标注 | 添加于 2019年4月23日星期二 下午11:41:05

4)机器寄存器。当内核陷阱发生时，机器寄存器的内容（也包括被使用了的浮点寄存器的内容）会被保存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13838-13838的标注 | 添加于 2019年4月23日星期二 下午11:41:12

5)系统调用状态。关于当前系统调
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13838-13838的标注 | 添加于 2019年4月23日星期二 下午11:42:02

5)系统调用状态。关于当前系统调用的信息，包括参数和返回值。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13839-13839的标注 | 添加于 2019年4月23日星期二 下午11:42:07

6)文件描述符表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13840-13841的标注 | 添加于 2019年4月24日星期三 上午9:17:59

7)统计。指向记录用户、进程占用系统CPU时间的表的指针。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13842-13842的标注 | 添加于 2019年4月24日星期三 上午11:11:09

8)内核堆栈。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13842-13842的标注 | 添加于 2019年4月24日星期三 上午11:11:19

9)其他。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13842-13843的标注 | 添加于 2019年4月24日星期三 上午11:11:26

9)其他。当前进程状态。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13844-13845的标注 | 添加于 2019年4月24日星期三 上午11:13:08

记住这些信息，现在可以很容易地解释在Linux系统中是如何创建进程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13847-13848的标注 | 添加于 2019年4月24日星期三 上午11:14:07

当系统调用fork执行的时候，调用fork函数的进程陷入内核并且创建一个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13847-13848的标注 | 添加于 2019年4月24日星期三 上午11:14:12

当系统调用fork执行的时候，调用fork函数的进程陷入内核并且创建一个任务数据结构和其他相关的数据结构，如内核堆栈和thread_info结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13850-13851的标注 | 添加于 2019年4月24日星期三 上午11:14:22

进程描述符的主要内容根据父进程的进程描述符来填充。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13855-13857的标注 | 添加于 2019年4月24日星期三 上午11:18:12

但是，复制内存的代价相当昂贵，所以现代Linux系统都使用了欺骗的手段。它们赋予子进程属于它的页表，但是这些页表都指向父进程的页面，同时把这些页面标记成只读。当
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13858-13859的标注 | 添加于 2019年4月24日星期三 上午11:18:30

写。通过这种方式，使得只有需要写入数据的页面才会被复制。这种机制叫做写时复制。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13859-13859的标注 | 添加于 2019年4月24日星期三 上午11:18:41

只有需要写入数据的页面才会被复制。这种机制叫做写时复制。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13860-13861的标注 | 添加于 2019年4月24日星期三 上午11:20:05

子进程开始运行之后，运行代码（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13860-13861的标注 | 添加于 2019年4月24日星期三 上午11:20:11

子进程开始运行之后，运行代码（shell的副本）调用系统调用exec，将命令名作为exec函数的参数。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13868-13870的标注 | 添加于 2019年4月24日星期三 下午1:28:35

图10-8通过下面的例子解释了上述的步骤：某用户在终端键入一个命令ls，shell调用fork函数复制自身以创建一个新进程。新的shell调用exec函数用可执行文件ls的内容覆盖它的内存。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13873-13874的标注 | 添加于 2019年4月24日星期三 下午1:28:53

线程操作系统中存在的有争议的决策。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13874-13874的标注 | 添加于 2019年4月24日星期三 下午1:29:38

引入线程的最大争议在于维护传统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13874-13874的标注 | 添加于 2019年4月24日星期三 下午1:29:46

引入线程的最大争议在于维护传统UNIX语义的正确性。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13882-13882的标注 | 添加于 2019年4月24日星期三 下午1:32:30

文件输入/输出是另一个问题
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13884-13884的标注 | 添加于 2019年4月24日星期三 下午1:34:38

信号的处理是另一个棘手的问题
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13884-13884的标注 | 添加于 2019年4月24日星期三 下午1:36:24

信号的处理是另一个棘手的问题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13888-13889的标注 | 添加于 2019年4月24日星期三 下午1:37:10

Linux系统用一种非常值得关注的有趣的方式支持内核线
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13888-13889的标注 | 添加于 2019年4月24日星期三 下午1:37:14

Linux系统用一种非常值得关注的有趣的方式支持内核线程。具体
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13888-13889的标注 | 添加于 2019年4月24日星期三 下午1:37:17

Linux系统用一种非常值得关注的有趣的方式支持内核线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13892-13893的标注 | 添加于 2019年4月24日星期三 下午1:39:17

2000年的时候，Linux系统引入了一个新的、强大的系统调用clone
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13890-13891的标注 | 添加于 2019年4月24日星期三 下午1:39:27

从历史观点上说，进程是资源容器，而线程是执行单元。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13892-13893的标注 | 添加于 2019年4月24日星期三 下午1:39:32

2000年的时候，Linux系统引入了一个新的、强大的系统调用clone，模糊了进程和线程的区别
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13892-13893的标注 | 添加于 2019年4月24日星期三 下午1:40:55

2000年的时候，Linux系统引入了一个新的、强大的系统调用clone，模糊了进程和线程的区别，甚至使得两个概念的重要性被倒置。任何
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13892-13894的标注 | 添加于 2019年4月24日星期三 下午1:41:02

2000年的时候，Linux系统引入了一个新的、强大的系统调用clone，模糊了进程和线程的区别，甚至使得两个概念的重要性被倒置。任何其他UNIX系统的版本中都没有clone函数。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13897-13898的标注 | 添加于 2019年4月24日星期三 下午1:41:15

调用这个函数可以在当前进程或新的进程中创建一个新线程，具体依赖于参数sharing_flags。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13901-13902的标注 | 添加于 2019年4月24日星期三 下午1:42:19

在这两种情况下，新线程都从function处开始执行，并以arg作为惟一的参数。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13897-13897的标注 | 添加于 2019年4月24日星期三 下午1:42:26

pid=clone(function,stack_ptr,sharing_flags
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13897-13897的标注 | 添加于 2019年4月24日星期三 下午1:42:33

pid=clone(function,stack_ptr,sharing_flags,arg);
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13902-13902的标注 | 添加于 2019年4月24日星期三 下午1:43:13

私有堆栈，其中私有堆栈的指针被初始化为stack_ptr。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13901-13902的标注 | 添加于 2019年4月24日星期三 下午1:43:17

在这两种情况下，新线程都从function处开始执行，并以arg作为惟一的参数。同时，新线程还拥有私有堆栈，其中私有堆栈的指针被初始化为stack_ptr。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13901-13902的标注 | 添加于 2019年4月24日星期三 下午1:43:24

在这两种情况下，新线程都从function处开始执行，并以arg作为惟一的参数。同时，新线程还拥有私有堆栈，其中私有堆栈的指针被初始化为stack_ptr。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13903-13903的标注 | 添加于 2019年4月24日星期三 下午1:43:28

参数sharing_flags是一个位图，这个位图允许比传统的UNIX系统更加细粒度的共享。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13903-13904的标注 | 添加于 2019年4月24日星期三 下午1:43:51

参数sharing_flags是一个位图，这个位图允许比传统的UNIX系统更加细粒度的共享。每一位可以单独设置，且每一位决定了新线程是复制一些数据结构还是与调用clone函数的线程共享这些数据结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13906-13907的标注 | 添加于 2019年4月24日星期三 下午1:43:57

CLONE_VM位决定了虚拟内存（即地址空间）是与旧的线程共享还是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13906-13907的标注 | 添加于 2019年4月24日星期三 下午1:44:04

CLONE_VM位决定了虚拟内存（即地址空间）是与旧的线程共享还是需要复制。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13910-13911的标注 | 添加于 2019年4月24日星期三 下午1:44:46

CLONE_FS位控制着是否共享根目录、当前工作目录和umask标志。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13914-13914的标注 | 添加于 2019年4月24日星期三 下午1:46:01

一位引入了一种传统UNIX系统不可能具有的共享性。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13914-13915的标注 | 添加于 2019年4月24日星期三 下午1:46:18

CLONE_FILES位与CLONE_FS位相似。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13916-13917的标注 | 添加于 2019年4月24日星期三 下午1:46:53

CLONE_SIGHAND位控制是否在新、旧线程间共享信号句柄
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13916-13917的标注 | 添加于 2019年4月24日星期三 下午1:47:01

CLONE_SIGHAND位控制是否在新、旧线程间共享信号句柄表。如果信号处理函数表是共享的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13916-13917的标注 | 添加于 2019年4月24日星期三 下午1:47:05

CLONE_SIGHAND位控制是否在新、旧线程间共享信号句柄表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13918-13918的标注 | 添加于 2019年4月24日星期三 下午1:47:28

CLONE_PID位控制新线程是拥有自己的PID还是与父进程共享PID。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13919-13920的标注 | 添加于 2019年4月24日星期三 下午1:47:48

最后，每一个进程都有一个父进程。CLONE_PARENT位控制着哪一个线程是新线程的父线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13922-13923的标注 | 添加于 2019年4月24日星期三 下午1:48:19

由于Linux系统为不同的项目维护了独立的数据结构（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13922-13923的标注 | 添加于 2019年4月24日星期三 下午1:49:16

由于Linux系统为不同的项目维护了独立的数据结构（见10.3.3小节，如调度参数、内存映射等），因此细粒度的共享成为了可能
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13927-13927的标注 | 添加于 2019年4月24日星期三 下午1:50:47

Linux系统的线程模型带来了另一个难题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13928-13929的标注 | 添加于 2019年4月24日星期三 下午1:52:04

。为了能与其他的UNIX系统兼容，Linux对进程标识符（PID）和任务标识符（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13929-13929的标注 | 添加于 2019年4月24日星期三 下午1:52:10

区分
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13928-13929的标注 | 添加于 2019年4月24日星期三 下午1:52:14

。为了能与其他的UNIX系统兼容，Linux对进程标识符（PID）和任务标识符（TID）进行了区分
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13934-13934的标注 | 添加于 2019年4月24日星期三 下午1:52:27

10.3.4　Linux中的调度
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13934-13935的标注 | 添加于 2019年4月24日星期三 下午1:52:37

算法。首先要认识到，Linux系统的线程是内核线程，所以Linux系统的调度是基于线程的，而不是基于进程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13934-13935的标注 | 添加于 2019年4月24日星期三 下午1:52:41

首先要认识到，Linux系统的线程是内核线程，所以Linux系统的调度是基于线程的，而不是基于进程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13935-13935的标注 | 添加于 2019年4月24日星期三 下午1:52:46

到，Linux系统的线程是内核线程，所以Linux系统的调度是基于线程的，而不是基于进程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13935-13935的标注 | 添加于 2019年4月24日星期三 下午1:52:48

Linux系统的线程是内核线程，所以Linux系统的调度是基于线程的，而不是基于进程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13936-13937的标注 | 添加于 2019年4月24日星期三 下午1:52:57

为了进行调度，Linux系统将线程区分为三类： 1)实时先入先出。 2)实时轮转。 3)分时。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13937-13938的标注 | 添加于 2019年4月24日星期三 下午4:01:39

实时先入先出线程具有最高优先级，它不会被其他线程抢占，除非那是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13937-13938的标注 | 添加于 2019年4月24日星期三 下午4:01:43

实时先入先出线程具有最高优先级，它不会被其他线程抢占，除非那是一个刚刚准备好的、拥有更高优先级的实时先入先出线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13942-13942的标注 | 添加于 2019年4月24日星期三 下午4:02:20

而已。Linux系统之所以称它们为“实时”是因为Linux系统遵循的P1003.4标准（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13943-13943的标注 | 添加于 2019年4月24日星期三 下午4:02:33

使用了这个名称。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13947-13947的标注 | 添加于 2019年4月24日星期三 下午4:20:02

当前的Linux版本中，时钟频率为1000赫兹，每个时钟周期为1ms，也叫做一个最小时间间隔（jiffy）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13944-13945的标注 | 添加于 2019年4月24日星期三 下午4:20:17

传统的非实时线程按照如下的算法进行调度。在系统内部，非实时线程的优先级从100到139，也就是说，在系统内部，Linux系统区分140级的优先
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13944-13946的标注 | 添加于 2019年4月24日星期三 下午4:20:23

传统的非实时线程按照如下的算法进行调度。在系统内部，非实时线程的优先级从100到139，也就是说，在系统内部，Linux系统区分140级的优先级（包括实时和非实时任务）。就像
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13948-13948的标注 | 添加于 2019年4月24日星期三 下午4:21:28

像大多数UNIX系统一样，Linux系统给每个线程分配一个nice值（即优先级调节值）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13952-13952的标注 | 添加于 2019年4月24日星期三 下午4:22:33

Linux调度算法使用一个重要的数据结构——调度队列。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13952-13953的标注 | 添加于 2019年4月24日星期三 下午4:23:17

其他信息，调度队列中有两个数组，一个是正在活动的，一个是过期失效的。如图10-10所示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13952-13953的标注 | 添加于 2019年4月24日星期三 下午4:23:21

Linux调度算法使用一个重要的数据结构——调度队列。在系统中，一个CPU有一个调度队列，除了其他信息，调度队列中有两个数组，一个是正在活动的，一个是过期失效的。如图10-10所示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13956-13956的标注 | 添加于 2019年4月24日星期三 下午4:24:14

调度器从正在活动数组中选择一个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13952-13954的标注 | 添加于 2019年4月24日星期三 下午4:26:08

Linux调度算法使用一个重要的数据结构——调度队列。在系统中，一个CPU有一个调度队列，除了其他信息，调度队列中有两个数组，一个是正在活动的，一个是过期失效的。如图10-10所示，这两个分量都是指向数组的指针，每个数组都包含了140个链表头，每个链表具有不同的优先级
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13952-13954的标注 | 添加于 2019年4月24日星期三 下午4:26:22

Linux调度算法使用一个重要的数据结构——调度队列。在系统中，一个CPU有一个调度队列，除了其他信息，调度队列中有两个数组，一个是正在活动的，一个是过期失效的。如图10-10所示，这两个分量都是指向数组的指针，每个数组都包含了140个链表头，每个链表具有不同的优先级
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13956-13957的标注 | 添加于 2019年4月24日星期三 下午4:26:45

调度器从正在活动数组中选择一个优先级最高的任务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13962-13963的标注 | 添加于 2019年4月24日星期三 下午4:28:32

不同的优先级被赋予不同的时间片长度。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13962-13963的标注 | 添加于 2019年4月24日星期三 下午4:28:51

不同的优先级被赋予不同的时间片长度。Linux系统会赋予高优先级的进程较长的时间片
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13964-13965的标注 | 添加于 2019年4月24日星期三 下午4:29:04

这种调度模式的思想是为了使进程更快地出入内核。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13969-13970的标注 | 添加于 2019年4月24日星期三 下午4:31:33

由于Linux系统（或其他任何操作系统）事先不知道一个任务究竟是I/O密集的，还是CPU密集的，它只是依赖于连续保持的互动启发模式。通过
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13973-13973的标注 | 添加于 2019年4月24日星期三 下午4:32:53

说得更详细些，调度器给每一个任务维护一个名为sleep_avg的变量。每
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13969-13971的标注 | 添加于 2019年4月24日星期三 下午4:33:16

由于Linux系统（或其他任何操作系统）事先不知道一个任务究竟是I/O密集的，还是CPU密集的，它只是依赖于连续保持的互动启发模式。通过这种方式，Linux系统区分静态优先级和动态优先级
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13976-13976的标注 | 添加于 2019年4月24日星期三 下午4:34:11

这里讲述的调度算法指的是2.6版本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13976-13977的标注 | 添加于 2019年4月24日星期三 下午4:34:16

这里讲述的调度算法指的是2.6版本内核，最初引入这个调度算法的是不稳定的2.5版本内核。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13978-13979的标注 | 添加于 2019年4月24日星期三 下午4:37:51

由于上面描述的内容说明了通过访问正在活动数组就可以做出调度决定，那么调度可以在一个固定的时间O（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13978-13979的标注 | 添加于 2019年4月24日星期三 下午4:37:55

由于上面描述的内容说明了通过访问正在活动数组就可以做出调度决定，那么调度可以在一个固定的时间O（1）内完成，而与系统中进程的数量无关。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13979-13980的标注 | 添加于 2019年4月24日星期三 下午4:38:25

另外，调度器包含了对于多处理器和多核平台而言非常有益的特性。首先
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13983-13984的标注 | 添加于 2019年4月24日星期三 下午4:39:02

调度器只考虑可以运行的任务，这些
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13985-13986的标注 | 添加于 2019年4月24日星期三 下午4:39:40

等待队列的头包含一个指向任务链表的指针及一枚自旋锁。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13983-13985的标注 | 添加于 2019年4月24日星期三 下午4:39:46

调度器只考虑可以运行的任务，这些任务被放在适当的调度队列当中。不可运行的任务和正在等待各种I/O操作或内核事件的任务被放入另一个数据结构当中，即等待队列。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13990-13990的标注 | 添加于 2019年4月24日星期三 下午4:40:23

10.3.5　启动Linux系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13990-13991的标注 | 添加于 2019年4月24日星期三 下午4:44:16

每个平台的细节都有不同，但是整体来说，下面的步骤代表了启动的过程。当计算机启动时，BIOS加电自检（POST），并对硬件进行检测和初始化
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13992-13993的标注 | 添加于 2019年4月24日星期三 下午4:44:24

下来，启动磁盘的第一个扇区，即主引导记录（MBR），被读入到一个固定的内存区域并且执行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13992-13994的标注 | 添加于 2019年4月24日星期三 下午4:45:10

下来，启动磁盘的第一个扇区，即主引导记录（MBR），被读入到一个固定的内存区域并且执行。这个分区中含有一个很小的程序（只有512字节），这个程序从启动设备中，通常是IDE或SCSI磁盘，调入一个名为boot的独立程序。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13995-13995的标注 | 添加于 2019年4月24日星期三 下午4:45:16

复制完成后，boot程序读取启动设备的根目录。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13996-13996的标注 | 添加于 2019年4月24日星期三 下午4:45:53

这个工作通常由引导程序，如GRUB（多系统启动管理器），来完成。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13998-13999的标注 | 添加于 2019年4月24日星期三 下午4:45:58

然后，boot程序读入操作系统内核，并把控制交给内核。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #13999-14000的标注 | 添加于 2019年4月24日星期三 下午4:46:46

内核的开始代码是用汇编语言写成的，具有较高的机器依赖性。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14001-14002的标注 | 添加于 2019年4月24日星期三 下午4:47:02

C语言代码也有相当多的初始化工作
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14001-14002的标注 | 添加于 2019年4月24日星期三 下午4:47:09

C语言代码也有相当多的初始化工作要做，但是这些工作更逻辑化（而不是物理化
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14005-14006的标注 | 添加于 2019年4月24日星期三 下午4:48:02

下来，内核数据结构得到分配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14005-14006的标注 | 添加于 2019年4月24日星期三 下午4:48:05

下来，内核数据结构得到分配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14006-14006的标注 | 添加于 2019年4月24日星期三 下午4:48:09

分配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14005-14006的标注 | 添加于 2019年4月24日星期三 下午4:48:12

接下来，内核数据结构得到分配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14007-14007的标注 | 添加于 2019年4月24日星期三 下午4:48:55

从这里开始，系统进行自动配置。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14010-14011的标注 | 添加于 2019年4月24日星期三 下午4:50:13

关于支持和反对动态加载驱动程序的争论非常有趣
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14009-14009的标注 | 添加于 2019年4月24日星期三 下午4:50:38

同于传统的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14009-14010的标注 | 添加于 2019年4月24日星期三 下午4:50:41

同于传统的UNIX版本，Linux系统的设备驱动程序不需要静态链接，它们可以被动态加载（就像所有的MS-DOS和Windows版本一样）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14011-14012的标注 | 添加于 2019年4月24日星期三 下午4:50:54

动态加载的主要论点是同样的二进制文件可以分发给具有不同系统配置
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14012-14012的标注 | 添加于 2019年4月24日星期三 下午4:51:12

，这个二进制文件可以自动加载它所需要的驱动程序，甚至可以通过网络加载。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14012-14013的标注 | 添加于 2019年4月24日星期三 下午4:51:16

，这个二进制文件可以自动加载它所需要的驱动程序，甚至可以通过网络加载。反对动态加载的主要论点是安全。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14018-14019的标注 | 添加于 2019年4月24日星期三 下午4:52:54

一旦所有的硬件都配置好了，接下来要做的事情就是细心地手动运行进程0，建立它的堆栈，运行它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14018-14019的标注 | 添加于 2019年4月24日星期三 下午4:53:32

接下来要做的事情就是细心地手动运行进程0，建立它的堆栈，运行它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14019-14020的标注 | 添加于 2019年4月24日星期三 下午4:53:37

配置实时时钟，挂载根文件系统，创建init进程（进程1）和页面守护进程（进程2）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14020-14021的标注 | 添加于 2019年4月24日星期三 下午4:53:43

init进程检测它的标志以确定它应该为单用户还是多用户服务。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14025-14026的标注 | 添加于 2019年4月24日星期三 下午4:56:23

getty程序设置行速率以及其他的行属性（比如，有一些可能是调制解调器），然后在终端的屏幕上输出：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14026-14026的标注 | 添加于 2019年4月24日星期三 下午4:56:29

login: 等待用户从键盘键入用户名。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14027-14028的标注 | 添加于 2019年4月24日星期三 下午4:59:12

getty程序就结束了，登录程序/bin/login开始运行。login程序要求输入密码，给密码加密，并与保存在密码文件/etc/passwd中的加密密码进行对比。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14026-14028的标注 | 添加于 2019年4月24日星期三 下午4:59:33

login: 等待用户从键盘键入用户名。当有人坐在终端前，提供了一个用户名后，getty程序就结束了，登录程序/bin/login开始运行。login程序要求输入密码，给密码加密，并与保存在密码文件/etc/passwd中的加密密码进行对比。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14031-14033的标注 | 添加于 2019年4月24日星期三 下午4:59:56

在图中，0号终端上运行的getty程序仍然在等待用户输入。1号终端上，用户已经键入了登录名，所以getty程序已经用login程序替换掉自身，目前正在等待用户输入密码。2号终端上，用户已经成功登录，shell程序显示提示符（%）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14040-14040的标注 | 添加于 2019年4月24日星期三 下午5:02:44

Linux的内存模型简单明了，这样使得程序可移植并且能够在内存管理单元大不相同的机器上实现Linux，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14043-14043的标注 | 添加于 2019年4月24日星期三 下午5:03:00

10.4.1　基本概念
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14043-14044的标注 | 添加于 2019年4月24日星期三 下午5:03:06

每个Linux进程都有一个地址空间，逻辑上有三段组成：代码、数据和堆栈段。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14044-14044的标注 | 添加于 2019年4月24日星期三 下午5:04:17

给出了一个进程空间的例子。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14043-14044的标注 | 添加于 2019年4月24日星期三 下午5:04:22

每个Linux进程都有一个地址空间，逻辑上有三段组成：代码、数据和堆栈段。图10-12a中的进程A就给出了一个进程空间的例子。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14043-14044的标注 | 添加于 2019年4月24日星期三 下午5:06:07

每个Linux进程都有一个地址空间，逻辑上有三段组成：代码、数据和堆栈段。图10-12a中的进程A就给出了一个进程空间的例子。代码段包含了形成程序可执行代码的机器指令。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14048-14049的标注 | 添加于 2019年4月24日星期三 下午5:06:13

数据段包含了所有程序变量、字符串、数字和其他数据的存储。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14048-14049的标注 | 添加于 2019年4月24日星期三 下午5:07:08

数据段包含了所有程序变量、字符串、数字和其他数据的存储。它有两部分，初始化数据和未初始化数据。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14048-14050的标注 | 添加于 2019年4月24日星期三 下午5:07:20

数据段包含了所有程序变量、字符串、数字和其他数据的存储。它有两部分，初始化数据和未初始化数据。由于历史的原因，后者就是我们所知道的BSS（历史上称作符号起始块）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14054-14055的标注 | 添加于 2019年4月24日星期三 下午8:32:00

未初始化数据的存在实际上仅仅是个优化。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14058-14058的标注 | 添加于 2019年4月24日星期三 下午8:32:20

的是，文件包含所有显式初始化的变量，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14058-14058的标注 | 添加于 2019年4月24日星期三 下午8:32:24

的是，文件包含所有显式初始化的变量，跟随在程序代码之后。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14063-14063的标注 | 添加于 2019年4月24日星期三 下午8:56:18

为了避免分配一个全是0的物理页框，在初始化的时候，Linux就
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14063-14064的标注 | 添加于 2019年4月24日星期三 下午8:56:23

为了避免分配一个全是0的物理页框，在初始化的时候，Linux就分配了一个静态零页面，即一个全0的写保护页面。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14065-14066的标注 | 添加于 2019年4月24日星期三 下午8:57:47

跟代码段不一样，数据段可以改变
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14065-14066的标注 | 添加于 2019年4月24日星期三 下午8:57:53

跟代码段不一样，数据段可以改变。程序总是修改它的变量
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14069-14069的标注 | 添加于 2019年4月24日星期三 下午9:00:18

：进程动态分配的内存区域（通常叫做堆，heap）的范围。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14069-14069的标注 | 添加于 2019年4月24日星期三 下午9:00:25

用。进程地址空间描述符包含信息：进程动态分配的内存区域（通常叫做堆，heap）的范围。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14070-14070的标注 | 添加于 2019年4月24日星期三 下午9:08:11

第三段是栈段。在大多数机器里，它从虚拟地址空间的顶部或者附近开始，并且向下生长。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14073-14074的标注 | 添加于 2019年4月24日星期三 下午9:09:02

栈并不是空的。相反，它包含了所有的环境变量以及为了调用它而向shell输入的命令行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14073-14074的标注 | 添加于 2019年4月24日星期三 下午9:09:06

一个程序启动的时候，它的栈并不是空的。相反，它包含了所有的环境变量以及为了调用它而向shell输入的命令行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14077-14078的标注 | 添加于 2019年4月24日星期三 下午9:09:28

当两个用户运行同样的程序，比如编辑器，可以在内存中立刻保持该编辑器程序代码的两个副本，但是并不高效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14063-14064的标注 | 添加于 2019年4月24日星期三 下午9:12:51

物理页框，在初始化的时候，Linux就分配了一个静态零页面，即一个全0的写保护页
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14063-14064的标注 | 添加于 2019年4月24日星期三 下午9:12:58

为了避免分配一个全是0的物理页框，在初始化的时候，Linux就分配了一个静态零页面，即一个全0的写保护页
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14065-14066的标注 | 添加于 2019年4月24日星期三 下午9:13:16

跟代码段不一样，数据段可以改变。程序总是修改它的变量
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14067-14068的标注 | 添加于 2019年4月24日星期三 下午9:13:33

有一个系统调用brk，允许程序设置其数据段的大小
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14068-14069的标注 | 添加于 2019年4月24日星期三 下午9:13:55

C库函数malloc通常被用来分配内存，它就大量使用这个系统调用。进程地址空间描述符包含信息：进程动态分配的内存区域（通常叫做堆，heap）的范围。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14070-14070的标注 | 添加于 2019年4月24日星期三 下午9:14:00

第三段是栈段。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14070-14070的标注 | 添加于 2019年4月24日星期三 下午9:14:08

第三段是栈段。在大多数机器里，它从虚拟地址空间的顶部或者附近
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14070-14070的标注 | 添加于 2019年4月24日星期三 下午9:14:14

第三段是栈段。在大多数机器里，它从虚拟地址空间的顶部或者附近开始，并且向下生长。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14073-14073的标注 | 添加于 2019年4月24日星期三 下午9:14:33

当一个程序启动的时候，它的栈并不是空
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14073-14074的标注 | 添加于 2019年4月24日星期三 下午9:14:38

当一个程序启动的时候，它的栈并不是空的。相反，它包含了所有的环境变量以及为了调用它而向shell输入的命令行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14077-14078的标注 | 添加于 2019年4月24日星期三 下午9:14:53

两个用户运行同样的程序，比如编辑器，可以在内存中立刻保持该编辑器程序代码的两个副本，但是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14077-14078的标注 | 添加于 2019年4月24日星期三 下午9:14:58

两个用户运行同样的程序，比如编辑器，可以在内存中立刻保持该编辑器程序代码的两个副本，但是并不高效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14078-14079的标注 | 添加于 2019年4月24日星期三 下午9:15:33

大多数Linux系统支持共享代码段。在图10-12a和图10-12c中，可以看到两个进程A和B拥有相同的代码
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14079-14080的标注 | 添加于 2019年4月24日星期三 下午9:15:38

这种映射是通过虚拟内存硬件来实现的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14082-14083的标注 | 添加于 2019年4月24日星期三 下午9:16:49

在有些计算机上，硬件支持指令和数据拥有不同的地址空间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14082-14083的标注 | 添加于 2019年4月24日星期三 下午9:17:58

在有些计算机上，硬件支持指令和数据拥有不同的地址空间。如果有这个特性，Linux就可以利用它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14086-14086的标注 | 添加于 2019年4月24日星期三 下午9:24:49

除了动态分配更多的内存，Linux
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14086-14086的标注 | 添加于 2019年4月24日星期三 下午9:24:53

除了动态分配更多的内存，Linux中的进程可以通过内存映射文件来访问文件数据。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14088-14089的标注 | 添加于 2019年4月24日星期三 下午11:31:24

在图10-13中，我们可以看到一个文件被同时映射到两个进程中，但在不同的虚拟地址上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14093-14094的标注 | 添加于 2019年4月24日星期三 下午11:32:05

10.4.2　Linux中的内存管理系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14094-14095的标注 | 添加于 2019年4月24日星期三 下午11:32:14

这个主题被认为是太依赖于机器而不便于标准
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14094-14095的标注 | 添加于 2019年4月24日星期三 下午11:36:08

这个主题被认为是太依赖于机器而不便于标准化。可是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14094-14095的标注 | 添加于 2019年4月24日星期三 下午11:36:10

这个主题被认为是太依赖于机器而不便于标准化。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14097-14097的标注 | 添加于 2019年4月24日星期三 下午11:36:28

实际上，许多Linux系统有管理内存的系统调用。最常见的列在了图10-14中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14101-14101的标注 | 添加于 2019年4月24日星期三 下午11:50:07

mmap和munmap系统调用控制内存映射文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14101-14102的标注 | 添加于 2019年4月24日星期三 下午11:50:32

mmap和munmap系统调用控制内存映射文件。mmap的第一个参数，addr，决定文件被映射的地址
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14103-14103的标注 | 添加于 2019年4月25日星期四 上午9:04:38

第二个参数len指示要映射的字节数。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14103-14104的标注 | 添加于 2019年4月25日星期四 上午9:04:56

倍。第三个参数，prot，确定对映射文件的保护。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14104-14105的标注 | 添加于 2019年4月25日星期四 上午9:05:02

第四个参数，flags，控制文件是私有的还是共享的以及addr是一个需求还是仅仅是一个提示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14104-14105的标注 | 添加于 2019年4月25日星期四 上午9:05:07

第四个参数，flags，控制文件是私有的还是共享的以及addr是一个需求还是仅仅是一个提示。第五个参数，fd，是要映射的文件的描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14106-14106的标注 | 添加于 2019年4月25日星期四 上午9:05:15

，offset告诉从文件中的什么位置开始映射。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14107-14107的标注 | 添加于 2019年4月25日星期四 上午9:05:23

另一个调用，unmap，移除一个被映射的文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14111-14111的标注 | 添加于 2019年4月25日星期四 上午9:05:30

10.4.3　Linux中内存管理的实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14111-14112的标注 | 添加于 2019年4月25日星期四 上午9:06:15

32位机器上的每个Linux进程通常有3GB的虚拟地址空间，还有1GB留给其页表和其他内核数据
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14115-14115的标注 | 添加于 2019年4月25日星期四 上午9:07:14

为了允许多个进程共享物理内存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14115-14117的标注 | 添加于 2019年4月25日星期四 上午9:07:49

为了允许多个进程共享物理内存，Linux监视物理内存的使用，在用户进程或者内核构件需要时分配更多的内存，把物理内存动态映射到不同进程的地址空间中去，把程序的可执行体、文件和其他状态信息移入移出内存来高效地利用平台资源并且保障程序执行的进展性。本章
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14118-14119的标注 | 添加于 2019年4月25日星期四 上午10:14:50

1.物理内存管理 在许多系统中由于异构硬件限制，并不是所有的物理内存都能被相同地对待，尤其是对于I/O和
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14118-14120的标注 | 添加于 2019年4月25日星期四 上午10:14:54

1.物理内存管理 在许多系统中由于异构硬件限制，并不是所有的物理内存都能被相同地对待，尤其是对于I/O和虚拟内存。Linux区分三种内存区域（zone）：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14120-14120的标注 | 添加于 2019年4月25日星期四 上午10:15:26

1)ZONE_DMA：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14120-14120的标注 | 添加于 2019年4月25日星期四 上午10:15:30

2)ZONE_NORMAL：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14121-14121的标注 | 添加于 2019年4月25日星期四 上午10:15:36

3)ZONE_HIGHMEM：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14122-14122的标注 | 添加于 2019年4月25日星期四 上午10:15:54

内存区域的确切边界和布局是硬件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14122-14122的标注 | 添加于 2019年4月25日星期四 上午10:15:57

的。在x86硬件上，一些
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14122-14122的标注 | 添加于 2019年4月25日星期四 上午10:16:09

内存区域的确切边界和布局是硬件体系结构相关的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14126-14126的标注 | 添加于 2019年4月25日星期四 上午10:32:25

Linux的内存由三部分组成。前两
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14126-14126的标注 | 添加于 2019年4月25日星期四 上午10:32:37

Linux的内存由三部分组成。前两部分是内核和内存映射，被
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14127-14127的标注 | 添加于 2019年4月25日星期四 上午10:32:41

内存的其他部分被划分成页框，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14127-14128的标注 | 添加于 2019年4月25日星期四 上午10:32:47

内存的其他部分被划分成页框，每一个页框都可以包含一个代码、数据或者栈页面，一个页表页面，或者在空闲列表中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14129-14131的标注 | 添加于 2019年4月25日星期四 上午10:33:46

首先，Linux维护一个页描述符数组，称为mem_map，其中页描述符是page类型的，而且系统当中的每个物理页框都有一个页描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14134-14135的标注 | 添加于 2019年4月25日星期四 上午10:37:39

因为物理内存被分成区域，所以Linux为每个区域维护一个区域描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14136-14137的标注 | 添加于 2019年4月25日星期四 上午10:39:43

此外，区域描述符包含一个空闲区数
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14136-14137的标注 | 添加于 2019年4月25日星期四 上午10:39:46

此外，区域描述符包含一个空闲区数组。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14136-14137的标注 | 添加于 2019年4月25日星期四 下午2:31:19

此外，区域描述符包含一个空闲区数组。该数组中的第i个元素标记了2i 个空闲页的第一个块的第一个页描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14141-14142的标注 | 添加于 2019年4月25日星期四 下午2:33:11

最后，Linux可以移植到NUMA体系结构（不同的内存地址有不同
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14141-14143的标注 | 添加于 2019年4月25日星期四 下午2:33:24

最后，Linux可以移植到NUMA体系结构（不同的内存地址有不同的访问时间），为了区分不同节点上的物理内存（同时避免跨节点分配数据结构），使用了一个节点描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14145-14145的标注 | 添加于 2019年4月25日星期四 下午2:34:43

为了使分页机制在32位和64位体系结构下高效工作，Linux
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14152-14153的标注 | 添加于 2019年4月25日星期四 下午2:41:07

物理内存可以用于多种目的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14157-14157的标注 | 添加于 2019年4月25日星期四 下午2:46:49

此外，Linux支持动态加载模块，最常见的是设备驱动。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14157-14158的标注 | 添加于 2019年4月25日星期四 下午2:47:16

此外，Linux支持动态加载模块，最常见的是设备驱动。它们可以是任意大小的并且必须分配一个连续的内核内存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14159-14159的标注 | 添加于 2019年4月25日星期四 下午2:47:30

2.内存分配机制
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14160-14160的标注 | 添加于 2019年4月25日星期四 下午2:47:34

Linux支持多种内存分配机制。分配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14160-14160的标注 | 添加于 2019年4月25日星期四 下午2:47:43

Linux支持多种内存分配机制。分配物理内存页框的主要机制是页面分配器，它使用了著名的伙伴算法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14168-14169的标注 | 添加于 2019年4月25日星期四 下午3:51:47

Linux用伙伴算法管理内存，同时有一些附加特性。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14168-14170的标注 | 添加于 2019年4月25日星期四 下午3:57:21

Linux用伙伴算法管理内存，同时有一些附加特性。它有个数组，其中的第一个元素是大小为1个单位的内存块列表的头部，第二个元素是大小为2个单位的内存块列表的头部，下一个是大小为4个单位的内存块列表的头部，以此类推。通过
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14171-14171的标注 | 添加于 2019年4月25日星期四 下午4:01:19

这个算法导致了大量的内部碎片，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14172-14173的标注 | 添加于 2019年4月25日星期四 下午4:01:24

为了缓解这个问题，Linux有另一个内存分配器，slab分配器
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14172-14173的标注 | 添加于 2019年4月25日星期四 下午4:02:09

为了缓解这个问题，Linux有另一个内存分配器，slab分配器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14172-14173的标注 | 添加于 2019年4月25日星期四 下午4:02:17

为了缓解这个问题，Linux有另一个内存分配器，slab分配器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14174-14174的标注 | 添加于 2019年4月25日星期四 下午4:04:56

因为内核频繁地创建和撤销一定类型的对象（如task_struct），它使用了对象缓
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14174-14174的标注 | 添加于 2019年4月25日星期四 下午4:05:09

因为内核频繁地创建和撤销一定类型的对象（如task_struct），它使用了对象缓存。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14176-14177的标注 | 添加于 2019年4月25日星期四 下午4:06:42

例如，当内核需要分配一个新的进程描述符（一个新的task_struct）的时候，它在task结构的对象缓存中寻找，首先试图找一个部分满的slab并且在那里分配一个新的task_struct对象。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14180-14180的标注 | 添加于 2019年4月25日星期四 下午4:13:02

第三个内存分配器vmalloc也是可用的，并且用于那些仅仅需要虚拟地址空间连续的请求
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14183-14183的标注 | 添加于 2019年4月25日星期四 下午4:17:54

3.虚拟地址空间表示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14184-14184的标注 | 添加于 2019年4月25日星期四 下午4:18:01

虚拟地址空间被分割成同构连续页面对齐的区域。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14184-14185的标注 | 添加于 2019年4月25日星期四 下午4:30:51

虚拟地址空间被分割成同构连续页面对齐的区域。也就是说，每个区域由一系列连续的具有相同保护和分页属性的页面组成。代码段和映射文件就是区（area）的例子（见图10-15）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14188-14189的标注 | 添加于 2019年4月25日星期四 下午4:30:59

在内核中，每个区是用vm_area_struct项来描述的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14188-14189的标注 | 添加于 2019年4月25日星期四 下午4:32:53

在内核中，每个区是用vm_area_struct项来描述的。一个进程的所有vm_area_struct用一个链表链接在一起，并且按照虚拟地址排序以便可以找到所有的页面。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14192-14192的标注 | 添加于 2019年4月25日星期四 下午4:33:18

vm_area_struct也记录该区是私有的还是跟一个或多个其他进程共享的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14196-14196的标注 | 添加于 2019年4月25日星期四 下午4:39:49

vm_area_struct也记录该区是否在磁盘上有备份存储，如果有，在什么地方。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14198-14198的标注 | 添加于 2019年4月25日星期四 下午4:41:53

一个顶层内存描述符mm_struct收集
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14198-14199的标注 | 添加于 2019年4月25日星期四 下午4:52:16

一个顶层内存描述符mm_struct收集属于一个地址空间的所有虚拟内存区相关的信息，还有关于不同段（代码，数据，栈）和用户共享地址空间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14198-14199的标注 | 添加于 2019年4月25日星期四 下午4:52:18

一个顶层内存描述符mm_struct收集属于一个地址空间的所有虚拟内存区相关的信息，还有关于不同段（代码，数据，栈）和用户共享地址空间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14198-14199的标注 | 添加于 2019年4月25日星期四 下午4:52:28

一个顶层内存描述符mm_struct收集属于一个地址空间的所有虚拟内存区相关的信息，还有关于不同段（代码，数据，栈）和用户共享地址空间的信息等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14200-14200的标注 | 添加于 2019年4月25日星期四 下午4:53:22

按照虚拟地址顺序组织在链表中的。这种方
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14201-14202的标注 | 添加于 2019年4月25日星期四 下午4:53:30

vm_area_struct项目被组织成二叉“红黑”树（一种为了快速查找而优化的数据结构）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14207-14207的标注 | 添加于 2019年4月25日星期四 下午4:56:02

10.4.4　Linux中的分页
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14210-14211的标注 | 添加于 2019年4月25日星期四 下午5:10:23

Linux分页背后的基本思想是简单的：为了运行，一个进程并不需要完全在内存中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14207-14208的标注 | 添加于 2019年4月25日星期四 下午6:43:06

早期的UNIX系统，每当所有的活动进程不能容纳在物理内存中时就用一个交换进程在内存和磁盘之间移动整个进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14208-14209的标注 | 添加于 2019年4月25日星期四 下午6:53:24

内存管理单元是一个页，并且几乎
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14208-14209的标注 | 添加于 2019年4月25日星期四 下午6:53:29

内存管理单元是一个页，并且几乎所有的内存管理部件以页为操作粒度。交换子系统也是以页为操作粒度的，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14208-14210的标注 | 添加于 2019年4月25日星期四 下午6:54:25

内存管理单元是一个页，并且几乎所有的内存管理部件以页为操作粒度。交换子系统也是以页为操作粒度的，并且跟页框回收算法紧耦合在一起。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14210-14211的标注 | 添加于 2019年4月25日星期四 下午6:54:37

Linux分页背后的基本思想是简单的：为了运行，一个进程并不需要完全在内存中。实际上所需要的是用户结构和页表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14213-14214的标注 | 添加于 2019年4月25日星期四 下午6:54:56

分页是一部分由内核实现而一部分由一个新的进程，页面守护进程，实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14213-14214的标注 | 添加于 2019年4月25日星期四 下午6:55:01

分页是一部分由内核实现而一部分由一个新的进程，页面守护进程，实现的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14213-14215的标注 | 添加于 2019年4月25日星期四 下午6:57:07

分页是一部分由内核实现而一部分由一个新的进程，页面守护进程，实现的。页面守护进程是进程2（进程0是idle进程，传统上称为交换器，而进程1是init，如图10-11所示）。跟
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14216-14217的标注 | 添加于 2019年4月25日星期四 下午6:58:22

Linux是一个请求换页系统，没有预分页和工作集的概念（尽管有个系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14216-14218的标注 | 添加于 2019年4月25日星期四 下午6:58:29

Linux是一个请求换页系统，没有预分页和工作集的概念（尽管有个系统调用，其中用户可以给系统一个提示将要使用某个页面，希望需要的时候页面在内存中）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14216-14217的标注 | 添加于 2019年4月25日星期四 下午6:58:37

Linux是一个请求换页系统，没有预分页和工作集的概念（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14218-14219的标注 | 添加于 2019年4月25日星期四 下午6:59:29

。代码段和映射文件换页到它们各自在磁盘上的文件中。所有其他的都被换页到分页分区（如果存在）或者一个固定长度的分页
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14218-14219的标注 | 添加于 2019年4月25日星期四 下午6:59:46

。代码段和映射文件换页到它们各自在磁盘上的文件中。所有其他的都被换页到分页分区（如果存在）或者一个固定长度的分页文件，叫做交换区
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14220-14221的标注 | 添加于 2019年4月26日星期五 下午6:30:55

换页到一个独立的分区并且像一个原始设备那样访问的这种方式要比换页到一个文件的方式更加高效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14221-14221的标注 | 添加于 2019年4月26日星期五 下午6:31:01

：首先，文件块和磁盘块的映射不需要了（节省了磁盘I/O读间接块）；其次，物理写可以
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14221-14223的标注 | 添加于 2019年4月26日星期五 下午6:31:07

：首先，文件块和磁盘块的映射不需要了（节省了磁盘I/O读间接块）；其次，物理写可以是任意大小的，并不仅仅是文件块大小；第三，一个页总是被连续地写到磁盘，用一个分页文件，也许是或者也许不是这样的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14223-14223的标注 | 添加于 2019年4月26日星期五 下午6:31:16

页面只有在需要的时候才在分页设备或者分区上被分配。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14225-14226的标注 | 添加于 2019年4月26日星期五 下午11:14:24

页分区（若存在）拥有比任何分页文件更高的优先级。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14227-14227的标注 | 添加于 2019年4月26日星期五 下午11:14:31

页面置换算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14227-14228的标注 | 添加于 2019年4月26日星期五 下午11:14:51

Linux试图保留一些空闲页面，这样可以在需要的时候分配它们。当然，这个页面池必须不断地加以补充。PFRA（页框回收算法）算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14229-14229的标注 | 添加于 2019年4月26日星期五 下午11:14:55

首先，Linux区分四种不同的页面
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14229-14230的标注 | 添加于 2019年4月26日星期五 下午11:15:05

首先，Linux区分四种不同的页面：不可回收的（unreclaimable）、可交换的（swappable）、可同步的（syncable）、可丢弃的（discardable）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14229-14231的标注 | 添加于 2019年4月26日星期五 下午11:26:56

首先，Linux区分四种不同的页面：不可回收的（unreclaimable）、可交换的（swappable）、可同步的（syncable）、可丢弃的（discardable）。不可回收页面包括保留或者锁定页面、内核态栈等，不会被换出页面。可交换页必须在回收之前写回到交换区或者分页磁盘分区。可同步的页面如果被标记为dirty就
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14229-14232的标注 | 添加于 2019年4月26日星期五 下午11:27:01

首先，Linux区分四种不同的页面：不可回收的（unreclaimable）、可交换的（swappable）、可同步的（syncable）、可丢弃的（discardable）。不可回收页面包括保留或者锁定页面、内核态栈等，不会被换出页面。可交换页必须在回收之前写回到交换区或者分页磁盘分区。可同步的页面如果被标记为dirty就必须要写回到磁盘。最后，可丢弃的页面可以被立即回收。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14246-14247的标注 | 添加于 2019年4月26日星期五 下午11:41:39

在PFRA期间，页面按照图10-18描述的方式在活动和非活动列表之间移来移去。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14244-14244的标注 | 添加于 2019年4月26日星期五 下午11:41:54

PFRA用一个类似时钟的算法来选择
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14244-14244的标注 | 添加于 2019年4月26日星期五 下午11:41:59

PFRA用一个类似时钟的算法来选择旧页面换出。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14237-14238的标注 | 添加于 2019年4月26日星期五 下午11:42:06

每次PFRA执行，它首先回收容易的页面，然后处理更难的。可丢弃页面和未被引用的页面都是可以被立即回收的，同时把它们添加到区域的空闲链表中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14237-14238的标注 | 添加于 2019年4月26日星期五 下午11:42:18

每次PFRA执行，它首先回收容易的页面，然后处理更难的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14232-14233的标注 | 添加于 2019年4月26日星期五 下午11:42:24

在启动的时候，init开启一个页面守护进程kswapd（每个内存节点都有一个），并且配置它们能周期性运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14229-14230的标注 | 添加于 2019年4月26日星期五 下午11:42:51

首先，Linux区分四种不同的页面：不可回收的（unreclaimable）、可交换的（swappable）、可同步的（syncable）、可丢弃的（discardable）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14252-14252的标注 | 添加于 2019年4月26日星期五 下午11:44:00

处在非活动列表上的页面，自从上次
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14252-14253的标注 | 添加于 2019年4月26日星期五 下午11:44:04

处在非活动列表上的页面，自从上次检查未被引用过，故而是移出的最佳候选。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14254-14255的标注 | 添加于 2019年4月26日星期五 下午11:51:38

PFRA维护一些页面，尽管可能已经被
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14260-14260的标注 | 添加于 2019年4月26日星期五 下午11:59:38

Linux和其他的UNIX系统一样，I/O系统都相当的简单明了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14263-14263的标注 | 添加于 2019年4月27日星期六 上午12:01:41

10.5.1　基本概念
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14260-14261的标注 | 添加于 2019年4月27日星期六 上午12:01:54

，所有的I/O设备都被当作文件来处理，并且通过与访问所有文件同样的read和write系统调用来访问。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14263-14264的标注 | 添加于 2019年4月27日星期六 上午12:02:01

像所有的计算机一样，运行Linux的计算机具有磁盘、打印机、网络等I/O设备。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14264-14265的标注 | 添加于 2019年4月27日星期六 上午12:02:29

Linux把设备当作一种特殊文件整合到文件系统中。每个I/O设备都被分配了一条路径，通常在/dev目录下。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14267-14267的标注 | 添加于 2019年4月27日星期六 上午12:02:36

可以用与访问其他普通文件相同的方式来访问这些特殊文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14267-14268的标注 | 添加于 2019年4月27日星期六 上午12:04:53

可以用与访问其他普通文件相同的方式来访问这些特殊文件。不需要特殊的命令或者系统调用。常用的open、read、write等系统调用就够用了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14271-14272的标注 | 添加于 2019年4月27日星期六 上午12:05:18

特殊文件（设备）分为两类，块特殊文件和字符特殊文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14273-14274的标注 | 添加于 2019年4月27日星期六 上午12:05:38

。磁盘就是块特殊文件的典型应用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14274-14274的标注 | 添加于 2019年4月27日星期六 上午12:05:43

字符特殊文件通常用于表示输入和
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14272-14272的标注 | 添加于 2019年4月27日星期六 上午12:06:02

特殊文件由一组具有编号的块组成。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14271-14272的标注 | 添加于 2019年4月27日星期六 上午12:06:10

特殊文件（设备）分为两类，块特殊文件和字符特殊文件。一个块特殊文件由一组具有编号的块组成。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14274-14274的标注 | 添加于 2019年4月27日星期六 上午12:06:19

字符特殊文件通常用于表示输入和输出字符流的设备。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14276-14277的标注 | 添加于 2019年4月27日星期六 上午12:07:12

每个特殊文件都和一个处理其对应设备的设备驱动相关联。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14280-14281的标注 | 添加于 2019年4月27日星期六 上午12:09:58

大部分的字符特殊文件都不能够被随机访问，因此它们通常需要用不同于块特殊文件的方式来控制。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14286-14286的标注 | 添加于 2019年4月27日星期六 上午12:10:05

Linux允许用户自定义这些特殊的功能，而不是强迫每个人使用系统选择的那种。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14291-14291的标注 | 添加于 2019年4月27日星期六 上午12:10:20

10.5.2　网络
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14292-14292的标注 | 添加于 2019年4月27日星期六 上午12:10:34

在Berkeley的设计中，关键概念是套接字（socket）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14291-14292的标注 | 添加于 2019年4月27日星期六 上午12:10:41

I/O的另外一个例子是网络，由Berkeley UNIX首创并在Linux中差不多原封不动引入。在Berkeley的设计中，关键概念是套接字（socket）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14294-14295的标注 | 添加于 2019年4月27日星期六 上午12:10:57

创建一个套接字成功后，系统返回一个文件描述符。创建连接、读数据、写数据、解除连接时要用到这个文件描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14297-14297的标注 | 添加于 2019年4月27日星期六 上午12:11:19

每个套接字支持一种特定的网络类型，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14298-14298的标注 | 添加于 2019年4月27日星期六 上午12:11:25

2)可靠的面向连接的数据
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14298-14299的标注 | 添加于 2019年4月27日星期六 上午12:11:30

可靠的面向连接的字节流。 2)可靠的面向连接的数据包流。 3)不可靠的数据包传输。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14299-14300的标注 | 添加于 2019年4月27日星期六 上午12:11:43

第一种套接字类型允许在不同机器上的两个进程之间建立一个等同于管道的连接。字
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14301-14302的标注 | 添加于 2019年4月27日星期六 上午12:11:54

除保留了数据包之间的分界之外，第二种类型和第一种是相同的。如果
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14304-14304的标注 | 添加于 2019年4月27日星期六 上午12:12:23

用户可以使用第三种类型的套接字来访问原始网络。这种
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14304-14305的标注 | 添加于 2019年4月27日星期六 上午12:12:55

用户可以使用第三种类型的套接字来访问原始网络。这种类型的套接字尤其适用于实时应用和用户想要实现特定错误处理模式的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14304-14305的标注 | 添加于 2019年4月27日星期六 上午12:12:59

用户可以使用第三种类型的套接字来访问原始网络。这种类型的套接字尤其适用于实时应用和用户想要实现特定错误处理模式的情况。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14307-14308的标注 | 添加于 2019年4月27日星期六 上午12:13:17

在创建套接字时，有一个参数指定使用的协议。对于可靠字节流通信来说
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14307-14309的标注 | 添加于 2019年4月27日星期六 上午12:13:24

在创建套接字时，有一个参数指定使用的协议。对于可靠字节流通信来说，使用最广泛的协议是TCP（传输控制协议）。对于不可靠数据包传输来说，UDP（用户数据报协议）是最常用的协议。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14310-14311的标注 | 添加于 2019年4月27日星期六 上午12:13:35

在一个套接字能够用于网络通信之前，必须有一个地址与它绑定。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14313-14314的标注 | 添加于 2019年4月27日星期六 上午12:13:54

一旦套接字在源计算机和目的计算机都建立成功，则两个计算机之间可以建立起一个连接（对于面向连接的通信来说）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14316-14317的标注 | 添加于 2019年4月27日星期六 上午12:14:16

一旦连接建立成功，它的功能就类似于一个管道。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14321-14321的标注 | 添加于 2019年4月27日星期六 上午12:14:26

10.5.3　Linux的输入/输出系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14321-14322的标注 | 添加于 2019年4月27日星期六 上午12:14:31

Linux系统中的每个I/O设备都有一个特殊文件与其关联。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14323-14324的标注 | 添加于 2019年4月27日星期六 上午12:14:43

大部分UNIX系统有一个叫作ioctl的系统调用，它在特殊文件上执行大量设备专用的操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14325-14325的标注 | 添加于 2019年4月27日星期六 上午12:15:13

在Linux和现代UNIX系统中，每个功能调用是独立的系统调
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14325-14326的标注 | 添加于 2019年4月27日星期六 上午12:15:19

在Linux和现代UNIX系统中，每个功能调用是独立的系统调用，还是它们共享一个单独的系统调用或者其他的方式，都是依赖于实现的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14323-14324的标注 | 添加于 2019年4月27日星期六 上午12:15:29

大部分UNIX系统有一个叫作ioctl的系统调用，它在特殊文件上执行大量设备专用的操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14326-14326的标注 | 添加于 2019年4月27日星期六 上午12:15:49

图10-20中的前4个系统调用用来设置和获取终端速度。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14326-14326的标注 | 添加于 2019年4月27日星期六 上午12:15:58

在图10-20中的前4个系统调用用来设置和获取终端速度。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14330-14330的标注 | 添加于 2019年4月27日星期六 上午12:17:01

站服务，称为ADSL（非对称数字用户环线）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14329-14330的标注 | 添加于 2019年4月27日星期六 上午12:17:07

，一些电话公司提供8Mbps的入站服务和512kbps的出站服务，称为ADSL（非对称数字用户环线）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14329-14330的标注 | 添加于 2019年4月27日星期六 上午12:17:11

不对称性仍然存在，一些电话公司提供8Mbps的入站服务和512kbps的出站服务，称为ADSL（非对称数字用户环线）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14329-14330的标注 | 添加于 2019年4月27日星期六 上午12:17:15

不对称性仍然存在，一些电话公司提供8Mbps的入站服务和512kbps的出站服务，称为ADSL（非对称数字用户环线）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14332-14332的标注 | 添加于 2019年4月27日星期六 上午12:17:23

列表中的最后两个系统调用主要用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14332-14333的标注 | 添加于 2019年4月27日星期六 上午12:17:28

列表中的最后两个系统调用主要用来设置和读回所有用来消除字符和行以及中断进程等功能的特殊字符。另外
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14337-14337的标注 | 添加于 2019年4月27日星期六 上午12:17:46

10.5.4　输入/输出在Linux中的实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14338-14338的标注 | 添加于 2019年4月27日星期六 上午12:17:53

在Linux中I/O是通过一系列的设备驱动来实现的，每个设备类型对应一个设备驱动。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14340-14341的标注 | 添加于 2019年4月27日星期六 上午12:18:36

用户访问一个特殊文件时，由文件系统提供此特殊文件的主设备号和次设备号，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14340-14341的标注 | 添加于 2019年4月27日星期六 上午12:18:44

用户访问一个特殊文件时，由文件系统提供此特殊文件的主设备号和次设备号，并判断它是一个块特殊文件还是一个字符特殊文件。主
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14344-14345的标注 | 添加于 2019年4月27日星期六 上午12:19:06

图10-21展示了一部分可以跟不同的字符设备关联的操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14349-14349的标注 | 添加于 2019年4月27日星期六 上午12:21:29

个驱动程序都分为两部分。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14349-14349的标注 | 添加于 2019年4月27日星期六 上午12:21:33

每个驱动程序都分为两部分。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14350-14351的标注 | 添加于 2019年4月27日星期六 上午12:21:47

上半部分运行在调用者的上下文并且与Linux其他部分交互。下半部分运行在内核上下文并且与设备进行交互
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14351-14352的标注 | 添加于 2019年4月27日星期六 上午12:22:04

所有可以被调用的内核功能都定义在一个叫做驱动程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14351-14352的标注 | 添加于 2019年4月27日星期六 上午12:22:08

所有可以被调用的内核功能都定义在一个叫做驱动程序-内核接口（Driver-Kernel Interface）的文档
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14353-14354的标注 | 添加于 2019年4月27日星期六 上午12:22:34

O系统被划分为两大部分：处理块特殊文件的部分和处理字符特殊文件的部分。下面
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14354-14355的标注 | 添加于 2019年4月27日星期六 上午12:22:43

系统中处理块特殊文件（比如，磁盘）I/O的部分的目标是使必须要完成的传输次数最小。为了
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14355-14356的标注 | 添加于 2019年4月27日星期六 上午12:23:46

Linux系统在磁盘驱动程序和文件系统之间放置了一个高速缓存（cache），如图10-22。在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14361-14361的标注 | 添加于 2019年4月27日星期六 上午12:24:06

cache是内核里面用来保存数以千计的最近使用的数据块的表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14363-14364的标注 | 添加于 2019年4月27日星期六 上午12:24:19

如果页面cache中没有这个块，系统就会从磁盘中
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14365-14366的标注 | 添加于 2019年4月27日星期六 上午12:24:27

页面cache也支持写数据块，就像读数据一样。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14368-14369的标注 | 添加于 2019年4月27日星期六 上午12:25:05

Linux依靠一个I/O调度器来保证磁头反复移动的延迟最小。I/
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14370-14370的标注 | 添加于 2019年4月27日星期六 上午12:25:23

基本的Linux I/O调度器
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14370-14371的标注 | 添加于 2019年4月27日星期六 上午12:25:27

基本的Linux I/O调度器基于最初的Linus电梯调度器（Linus Elevator scheduler）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14373-14374的标注 | 添加于 2019年4月27日星期六 上午12:25:45

，Linux磁盘调度器的修改版本包括两个附加的列表，维护按时限（deadline）排序的读写操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14376-14376的标注 | 添加于 2019年4月27日星期六 上午12:26:06

除了正常的磁盘文件，还有其他的块
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14376-14377的标注 | 添加于 2019年4月27日星期六 上午12:26:11

除了正常的磁盘文件，还有其他的块特殊文件，也被称为原始块文件（raw block file）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14378-14378的标注 | 添加于 2019年4月27日星期六 上午12:26:37

与字符设备的交互是很简单的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14379-14380的标注 | 添加于 2019年4月27日星期六 上午12:27:39

规则可以和一个终端设备联合在一起，通过tty_struct结构来表示，一般作为和终端交换的数据的解释器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14379-14380的标注 | 添加于 2019年4月27日星期六 上午12:27:48

一个行规则可以和一个终端设备联合在一起，通过tty_struct结构来表示，一般作为和终端交换的数据的解释器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14383-14384的标注 | 添加于 2019年4月27日星期六 上午12:28:58

输出采用与输入类似的工作方式，如把tab扩展为空格，把换行转变为回车+换行，在慢的机械式终端的回车后面加填充字符等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14383-14383的标注 | 添加于 2019年4月27日星期六 上午12:29:05

输出采用与输入类似的工作方式
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14384-14385的标注 | 添加于 2019年4月27日星期六 上午12:29:28

像输入一样，输出可以通过（加工模式）行规则，或者忽略（原始模式）行规则。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14388-14389的标注 | 添加于 2019年4月27日星期六 上午12:29:38

10.5.5　Linux中的模块
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14397-14397的标注 | 添加于 2019年4月27日星期六 上午12:30:27

Linux为了解决这个问题，引入了可加载模块（loadable module）的概念。可加
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14389-14389的标注 | 添加于 2019年4月27日星期六 上午12:30:32

几十年来，UNIX设备驱动程序是被静态链接到内核中的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14393-14393的标注 | 添加于 2019年4月27日星期六 上午12:30:36

随着个人电脑平台Linux系统的到来，所有这些都改变了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14397-14398的标注 | 添加于 2019年4月27日星期六 上午12:30:42

Linux为了解决这个问题，引入了可加载模块（loadable module）的概念。可加载模块是在系统运行时可以加载到内核的代码块。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14399-14400的标注 | 添加于 2019年4月27日星期六 上午12:30:53

当一个模块被加载到内核时，会发生下面几件事
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14400-14401的标注 | 添加于 2019年4月27日星期六 上午12:31:04

可用（例如，中断请求级别）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14399-14401的标注 | 添加于 2019年4月27日星期六 上午12:31:09

当一个模块被加载到内核时，会发生下面几件事。第一，在加载过程中，模块会被动态地重新部署。第二，系统会检查这个驱动程序需要的资源是否可用（例如，中断请求级别）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14401-14402的标注 | 添加于 2019年4月27日星期六 上午12:31:33

第三，设置所有需要的中断向量。第四，更新驱动转换表使其能够处理新的主设备类型。最后，运行驱动程序来完成可能需要的特定设备的初始化工作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14407-14407的标注 | 添加于 2019年4月27日星期六 上午9:53:28

在包括Linux在内的所有操作系统中，最可见的部分是文件系统。在本节的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14409-14410的标注 | 添加于 2019年4月27日星期六 上午9:53:45

Linux的设计非常有意思，因为它忠实地秉承了“小的就是美好的”（Small is Beautiful）的设计原则。虽然
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14411-14412的标注 | 添加于 2019年4月27日星期六 上午9:53:52

10.6.1　基本概念
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14414-14415的标注 | 添加于 2019年4月27日星期六 上午10:04:41

对MINIX 1文件系统进行第一次改进后的文件系统是ext文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14417-14418的标注 | 添加于 2019年4月27日星期六 上午10:04:54

，Linux使用虚拟文件系统（VFS）层支持很多类型的文件系统（VFS将在下文介绍）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14419-14419的标注 | 添加于 2019年4月27日星期六 上午10:05:37

Linux中的文件是一个长度为0或多个字节的序列，可以包含任意的信息
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14422-14423的标注 | 添加于 2019年4月27日星期六 上午10:07:38

按照惯例，许多程序能识别的文件包含一个基本文件名和一个扩展名，中间用一个点连接（点也被认为是占用了文件名的一个字符）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14426-14426的标注 | 添加于 2019年4月27日星期六 上午10:08:17

为了方便，文件可以被组织在一个目录
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14430-14431的标注 | 添加于 2019年4月27日星期六 上午10:08:30

在Linux中，不管是对shell还是一个打开文件的程序来说，都有两种方法表示一个文件的文件名。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14434-14435的标注 | 添加于 2019年4月27日星期六 上午10:09:04

用户和进程把他们当前工作的目录标识为工作目录，这样路径名就可以相对于工作目录命名，这种方式命名的目录名叫做相对路径。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14434-14435的标注 | 添加于 2019年4月27日星期六 上午10:09:10

Linux允许用户和进程把他们当前工作的目录标识为工作目录，这样路径名就可以相对于工作目录命名，这种方式命名的目录名叫做相对路径。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14437-14438的标注 | 添加于 2019年4月27日星期六 上午10:09:26

一个用户要使用属于另一个用户的文件或者使用文件树结构里的某个文件的情况是经常发生的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14440-14441的标注 | 添加于 2019年4月27日星期六 上午10:15:33

Linux提供了一种指向已存在文件的目录项，称作链接（link）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14448-14449的标注 | 添加于 2019年4月27日星期六 上午10:19:02

除了普通的文件之外，Linux还支持字符特殊文件和块特殊文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14453-14453的标注 | 添加于 2019年4月27日星期六 上午10:30:16

许多计算机有两块或更多的磁盘。银行使用的大型机，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14453-14453的标注 | 添加于 2019年4月27日星期六 上午10:30:20

许多计算机有两块或更多的磁盘
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14456-14456的标注 | 添加于 2019年4月27日星期六 上午10:30:32

一个解决方法是在每一个磁盘上安装自包含的文件系统，使它们之间互相独立。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14461-14461的标注 | 添加于 2019年4月27日星期六 上午10:31:07

Linux的解决方法是允许一个磁盘挂载到另一个磁盘的目录树
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14461-14461的标注 | 添加于 2019年4月27日星期六 上午10:31:10

Linux的解决方法是允许一个磁盘挂载到另一个磁盘的目录树上，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14459-14459的标注 | 添加于 2019年4月27日星期六 上午10:31:26

这种方法被许多操作系统使用，包括MS-DOS、Windows 98和VMS。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14464-14464的标注 | 添加于 2019年4月27日星期六 上午10:31:35

Linux文件系统的另一个有趣的性质是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14464-14464的标注 | 添加于 2019年4月27日星期六 上午10:31:41

Linux文件系统的另一个有趣的性质是加锁（locking）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14464-14466的标注 | 添加于 2019年4月27日星期六 上午10:31:52

Linux文件系统的另一个有趣的性质是加锁（locking）。在一些应用中会出现两个或更多的进程同时使用同一个文件的情况，可能导致竞争条件（race condition）。有一种解决方法是使用临界区，但是如果这些进程属于相互不认识的独立的用户，这种解决方法是不方便的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14464-14465的标注 | 添加于 2019年4月27日星期六 上午10:32:00

Linux文件系统的另一个有趣的性质是加锁（locking）。在一些应用中会出现两个或更多的进程同时使用同一个文件的情况，可能导致竞争条件（race condition）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14467-14469的标注 | 添加于 2019年4月27日星期六 下午3:44:13

可以通过设置信号量来解决互斥的问题，在每个目录或文件上设置一个信号量，当程序需要访问相应的数据时，在相应的信号量上做一个down操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14470-14470的标注 | 添加于 2019年4月27日星期六 下午3:44:24

由于这种原因，POSIX提供了一种灵活的、细粒度的机制，允许一个进程使用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14470-14471的标注 | 添加于 2019年4月27日星期六 下午3:44:29

由于这种原因，POSIX提供了一种灵活的、细粒度的机制，允许一个进程使用一个不可分割的操作对小到一个字节、大到整个文件加锁。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14473-14473的标注 | 添加于 2019年4月27日星期六 下午3:46:46

系统提供了两种锁，共享锁和互斥锁。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14475-14476的标注 | 添加于 2019年4月27日星期六 下午3:47:04

在加锁时，进程必须指出当加锁不成功时是否阻塞。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14478-14478的标注 | 添加于 2019年4月27日星期六 下午3:48:50

加锁区域可以是重叠的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14487-14487的标注 | 添加于 2019年4月27日星期六 下午3:50:07

10.6.2　Linux的文件系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14488-14489的标注 | 添加于 2019年4月27日星期六 下午3:50:42

要创建一个文件时，可以使用creat系统调用。（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14492-14493的标注 | 添加于 2019年4月27日星期六 下午3:52:18

creat系统调用不仅创建了一个新文件，还以写的方式打开了这个文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14495-14495的标注 | 添加于 2019年4月27日星期六 下午3:52:40

通过设置合适的参数，open系统调用也能创建文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14495-14495的标注 | 添加于 2019年4月27日星期六 下午3:52:45

通过设置合适的参数，open系统调用也能创建文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14496-14497的标注 | 添加于 2019年4月27日星期六 下午3:52:51

为了读或写一个已经存在的文件，必须使用open系统调用打开这个文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14496-14497的标注 | 添加于 2019年4月27日星期六 下午3:53:00

为了读或写一个已经存在的文件，必须使用open系统调用打开这个文件。它的参数是要打开文件的文件名以及打开方式：只读、只写或两者。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14502-14503的标注 | 添加于 2019年4月27日星期六 下午3:53:34

当一个程序以标准方式运行时，文件描述符0、1、2已经分别用于标准输入、标准输出和标准错误。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14505-14505的标注 | 添加于 2019年4月27日星期六 下午3:53:55

最常使用的文件系统调用是read和write。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14505-14506的标注 | 添加于 2019年4月27日星期六 下午3:54:04

最常使用的文件系统调用是read和write。它们每个都有三个参数：文件描述符（标明要读写的文件）、缓冲区地址（给出数据存放的位置或者读取数据的位置），长度（给出要传输的数据的字节数）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14510-14511的标注 | 添加于 2019年4月27日星期六 下午3:54:43

lseek系统调用可以改变位置指针的值，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14512-14513的标注 | 添加于 2019年4月27日星期六 下午3:54:47

lseek有三个参数：第一个是文件描述符，第二个是文件读写位置，第三个表明
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14512-14514的标注 | 添加于 2019年4月27日星期六 下午3:54:53

lseek有三个参数：第一个是文件描述符，第二个是文件读写位置，第三个表明读写位置是相对于文件开头、当前位置还是文件尾。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14516-14518的标注 | 添加于 2019年4月27日星期六 下午3:55:31

程序可以使用stat系统调用来查看这些信息，stat的第一个参数是文件名，第二个参数是指向获取的文件信息将要存放的结构的指针，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14520-14521的标注 | 添加于 2019年4月27日星期六 下午3:55:48

pipe系统调用用来创建一个shell管线。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14520-14521的标注 | 添加于 2019年4月27日星期六 下午3:55:56

pipe系统调用用来创建一个shell管线。它创建了一种伪文件（pseudo-file），用于缓冲管线通信的数据
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14528-14529的标注 | 添加于 2019年4月27日星期六 下午4:01:14

图10-27列举的最后一个系统调用是fcntl。fcntl用于加锁和解锁文件，应用共享锁和互斥锁，或者是执行一些文件相关的其他操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14529-14529的标注 | 添加于 2019年4月27日星期六 下午4:09:21

fcntl用于加锁和解锁文件，应用共享锁和互斥锁，或者是执行一些文件相关
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14529-14529的标注 | 添加于 2019年4月27日星期六 下午4:09:25

fcntl用于加锁和解锁文件，应用共享锁和互斥锁，或者是执行一些文件相关的其他操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14530-14530的标注 | 添加于 2019年4月27日星期六 下午4:09:36

文件有关的系统调用，图
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14530-14531的标注 | 添加于 2019年4月27日星期六 下午4:09:40

图10-29列举了一些这样
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14530-14531的标注 | 添加于 2019年4月27日星期六 下午4:09:49

图10-29列举了一些这样的系统调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14530-14531的标注 | 添加于 2019年4月27日星期六 下午4:09:52

现在我们开始关注与目录及文件系统整体更加相关，而不是仅和单个文件有关的系统调用，图10-29列举了一些这样的系统调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14534-14534的标注 | 添加于 2019年4月27日星期六 下午4:10:09

图10-24所示，创建一个指向已有文件的链接时创建了一个目录项（directory entry）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14534-14534的标注 | 添加于 2019年4月27日星期六 下午4:10:14

如图10-24所示，创建一个指向已有文件的链接时创建了一个目录项（directory entry）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14537-14537的标注 | 添加于 2019年4月27日星期六 下午4:12:55

使用chdir系统调用可以改变工作目录，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14540-14540的标注 | 添加于 2019年4月27日星期六 下午4:13:09

10.6.3　Linux文件系统的实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14541-14543的标注 | 添加于 2019年4月27日星期六 下午4:14:43

VFS对高层进程和应用程序隐藏了Linux支持的所有文件系统之间的区别，以及文件系统是存储在本地设备，还是需要通过网络访问的远程设备。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14541-14543的标注 | 添加于 2019年4月27日星期六 下午4:14:54

VFS对高层进程和应用程序隐藏了Linux支持的所有文件系统之间的区别，以及文件系统是存储在本地设备，还是需要通过网络访问的远程设备。设备和其他特殊文件也可以通过VFS访问。接
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14545-14546的标注 | 添加于 2019年4月27日星期六 下午4:15:08

1.Linux虚拟文件系统 为了使应用程序能够与在本地或远程设备上的不同文件系统进行交互，Linux
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14545-14547的标注 | 添加于 2019年4月27日星期六 下午4:15:14

1.Linux虚拟文件系统 为了使应用程序能够与在本地或远程设备上的不同文件系统进行交互，Linux采用了一个被其他UNIX系统使用的方法：虚拟文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14545-14547的标注 | 添加于 2019年4月27日星期六 下午4:15:30

1.Linux虚拟文件系统 为了使应用程序能够与在本地或远程设备上的不同文件系统进行交互，Linux采用了一个被其他UNIX系统使用的方法：虚拟文件系统。VFS定义了一个基本的文件系统抽象以及这些抽象上允许的操作集合。调
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14549-14549的标注 | 添加于 2019年4月27日星期六 下午4:15:42

图10-30总结了VFS支持的四个主要的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14549-14549的标注 | 添加于 2019年4月27日星期六 下午4:15:48

图10-30总结了VFS支持的四个主要的文件系统结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14554-14555的标注 | 添加于 2019年4月27日星期六 下午4:16:31

为了便于目录操作及路径（比如/usr/ast/bin）的遍历，VFS支持dentry数据结构，它表示一个目录项。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14557-14558的标注 | 添加于 2019年4月27日星期六 下午4:16:48

file数据结构是一个打开文件在内存中的表示，并且在调用open系统调用时被创建。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14561-14561的标注 | 添加于 2019年4月27日星期六 下午4:17:12

2.Linux ext2文件系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14558-14560的标注 | 添加于 2019年4月27日星期六 下午4:17:23

在VFS下层实现的实际文件系统并不需要在内部使用与VFS完全相同的抽象和操作，但是必须实现跟VFS对象所指定的操作在语义上等价的文件系统操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14564-14564的标注 | 添加于 2019年4月27日星期六 下午4:17:47

ext2的磁盘分区包含了一个如图10-31所示的文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14564-14565的标注 | 添加于 2019年4月27日星期六 下午4:17:59

ext2的磁盘分区包含了一个如图10-31所示的文件系统。块0不被Linux使用，而通常用来存放启动计算机的代码。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14566-14567的标注 | 添加于 2019年4月27日星期六 下午4:18:09

第一个块是超级块，它包含了该文件系统的信息，包括i节点的个数、磁盘块数以及空闲块链表的起始位置（通常有
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14566-14566的标注 | 添加于 2019年4月27日星期六 下午4:18:18

第一个块是超级块，它
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14566-14566的标注 | 添加于 2019年4月27日星期六 下午4:18:21

第一个块是超级块，它包含了该文件系统的信息，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14567-14567的标注 | 添加于 2019年4月27日星期六 下午4:18:28

）。下一个是组描述
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14567-14567的标注 | 添加于 2019年4月27日星期六 下午4:19:17

）。下一个是组描述符，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14570-14570的标注 | 添加于 2019年4月27日星期六 下午4:19:46

两个位图分别记录空闲块和空闲i节点，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14572-14573的标注 | 添加于 2019年4月27日星期六 下午4:19:54

在超级块之后是i节点存储区域，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14573-14573的标注 | 添加于 2019年4月27日星期六 下午4:20:01

最大值
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14572-14573的标注 | 添加于 2019年4月27日星期六 下午4:20:04

在超级块之后是i节点存储区域，它们被编号为1到某个最大值
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14572-14573的标注 | 添加于 2019年4月27日星期六 下午4:20:06

在超级块之后是i节点存储区域，它们被编号为1到某个最大值
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14575-14576的标注 | 添加于 2019年4月27日星期六 下午4:20:29

在i节点区后面是数据块区，所有文件和目录都存放在这个区域。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14577-14577的标注 | 添加于 2019年4月27日星期六 下午4:21:08

目录对应的i节点散布在磁盘块组中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14582-14582的标注 | 添加于 2019年4月27日星期六 下午4:22:11

要访问文件，必须首先使用一个Linux系统调用，例如open，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14585-14585的标注 | 添加于 2019年4月27日星期六 下午4:22:19

目录文件允许不超过255个字符的文件名，如图10-32所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14589-14590的标注 | 添加于 2019年4月27日星期六 下午4:23:31

图10-32中的每个目录项由四个固定长度的域和一个可变长度的域组成。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14596-14597的标注 | 添加于 2019年4月27日星期六 下午4:24:35

由于目录是按线性顺序查找的，要找到一个位于大目录末尾的目录项会耗费相当长的时间。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14606-14607的标注 | 添加于 2019年4月27日星期六 下午4:25:46

如果文件存在，那么系统提取其i节点号并以它为索引在i节点表（在磁盘上）中定位相应的i节点，并装入内存。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14614-14614的标注 | 添加于 2019年4月27日星期六 下午4:26:52

当内核得到控制权时，它需要从这三个参数以及内部表中与用户有关的信息开始。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14627-14628的标注 | 添加于 2019年4月27日星期六 下午4:30:50

实现这一点的方法如图10-34所示。实现的技巧是在文件描述符表和i节点表之间引入一个新的表，叫做打开文件描述表，并将文件读写位置（以及读/写位）放到里面
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14647-14647的标注 | 添加于 2019年4月27日星期六 下午4:33:51

为了增强文件系统的健壮性，Linux依靠日志文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14648-14649的标注 | 添加于 2019年4月27日星期六 下午4:34:02

维护一个日志，该日志顺序记录所有文件系统操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14648-14649的标注 | 添加于 2019年4月27日星期六 下午4:34:08

这种文件系统背后的基本思想是维护一个日志，该日志顺序记录所有文件系统操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14652-14653的标注 | 添加于 2019年4月27日星期六 下午4:36:06

Ext3设计成与Ext2高度兼容，事实上，两个系统中所有的核心数据结构和磁盘布局都是相同
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14654-14655的标注 | 添加于 2019年4月27日星期六 下午4:36:13

日志是一个以环形缓冲器形式组织的文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14656-14657的标注 | 添加于 2019年4月27日星期六 下午4:36:28

使用一个独立的日志块设备（Journaling Block Device，JBD）来执行日志的读/写操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14657-14657的标注 | 添加于 2019年4月27日星期六 下午4:36:35

JBD支持三个主要数据结构：日志记录、原子操作处理和
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14665-14666的标注 | 添加于 2019年4月27日星期六 下午5:11:22

4./proc文件系统 另一个Linux文件系统是/proc（process）文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14676-14676的标注 | 添加于 2019年4月27日星期六 下午5:13:33

10.6.4　NFS：网络文件系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14681-14681的标注 | 添加于 2019年4月27日星期六 下午5:14:38

1.NFS体系结构
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14682-14682的标注 | 添加于 2019年4月27日星期六 下午5:14:49

NFS背后的基本思想是允许任意选定的一些客户端和服务器共享一个公共文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14685-14685的标注 | 添加于 2019年4月27日星期六 下午5:15:38

每一个NFS服务器都导出一个或多个目录供远程客户端访问。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14696-14696的标注 | 添加于 2019年4月27日星期六 下午5:16:52

2.NFS协议
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14696-14698的标注 | 添加于 2019年4月27日星期六 下午5:16:58

由于NFS的目标之一是支持异构系统，客户端和服务器可能在不同硬件上运行不同操作系统，因此对客户端和服务器之间的接口给予明确定义是很关键的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14699-14699的标注 | 添加于 2019年4月27日星期六 下午5:17:05

NFS通过定义两个客户端-服务器协议来实现这一目标。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14700-14700的标注 | 添加于 2019年4月27日星期六 下午5:25:17

第一个NFS协议处理挂载。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14704-14704的标注 | 添加于 2019年4月27日星期六 下午5:25:40

Linux启动时会在进入多用户之前运行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14704-14705的标注 | 添加于 2019年4月27日星期六 下午5:25:44

Linux启动时会在进入多用户之前运行shell脚本/etc/rc。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14704-14706的标注 | 添加于 2019年4月27日星期六 下午5:25:57

Linux启动时会在进入多用户之前运行shell脚本/etc/rc。可以将挂载远程文件系统的命令写入该脚本中，这样就可以在允许用户登录之前自动挂载必要的远程文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14704-14706的标注 | 添加于 2019年4月27日星期六 下午5:26:57

Linux启动时会在进入多用户之前运行shell脚本/etc/rc。可以将挂载远程文件系统的命令写入该脚本中，这样就可以在允许用户登录之前自动挂载必要的远程文件系统。此外，大部分Linux版本也支持自动挂载。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14715-14715的标注 | 添加于 2019年4月27日星期六 下午5:27:16

第二个NFS协议是为访问目录和文件设计的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14732-14732的标注 | 添加于 2019年4月27日星期六 下午5:29:19

3.NFS实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14732-14733的标注 | 添加于 2019年4月27日星期六 下午5:29:35

尽管客户端和服务器代码实现独立于NFS协议，但大多数Linux系统使用一个类似图10-36所示的三层实现。顶层是系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14735-14736的标注 | 添加于 2019年4月27日星期六 下午5:30:32

VFS层的任务是维护一个表，每个打开的文件在该表中有一个表项。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14735-14736的标注 | 添加于 2019年4月27日星期六 下午5:33:01

VFS层的任务是维护一个表，每个打开的文件在该表中有一个表项。VFS层为每个打开文件保存一个虚拟i节点（或称为
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14737-14737的标注 | 添加于 2019年4月27日星期六 下午5:33:06

本地文件还是远程文件。对于
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14746-14747的标注 | 添加于 2019年4月27日星期六 下午5:33:27

我们可以从v节点中判断一个文件或目录是本地的还是远程的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14748-14749的标注 | 添加于 2019年4月27日星期六 下午5:33:32

当客户端打开一个远程文件时，在解析路径名的某个时刻，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14748-14749的标注 | 添加于 2019年4月27日星期六 下午5:33:37

当客户端打开一个远程文件时，在解析路径名的某个时刻，内核会碰到挂载了远程文件系统的目录。内
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14753-14753的标注 | 添加于 2019年4月27日星期六 下午5:35:08

返回给调用者的是远程文件的一个文件描述符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14760-14761的标注 | 添加于 2019年4月27日星期六 下午5:36:25

当请求消息到达服务器，它被送到服务器的VFS层，在那里将判断所请求的文件在哪个本地文件系统中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14762-14763的标注 | 添加于 2019年4月27日星期六 下午5:36:52

客户端。客户端的VFS层接收到它所请求的这个8KB块之后，又自动发出对下一个块的请求，这样当我们需要下一个块时就可以很快地得到。这个特性称为预读（read
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14762-14763的标注 | 添加于 2019年4月27日星期六 下午5:37:07

客户端。客户端的VFS层接收到它所请求的这个8KB块之后，又自动发出对下一个块的请求，这样当我们需要下一个块时就可以很快地得到。这个特性称为预读（read
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14762-14763的标注 | 添加于 2019年4月27日星期六 下午5:37:14

客户端的VFS层接收到它所请求的这个8KB块之后，又自动发出对下一个块的请求，这样当我们需要下一个块时就可以很快地得到。这个特性称为预读（read
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14764-14764的标注 | 添加于 2019年4月27日星期六 下午5:37:24

客户端向服务器写文件的过程是类似的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14766-14766的标注 | 添加于 2019年4月27日星期六 下午5:38:20

另一个用来改善性能的技术是缓存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14766-14767的标注 | 添加于 2019年4月27日星期六 下午5:38:32

另一个用来改善性能的技术是缓存，与在通常的UNIX系统中的用法一样。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14771-14771的标注 | 添加于 2019年4月27日星期六 下午5:39:21

缓存是不一致
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14771-14771的标注 | 添加于 2019年4月27日星期六 下午5:39:28

缓存是不一致的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14771-14772的标注 | 添加于 2019年4月27日星期六 下午5:39:35

考虑到这个问题可能带来的严重性后果，NFS实现做了一些事情来缓解这一问题。第一，为每个缓存了的块关联一个定时器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14773-14774的标注 | 添加于 2019年4月27日星期六 下午5:40:00

另外，当打开一个有缓存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14776-14776的标注 | 添加于 2019年4月27日星期六 下午5:40:04

4.NFS第4版
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14777-14778的标注 | 添加于 2019年4月27日星期六 下午5:40:23

第4版NFS是有状态的文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14777-14779的标注 | 添加于 2019年4月27日星期六 下午5:41:14

第4版NFS是有状态的文件系统。这样就允许对远程文件调用open操作，因为远程NFS服务器将维护包括文件指针在内的所有文件系统相关的结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14785-14785的标注 | 添加于 2019年4月27日星期六 下午5:41:52

10.7.1　基本概念
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14786-14787的标注 | 添加于 2019年4月27日星期六 下午5:42:32

一个Linux系统的用户群体由一定数量的注册用户组成，其中每个用户拥有一个惟一的UID（用户ID）。UID是介于0到65 535之间的一个整数。文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14788-14789的标注 | 添加于 2019年4月27日星期六 下午5:42:43

用户可以被分组，其中每组同样由一个16位的整数标记，叫做GID（组ID）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14791-14791的标注 | 添加于 2019年4月27日星期六 下午5:42:59

每个进程记录它的所有者的UID和GID。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14804-14804的标注 | 添加于 2019年4月27日星期六 下午5:45:32

UID为0的用户是一个特殊用户，称为超级用户（或者根用户
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14804-14804的标注 | 添加于 2019年4月27日星期六 下午5:45:36

UID为0的用户是一个特殊用户，称为超级用户（或者根用户）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14804-14804的标注 | 添加于 2019年4月27日星期六 下午5:45:38

UID为0的用户是一个特殊用户，称为超级用户（或者根用户）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14808-14808的标注 | 添加于 2019年4月27日星期六 下午5:46:49

目录也是一种文件，并且具有普通文件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14808-14809的标注 | 添加于 2019年4月27日星期六 下午5:46:53

的是，目录的x比特位表示查找权限而不是执行权限
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14808-14808的标注 | 添加于 2019年4月27日星期六 下午5:46:56

目录也是一种文件，并且具有普通文件一样的保护模式。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14810-14811的标注 | 添加于 2019年4月27日星期六 下午5:47:01

与I/O相关的特殊文件拥有与普通文件一样的保护位。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14813-14814的标注 | 添加于 2019年4月27日星期六 下午5:47:14

当然，让/dev/lp被守护进程以保护模式rw-------拥有，意味着其他任何人都不可以使用打印机，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14816-14816的标注 | 添加于 2019年4月27日星期六 下午5:47:26

这个问题通过增加一个保护位SETUID到之前的9个比特位来解决。当一个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14820-14820的标注 | 添加于 2019年4月27日星期六 下午5:48:15

许多敏感的Linux程序被根用户所有，但是打开它们的SETUID位
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14823-14823的标注 | 添加于 2019年4月27日星期六 下午5:48:46

除了SETUID位，还有一个SETGID位
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14823-14823的标注 | 添加于 2019年4月27日星期六 下午5:48:51

除了SETUID位，还有一个SETGID位，工作原理同SETUID类似。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14827-14827的标注 | 添加于 2019年4月27日星期六 下午5:48:56

10.7.2　Linux中安全相关的系统调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14828-14829的标注 | 添加于 2019年4月27日星期六 下午5:49:05

用到的安全相关的系统调用是chmod。它用来改变保护模式。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14833-14834的标注 | 添加于 2019年4月27日星期六 下午5:49:30

access系统调用检验用实际的UID和GID
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14833-14834的标注 | 添加于 2019年4月27日星期六 下午5:49:37

access系统调用检验用实际的UID和GID对某文件是否拥有特定的权限。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14841-14841的标注 | 添加于 2019年4月27日星期六 下午5:50:03

10.7.3　Linux中的安全实现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14841-14843的标注 | 添加于 2019年4月27日星期六 下午9:45:23

用户登录的时候，登录程序login（为根用户所有且SETUID打开）要求输入登录名和密码。它首先计算密码的散列值，然后在/etc/passwd文件中查找，看是否有相匹配的项（网络系统工作得稍有不同）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14842-14843的标注 | 添加于 2019年4月27日星期六 下午9:45:33

首先计算密码的散列值，然后在/etc/passwd文件中查找，看是否有相匹配的项（网络系统工作得稍有不同
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14844-14844的标注 | 添加于 2019年4月27日星期六 下午9:45:42

。如果密码正确，登录程序在/etc/passwd中读取该用户选择的shell程序的名称，例如
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14847-14847的标注 | 添加于 2019年4月27日星期六 下午9:55:55

最后，执行用户选择的shell程序，因此终止自己。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14850-14851的标注 | 添加于 2019年4月27日星期六 下午10:52:28

当任何进程想要打开一个文件，系统首先将文件的i节点所记录的保护位与用户的有效UID和有效GID对比，来检查访问是否被允许。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #14848-14849的标注 | 添加于 2019年4月27日星期六 下午10:52:34