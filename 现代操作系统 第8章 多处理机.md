# 现代操作系统（原书第3版） (计算机科学丛书)

Andrews Tanenbaum

Citation (APA): Tanenbaum, A. (2019). *现代操作系统（原书第3版） (计算机科学丛书)* [Kindle Android version]. Retrieved from Amazon.com

------

# 第8章 多处理机系统
- 从计算机诞生之日起，人们对更强计算能力的无休止的追求就一直驱使着计算机工业的发展。
- 过去的解决方案是使时钟走得更快。
- 按照爱因斯坦的相对论，电子信号的速度不可能超过光速，这个速度在真空中大约是30cm/ns，而在铜线或光纤中约是20cm/ns。
- 过去的解决方案是使时钟走得更快。但是，现在开始遇到对时钟速度的限制了。按照爱因斯坦的相对论，电子信号的速度不可能超过光速，
- 让计算机变得如此之小是可能的，但是这会遇到另一个基本问题：散热。计算机运行得越快，产生的热量就越多，而计算机越小就越难散热。
- 获得更高速度的一种处理方式是大规模使用并行计算机。
- 在高强度的数据处理中经常采用高度并行计算机
- 多处理机系统被广泛地用于解决这些问题以及在其他科学、工程领域中的类似问题。
- 在高强度的数据处理中经常采用高度并行计算机。如天气预测、围绕机翼的气流建模、世界经济模拟或理解大脑中药物-受体的相互作用等问题都是计算密集型的
- 另一个相关的进展是因特网不可思议地快速增长
- 人们在互连技术方面做了大量工作，而且不同的互连技术已经导致了不同性质的系统以及不同的软件组织。 
- 在电子（或光学）部件之间的所有通信，归根结底是在它们之间发送消息——具有良好定义的位串（bit string）。
- 一个极端的例子是共享存储器多处理机，系统中有从2个到 1000 个的 CPU 通过一个共享存储器通信。如图 8-1a 所示
- 其次是图 8-1b 中的系统，许多 CPU-存储器通过某种高速互连网络连接在一起。这种系统称为消息传递型多计算机。
- 多计算机（消息传递系统）比（共享存储器）多处理机系统容易构建，但是编程比较困难。
- 第三种模型参见图 8-1c，所有的计算机系统都通过一个广域网连接起来，如因特网，构成了一个分布式系统（ distributed system）。
- 本章有四个主要部分，分别对应于图 8-1中的三个模型再加上虚拟化技术（一种通过软件创造出更多虚拟 CPU 的方法）。

![8-1](F:\现代操作系统\resource\8-1.jpg)

##  8.1 多处理机

- 共享存储器多处理机（或以后简称为多处理机，multiprocessor）
  - 其两个或更多的 CPU 全部共享访问一个公用的 RAM
  - 这个系统惟一特别的性质是，CPU可对存储器字写入某个值，然后读回该字，并得到一个不同的值（因为另一个 CPU 改写了它）


- 多处理机操作系统只是通常的操作系统
  - 它们处理系统调用，进行存储器管理，提供文件系统并管理 I/ O 设备。

### 8.1.1 多处理机硬件

- 所有的多处理机都具有每个 CPU 可访问全部存储器的性质
  - 有些多处理机仍有一些其他的特性
    - 读出每个存储器字的速度是一样快的
      - UMA（ Uniform Memory Access，统一存储器访问）多处理机
  - NUMA（ Nonuniform Memory Access，非一致存储器访问）多处理机就没有这种特性。 

#### 1. 基于总线的 UMA 多处理机体系结构

![8-2](F:\现代操作系统\resource\8-2.jpg)

- 最简单的多处理机是基于单总线的，参见图 8-2a。
  - 当某个 CPU 需要读写存储器时，如果总线忙， CPU 只是等待，直到总线空闲。
  - 这种系统完全受到总线带宽的限制，多数 CPU 在大部分时间里是空闲的。
    - 这一问题的解决方案是为每个 CPU添加一个高速缓存（cache），如图 8-2b 所示。
    - 每一个高速缓存块或者被标记为只读（在这种情况下，它可以同时存在于多个高速缓存中），或者标记为读写（在这种情况下，它不能在其他高速缓存中存在）。
- 图 8-2c 中的设计，在这种设计中每个 CPU 不止有一个高速缓存，还有一个本地的私有存储器，它通过一条专门的（私有）总线访问。

#### 2. 使用交叉开关的 UMA 多处理机

![8-3](F:\现代操作系统\resource\8-3.jpg)

- 连接 n 个 CPU到 k 个存储器的最简单的电路是交叉开关，参见图 8 -3。
  - 水平线（进线）和垂直线（出线）的每个相交位置上是一个交叉点（crosspoint）
    - 交叉点是一个以电子方式开关的小开关，具体取决于水平线和垂直线是否需要连接


- 交叉开关最好的一个特性是它是一个非阻塞网络，即不会因有些交叉点或连线已经被占据了而拒绝连接（假设存储器模块自身是可用的）
  - 同一个模块的时候，对内存的争夺还是可能的。
- 交叉开关最差的一个特性是，交叉点的数量以$n^2$方式增长。若有 1000 个CPU和 1000 个存储器我们就需要一百万个交叉点。

####3. 使用多级交换的 UMA 多处理机

![8-4](F:\现代操作系统\resource\8-4.jpg)

- 有一种完全不同的、基于简单2×2开关的多处理机设计，如图8-4a

  - 消息可由四个部分组成，参见图8-4b
    - Module（模块）域指明使用哪个存储器
    - Address（地址）域指定在模块中的地址
    - Opcode（操作码）给定了操作，如READ或WRITE
    - 最后，在可选的Value（值）域中可包含一个操作数

- 这个2×2开关可又多种使用方式，用以构建大型的多级交换网络

  - 有一种是简单经济的Omega网络，见图8-5

  ![8-5](F:\现代操作系统\resource\8-5.jpg)

  - 对于n个CPU和n个存储器，我们将需要$log_2n$ 级，每级n/2个开关，总数为$(n/2)log_2n$ 个开关，比$n^2$ 个交叉点要好得多，特别是当n值很大时
  - Omega网络的界限模式常被称作全混洗（perfect shuffle）

- Omega网络是如何工作的

  - 假设CPU011打算从存储器模块110读取一个字
    - CPU发送READ消息给开关1D，它在Module域包含110
      - 1D开关取110的首位（最左位）并用它进行路由处理
      - 所有的第二级开关，包括2D，取用第二个比特位进行路由
        - 该消息的路径在图8-5中由字母a标出
    - 在消息通过交换网络之后，模块号的左端的位就不再需要了
      - 它们有很好的用途，用来记录入线编号
  - 在上述一切进行的同时，CPU001需要往存储器001里写入一个字
    - 由于这两个请求使用任何相同的开关、连线或存储器模块，所以它们可以并行工作

- 现在考虑如果CPU 000同时也请求访问存储器模块000会发生什么情况

  - 这个请求会与CPU 001的请求在开关3A处发生冲突
  - Omega网络是一种阻塞网络，并不是每组请求都可被同时处理

- 显然，很有必要在多个模块间均匀地分散对存储器的引用

  - 一种常用的技术是把地位作为模块号

- ​连续字被放在不同模块里的存储器系统被称作交叉(interleaved)存储器系统
#### 4.NUMA多处理机
单总线UMA多处理机通常不超过几十个CPU，而交叉开关或交换网络多处理机需要许多（昂贵）的硬件，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9871-9872的标注 | 添加于 2019年4月10日星期三 下午8:15:12

NUMA多处理机的出现
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9872-9872的标注 | 添加于 2019年4月10日星期三 下午8:15:19

这种机器为所有的CPU提供了一个统一的地址空间，但与UMA机器不同的是，访问本地存储器模块快于访问远程存储器模块。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9874-9874的标注 | 添加于 2019年4月10日星期三 下午8:15:50

所有NUMA机器都具有以下三种关键特性，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9875-9876的标注 | 添加于 2019年4月10日星期三 下午8:16:12

1)具有对所有CPU都可见的单个地址空间。 
2)通过LOAD和STORE指令访问远程存储器。 
3)访问远程存储器慢于访问本地存储器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9877-9877的标注 | 添加于 2019年4月10日星期三 下午8:17:50

在对远程存储器的访问时间不被隐藏时（因为没有高速缓存），系统被称为NC-NUMA（No Cache NUMA，无高速缓存NUMA）。在有一致性高速缓存时，系统被称为CC-NUMA（Cache-Coherent NUMA，高速缓存一致NUMA）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9878-9879的标注 | 添加于 2019年4月10日星期三 下午8:18:22

目前构造大型CC-NUMA多处理机最常见的方法是基于目录的多处理机（directory-based multiprocessor）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9879-9880的标注 | 添加于 2019年4月10日星期三 下午8:18:37

思想是，维护一个数据库来记录高速缓存行的位置及其状态。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9883-9884的标注 | 添加于 2019年4月10日星期三 下午8:20:44

一个简单的（假想）例子，一个256个节点的系统，每个节点包括一个CPU和通过局部总线连接到CPU上的16MB的RAM。整个存储器有232 字节，被划分成226 个64字节大小的高速缓存行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9885-9886的标注 | 添加于 2019年4月10日星期三 下午8:21:23

首先，发出该指令的CPU把它交给自己的MMU，被翻译成物理地址，比如
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9893-9894的标注 | 添加于 2019年4月10日星期三 下午8:28:57

当请求通过互连网络到达节点36时，它被路由至目录硬件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9896-9896的标注 | 添加于 2019年4月10日星期三 下午8:40:15

现在来考虑第二个请求，这次访问节点36的第2行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9897-9898的标注 | 添加于 2019年4月10日星期三 下午8:40:27

硬件可以更新目录项2，指出该行现在在节点20上，然后送一条消息给节点82，指示把该行传给节点20并且使其自身的高速缓存无效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9899-9901的标注 | 添加于 2019年4月10日星期三 下午8:43:27

每个节点有16 MB的RAM，并且有218 个9位的目录项记录该RAM。这样目录上的开支大约是9×218 位除以16 MB，即约1.76%，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9902-9903的标注 | 添加于 2019年4月10日星期三 下午8:43:36

该设计有一个明显的限制，即一行只能被一个节点高速缓存。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9905-9905的标注 | 添加于 2019年4月10日星期三 下午8:44:28

#### 5.多核芯片


随着芯片制造技术的发展，晶体管的体积越来越小，从而有可能将越来越多的晶体管放入一个芯片中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9908-9908的标注 | 添加于 2019年4月10日星期三 下午8:48:48

随之一个显而易见的问题是：“你怎么利用这些晶体管？”
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9909-9909的标注 | 添加于 2019年4月10日星期三 下午8:49:00

一个选择是给芯片添加数兆字节的高速缓存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9911-9912的标注 | 添加于 2019年4月10日星期三 下午8:49:13

另一个选择是将两个或者多个完整的CPU，通常称为核（core），放到同一个芯片上（技术上来说是同一个小硅片）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9913-9914的标注 | 添加于 2019年4月10日星期三 下午8:49:35

虽然CPU可能共享高速缓存或者不共享（如图1-8所示），但是它们都共享内存
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9915-9915的标注 | 添加于 2019年4月10日星期三 下午8:50:10

这些内存是一致的。特殊的硬件电路可以确保在一个字同时出现在两个或者多个的高速缓存中的情况下，当其中某个CPU修改了该字，所有其他高速缓存中的该字都会被自动地并且原子性地删除来确保一致性。这个过程称为窥探（snooping）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9915-9917的标注 | 添加于 2019年4月10日星期三 下午8:51:02

多核芯片时常被称为片级多处理机（Chip-level MultiProcessors，CMP）。从软件的角度来看，CMP与基于总线的多处理机和使用交换网络的多处理机并没有太大的差别。不过，它们还是存在着若干的差别。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9923-9924的标注 | 添加于 2019年4月10日星期三 下午8:53:25

CMP与其他更大的多处理机之间的另一个差异是容错。因为CPU之间的连接非常紧密，一个共享模块的失效可能导致许多CPU同时出错。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9925-9925的标注 | 添加于 2019年4月10日星期三 下午8:53:42


还有一类多核芯片被称为片上系统（system on a chip）。这些芯片含有一个或者多个主CPU，但是同时还包含若干个专用核，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9927-9927的标注 | 添加于 2019年4月10日星期三 下午8:55:03

正如过去已经发生的，硬件的发展常常领先于软件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9936-9936的标注 | 添加于 2019年4月10日星期三 下午8:55:40

### 8.1.2　多处理机操作系统类型


需要强调的是所有这些方法除了适用于多核系统之外，同样适用于包含多个分离CPU的系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9939-9939的标注 | 添加于 2019年4月10日星期三 下午8:56:28

1.每个CPU有自己的操作系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9939-9941的标注 | 添加于 2019年4月10日星期三 下午8:56:43

最简单的方法是，静态地把存储器划分成和CPU一样多的各个部分，为每个CPU提供其私有存储器以及操作系统的各自私有副本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9941-9942的标注 | 添加于 2019年4月10日星期三 下午8:57:01

允许所有的CPU共享操作系统的代码，而且只需要提供数据的私有副本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9941-9942的标注 | 添加于 2019年4月10日星期三 下午8:57:05

这样做一个明显的优点是，允许所有的CPU共享操作系统的代码，而且只需要提供数据的私有副本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9944-9945的标注 | 添加于 2019年4月10日星期三 下午8:57:50

这一机制比有n个分离的计算机要好，因为它允许所有的机器共享一套磁盘及其他的I/O设备，它还允许灵活地共享存储器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9948-9949的标注 | 添加于 2019年4月10日星期三 下午8:58:32

该设计看来不明显的四个方面。首先，在一个进程进行系统调用时，该系统调用是在本机的CPU上被捕获并处理的，并使用操作系统表中的数据结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9950-9950的标注 | 添加于 2019年4月10日星期三 下午8:59:06

其次，因为每个操作系统都有自己的表，那么它也有自己的进程集合，通过自身调度这些进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9951-9952的标注 | 添加于 2019年4月10日星期三 下午8:59:30

因此，在CPU 2有负载运行而CPU 1空载的情形是会发生的。 
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9952-9953的标注 | 添加于 2019年4月10日星期三 下午8:59:41

第三，没有页面共享。会出现如下的情形：在CPU2不断地进行页面调度时CPU 1却有多余的页面。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9953-9957的标注 | 添加于 2019年4月10日星期三 下午9:00:04

第四，也是最坏的情形，如果操作系统维护近期使用过的磁盘块的缓冲区高速缓存，每个操作系统都独自进行这种维护工作，因此，可能出现某一修改过的磁盘块同时存在于多个缓冲区高速缓存的情况，这将会导致不一致性的结果。避免这一问题的惟一途径是，取消缓冲区高速缓存。这样做并不难，但是会显著降低性能。 由于这些原因，上述模型已很少使用，尽管在早期的多处理机中它一度被采用，那时
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9953-9954的标注 | 添加于 2019年4月10日星期三 下午9:00:28

上述模型已很少使用，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9958-9958的标注 | 添加于 2019年4月10日星期三 下午9:01:37

是把已有的操作系统尽可能快地移植到新的多处理机上
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9958-9958的标注 | 添加于 2019年4月10日星期三 下午9:01:54

2.主从多处理机
==========

图8-8中给出的是第二种模型。在这种模型中，操作系统的一个副本及其数据表都在CPU 1上，而不是在其他所有CPU上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9960-9961的标注 | 添加于 2019年4月10日星期三 下午9:03:24

这种模型称为主从模型（master-slave），因为CPU 1是主CPU，而其他的都是从属CPU。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9962-9963的标注 | 添加于 2019年4月10日星期三 下午9:03:33

主从模型解决了在第一种模型中的多数问题。有单一的数据结构（如一个链表或者一组优先级链表）用来记录就绪进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9966-9966的标注 | 添加于 2019年4月10日星期三 下午11:52:14

这个模型的问题是，如果有很多的CPU，主CPU会变成一个瓶颈。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9968-9968的标注 | 添加于 2019年4月10日星期三 下午11:52:26

对小型多处理机是可行的，但不能用于大型多处理机。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9969-9969的标注 | 添加于 2019年4月10日星期三 下午11:52:30

3.对称多处理机
==========


对称多处理机（Symmetric MultiProcessor，SMP），消除了上述的不对称性。在存储器中有操作系统的一个副本，但任何CPU都可以运行它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9972-9973的标注 | 添加于 2019年4月10日星期三 下午11:56:22

这个模型动态地平衡进程和存储器，因为它只有一套操作系统数据表。它还消除了主CPU的瓶颈，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9973-9974的标注 | 添加于 2019年4月11日星期四 上午12:00:03

但是这个模型也带来了自身的问题。特别是，当两个或更多的CPU同时运行操作系统代码时，就会出现灾难。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9975-9976的标注 | 添加于 2019年4月11日星期四 上午12:00:27

处理这些问题的最简单方法是在操作系统中使用互斥信号量（锁），使整个系统成为一个大临界区。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9978-9978的标注 | 添加于 2019年4月11日星期四 上午9:06:15

这个模型是可以工作的，但是它几乎同主从模式一样糟糕。同样
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9979-9979的标注 | 添加于 2019年4月11日星期四 上午9:06:22

幸运的是，比较容易进行改进。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9981-9982的标注 | 添加于 2019年4月11日星期四 上午9:06:59

这一事实使得把操作系统分割成互不影响的临界区。每个临界区由其互斥信号量保护，所以一次只有一个CPU可执行它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9984-9985的标注 | 添加于 2019年4月11日星期四 上午9:07:37


通过这种方式，可以做到每个临界区在任一个时刻只被一个CPU执行，而且在任一个时刻每个临界表（critical table）也只被一个CPU访问。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9985-9986的标注 | 添加于 2019年4月11日星期四 上午9:07:59

大多数的现代多处理机都采用这种安排。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9987-9988的标注 | 添加于 2019年4月11日星期四 上午9:09:12

对于被两个或多个临界区使用的表必须通过互斥信号量分别加以保护，而且使用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9989-9989的标注 | 添加于 2019年4月11日星期四 上午9:09:24

更进一步，必须格外小心地避免死锁。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9987-9989的标注 | 添加于 2019年4月11日星期四 上午9:09:34

对于被两个或多个临界区使用的表必须通过互斥信号量分别加以保护，而且使用这些表的代码必须正确地运用互斥信号量。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9990-9991的标注 | 添加于 2019年4月11日星期四 上午9:10:09

理论上，所有的表可以被赋予整数值，而且所有的临界区都应该以升序的方式获得表。这一策略避免了死锁，但是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9995-9995的标注 | 添加于 2019年4月11日星期四 上午9:11:39

要做正确并不容易，而且要在程序员不断更换的数年时间之内始终保持正确性太困难了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9998-9998的标注 | 添加于 2019年4月11日星期四 上午9:11:46

8.1.3　多处理机同步
==========


在多处理机中这种同步是如何工作的。正如
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9999-9999的标注 | 添加于 2019年4月11日星期四 上午9:13:07

在多处理机中CPU经常需要同步。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10003-10003的标注 | 添加于 2019年4月11日星期四 上午9:15:06

在多处理机中，禁止中断的操作只影响到完成禁止中断操作的这个CPU，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10004-10005的标注 | 添加于 2019年4月11日星期四 上午9:15:23


因此，必须采用一种合适的互斥信号量协议，而且所有的CPU都遵守该协议以保证互斥工作的进行。 任何实用的互斥信号量协议的核心都是一条特殊指令，该指令允许检测一个存储器字并以一种不可见的操作设置。我们来看看在图2-22中使用的指令TSL（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10004-10005的标注 | 添加于 2019年4月11日星期四 上午9:16:10

任何实用的互斥信号量
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10006-10006的标注 | 添加于 2019年4月11日星期四 上午9:16:26

指令TSL（Test and Set Lock）是如何实现临界区的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10007-10008的标注 | 添加于 2019年4月11日星期四 上午9:16:47

这条指令做的是，读出一个存储器字并把它存储在一个寄存器中。同时，它对该存储器字写入一个1（或某些非零值）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10013-10013的标注 | 添加于 2019年4月11日星期四 上午9:22:26

如果不能锁住总线，TSL指令会失效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10014-10014的标注 | 添加于 2019年4月11日星期四 上午9:22:35


为了阻止这种情况的发生，TSL指令必须首先锁住总线，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10015-10015的标注 | 添加于 2019年4月11日星期四 上午9:25:32


对总线加锁的典型做法是，先使用通常的总线协议请求总线，并申明（设置一个逻辑1）已拥有某些特定的总线线路，直到两个周期全部完成。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10018-10019的标注 | 添加于 2019年4月11日星期四 上午9:29:28

Peterson协议（完全用软件实现同步）会
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10018-10019的标注 | 添加于 2019年4月11日星期四 上午9:29:35

如果正确地实现和使用TSL，它能够保证互斥机制正常工作。但是这种互斥方法使用了自旋锁（spin lock），因为请求的CPU只是在原地尽可能快地对锁进行循环测试。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10022-10023的标注 | 添加于 2019年4月11日星期四 上午9:39:11


高速缓存的实现也许能够消除总线竞争的问题，但事实并非如此。理论上，只要提出请求的CPU已经读取了锁字（lock word），它就可在其高速缓存中得到一个副本。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10026-10026的标注 | 添加于 2019年4月11日星期四 上午9:40:38

问题是，高速缓存操作是在32或64字节的块中进行的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10029-10030的标注 | 添加于 2019年4月11日星期四 上午9:40:57

这样一来，整个包含锁的高速缓存块就会不断地在锁的拥有者和锁的请求者之间来回穿梭，导致了比单个读取一个锁字更大的总线流量。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10031-10032的标注 | 添加于 2019年4月11日星期四 上午9:47:31

使提出请求的CPU首先进行一个纯读操作来观察锁是否空闲，就可以实现这个目标。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10030-10032的标注 | 添加于 2019年4月11日星期四 上午9:47:41

消除在请求一侧的所有由TSL引起的写操作，我们就可以明显地减少这种开销。使提出请求的CPU首先进行一个纯读操作来观察锁是否空闲，就可以实现这个目标。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10030-10032的标注 | 添加于 2019年4月11日星期四 上午9:47:45

另一个减少总线流量的方式是使用著名的以太网二进制指数补偿算法（binary exponential backoff algorithm）（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10041-10042的标注 | 添加于 2019年4月11日星期四 上午9:51:17

不是采用连续轮询，参考图2-22，而是把一个延迟循环插入轮询之间。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10045-10046的标注 | 添加于 2019年4月11日星期四 上午9:54:02

一个更好的思想是，让每个打算获得互斥信号量的CPU都拥有各自用于测试的私有锁变量，如图8-11所示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10052-10052的标注 | 添加于 2019年4月11日星期四 上午9:56:25

自旋与切换
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10052-10054的标注 | 添加于 2019年4月11日星期四 上午9:57:30

到目前为止，不论是连续轮询方式、间歇轮询方式，还是把自己附在进行等候CPU链表中的方式，我们都假定需要加锁的互斥信号量的CPU只是保持等待。有时
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10057-10057的标注 | 添加于 2019年4月11日星期四 上午9:57:35

然而，在另外一些情形中，却存在着别的选择。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10062-10062的标注 | 添加于 2019年4月11日星期四 上午10:00:39

假设自旋和进行线程切换都是可行的选择，则可进行如下的权衡。自旋直接浪费了CPU周期。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10063-10064的标注 | 添加于 2019年4月11日星期四 上午10:01:18

切换也浪费了CPU周期，因为必须保存当前线程的状态，必须获得保护就绪链表的锁，还必须选择一个线程，必须装入其状态，并且使其开始运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10067-10068的标注 | 添加于 2019年4月11日星期四 上午10:01:46

如果预先知道互斥信号量通常被持有的时间，比如是50µs，而从当前线程切换需要1ms，稍后切换返回还需1ms，那么在互斥信号量上自旋则更为有效。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10073-10073的标注 | 添加于 2019年4月11日星期四 上午10:05:58


对于任何给定的系统，有可能对其所有的有关活动进行跟踪，并且随后进行离线分析。然后就可以确定哪个决定最好及在最好情形下所浪费的时间。这种事后算法（hindsight algorithm）成为对可行算法进行测量的基准评测标准
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10075-10076的标注 | 添加于 2019年4月11日星期四 上午10:07:22


多数的研究工作使用了这样一个模型：一个未能获得互斥信号量的线程自旋一段时间。如果时间超过某个阈值，则进行切换。在某些情形下，该阈值是一个定值，典型值是切换至另一个线程再切换回来的开销
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10075-10076的标注 | 添加于 2019年4月11日星期四 上午10:10:54

在系统跟踪若干最新的自旋时间并且假定当前的情形可能会同先前的情形类似时，就可以得到最好的结果。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10084-10084的标注 | 添加于 2019年4月11日星期四 上午10:12:28

### 8.1.4　多处理机调度

所有的现代操作系统都支持多线程进程，这让调度变得更加复杂。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10087-10087的标注 | 添加于 2019年4月11日星期四 上午10:15:39

线程是内核线程还是用户线程至关重要。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10087-10088的标注 | 添加于 2019年4月11日星期四 上午10:15:47

线程是内核线程还是用户线程至关重要。如果线程是由用户空间库维护的，而对内核不可见，那么调度一如既往的基于单个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10087-10088的标注 | 添加于 2019年4月11日星期四 上午10:15:50

线程是内核线程还是用户线程至关重要。如果线程是由用户空间库维护的，而对内核不可见，那么调度一如既往的基于单个进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10089-10090的标注 | 添加于 2019年4月11日星期四 上午10:16:02

对内核线程来说，情况有所不同。在这种情况下所有线程均是内核可见的，内核可以选择一个进程的任一线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10092-10092的标注 | 添加于 2019年4月11日星期四 上午10:25:41

进程和线程的选择并不是调度中的惟一问题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10092-10093的标注 | 添加于 2019年4月11日星期四 上午10:26:06

进程和线程的选择并不是调度中的惟一问题。在单处理机中，调度是一维的。惟一
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10092-10093的标注 | 添加于 2019年4月11日星期四 上午10:26:08

进程和线程的选择并不是调度中的惟一问题。在单处理机中，调度是一维的。惟一
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10092-10093的标注 | 添加于 2019年4月11日星期四 上午10:26:10

进程和线程的选择并不是调度中的惟一问题。在单处理机中，调度是一维的。惟一
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10092-10093的标注 | 添加于 2019年4月11日星期四 上午10:26:11

进程和线程的选择并不是调度中的惟一问题。在单处理机中，调度是一维的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10093-10094的标注 | 添加于 2019年4月11日星期四 上午10:26:15

”而在多处理机中，调度是二维的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10095-10096的标注 | 添加于 2019年4月11日星期四 上午10:26:24

另一个造成复杂性的因素是，在有些系统中所有的线程是不相关的，而在另外一些系统中它们是成组的，同属于同一个应用并且协同工作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10095-10096的标注 | 添加于 2019年4月11日星期四 上午10:28:57

另一个造成复杂性的因素是，在有些系统中所有的线程是不相关的，而在另外一些系统中它们是成组的，同属于同一个应用并且协同工作。前一种情形的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10095-10096的标注 | 添加于 2019年4月11日星期四 上午10:29:03

另一个造成复杂性的因素是，在有些系统中所有的线程是不相关的，而在另外一些系统中它们是成组的，同属于同一个应用并且协同工作。前一种情形的例子
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10095-10096的标注 | 添加于 2019年4月11日星期四 上午10:29:11

另一个造成复杂性的因素是，在有些系统中所有的线程是不相关的，而在另外一些系统中它们是成组的，同属于同一个应用并且协同工作。前一种情形的例子是分时系统，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10098-10098的标注 | 添加于 2019年4月11日星期四 上午10:29:18

后一种情形的例子通常发生在程序开发环境中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10100-10100的标注 | 添加于 2019年4月11日星期四 上午10:29:50

通常make程序用于管理开发工作。调
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10101-10102的标注 | 添加于 2019年4月11日星期四 上午10:30:01

make的原始版本是顺序工作的，不过为多处理机设计的新版本可以一次启动所有的编译。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10100-10101的标注 | 添加于 2019年4月11日星期四 上午10:30:17

通常make程序用于管理开发工作。调用make程序时，在考虑了头文件或代码文件的修改之后，它仅编译那些必须重新编译的代码文件。仍然
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10100-10101的标注 | 添加于 2019年4月11日星期四 上午10:30:19

通常make程序用于管理开发工作。调用make程序时，在考虑了头文件或代码文件的修改之后，它仅编译那些必须重新编译的代码文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10104-10104的标注 | 添加于 2019年4月11日星期四 上午10:49:22

1.分时
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10105-10107的标注 | 添加于 2019年4月11日星期四 上午10:50:05

处理独立线程的最简单算法是，为就绪线程维护一个系统级的数据结构，它可能只是一个链表，但更多的情况下可能是对应不同优先级一个链表集合，如图8-12a所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10105-10105的标注 | 添加于 2019年4月11日星期四 上午10:50:42

首先讨论调度独立线程的情况。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10107-10109的标注 | 添加于 2019年4月11日星期四 上午10:51:03

第一个将要完成其当前工作（或其线程将被阻塞）的CPU是CPU 4，然后CPU 4锁住调度队列（scheduling queue）并选择优先级最高的线程A，如图8-12b所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10107-10109的标注 | 添加于 2019年4月11日星期四 上午10:51:24

第一个将要完成其当前工作（或其线程将被阻塞）的CPU是CPU 4，然后CPU 4锁住调度队列（scheduling queue）并选择优先级最高的线程A，如图8-12b所示。接着，CPU 12空闲并选择线程B，参见图8-12c。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10113-10114的标注 | 添加于 2019年4月11日星期四 上午10:54:37

。不过这一方法有两个缺点，一个是随着CPU数量增加所引起的对调度数据结构的潜在竞争，二是当线程由于I/O阻塞时所引起上下文切换的开销（overhead）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10114-10115的标注 | 添加于 2019年4月11日星期四 上午11:26:31

在线程的时间片用完时，也可能发生上下文切换。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10115-10116的标注 | 添加于 2019年4月11日星期四 上午11:26:54

在多处理机中它有一些在单处理机中不存在的属性。假设某个线程在其时间片用完时持有一把自旋锁。在该线程被再次调度并且释放该锁之前，其他等待该自旋锁的CPU只是把时间浪费在自旋上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10118-10120的标注 | 添加于 2019年4月11日星期四 上午11:27:55

为了避免这种异常情况，一些系统采用智能调度（smart scheduling）的方法，其中，获得了自旋锁的线程设置一个进程范围内的标志以表示它目前拥有了一个自旋锁（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10121-10122的标注 | 添加于 2019年4月11日星期四 上午11:30:54

调度中的另一个主要问题是，当所有CPU平等时，某些CPU更平等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10125-10126的标注 | 添加于 2019年4月11日星期四 上午11:41:11

有些多处理机考虑了这一因素，并使用了所谓亲和调度（affinity scheduling）（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10126-10127的标注 | 添加于 2019年4月11日星期四 上午11:41:29

。其基本思想是，尽量使一个线程在它前一次运行过的同一个CPU上运行。创建这种亲和力（affinity）的一种途径是采用一种两级调度算法（two-level scheduling algorithm）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10124-10124的标注 | 添加于 2019年4月11日星期四 上午11:41:56

块。预装高速缓存块将提高高速缓存的命中率，从而提高了线程的速度。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10129-10129的标注 | 添加于 2019年4月11日星期四 上午11:42:42

线程的实际调度工作在算法的底层进行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10132-10134的标注 | 添加于 2019年4月11日星期四 上午11:44:54

两级调度算法有三个优点。第一，它把负载大致平均地分配在可用的CPU上；第二，它尽可能发挥了高速缓存亲和力的优势；第三，通过为每个CPU提供一个私有的就绪线程链表，使得对就绪线程链表的竞争减到了最小，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10134-10134的标注 | 添加于 2019年4月11日星期四 上午11:45:21

2.空间共享
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10135-10135的标注 | 添加于 2019年4月11日星期四 上午11:46:56

线程之间以某种方式彼此相关时，可以使用其他多处理机调度方法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10135-10135的标注 | 添加于 2019年4月11日星期四 上午11:47:03

彼此相关时，可以使用其他多处理机调度方法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10135-10135的标注 | 添加于 2019年4月11日星期四 上午11:47:08

当线程之间以某种方式彼此相关时，可以使用其他多处理机调度方法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10137-10137的标注 | 添加于 2019年4月11日星期四 上午11:50:08

在多个CPU上同时调度多个线程称为空间共享（space sharing）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10135-10135的标注 | 添加于 2019年4月11日星期四 上午11:51:05

当线程之间以某种方式彼此相关时，可以使用其他多处理机调度方法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10138-10138的标注 | 添加于 2019年4月11日星期四 上午11:51:20

最简单的空间共享算法是这样工作的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10138-10139的标注 | 添加于 2019年4月11日星期四 上午11:52:17

最简单的空间共享算法是这样工作的。假设一组相关的线程是一次性创建的。在其创建的时刻，调度程序检查是否有同线程数量一样多的空闲CPU存在。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10142-10143的标注 | 添加于 2019年4月11日星期四 下午1:12:00

在任何一个时刻，全部CPU被静态地划分成若干个分区，每个分区都运行一个进程中的线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10146-10148的标注 | 添加于 2019年4月11日星期四 下午1:13:02

必须进行周期性的调度决策。在单处理机系统中，最短作业优先是批处理调度中知名的算法。在多处理机系统中类似的算法是，选择需要最少的CPU周期数的线程，也就是其CPU周期数×运行时间最小的线程为候选线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10148-10149的标注 | 添加于 2019年4月11日星期四 下午1:13:18

事实上，研究表明，要胜过先来先服务算法是非常困难的（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10150-10150的标注 | 添加于 2019年4月11日星期四 下午1:15:26

另一种处理方式是主动地管理线程的并行度。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10150-10152的标注 | 添加于 2019年4月11日星期四 下午1:15:37

另一种处理方式是主动地管理线程的并行度。管理并行度的一种途径是使用一个中心服务器，用它跟踪哪些线程正在运行，哪些线程希望运行以及所需CPU的最小和最大数量（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10156-10156的标注 | 添加于 2019年4月11日星期四 下午1:16:59

3.群调度（Gang
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10156-10156的标注 | 添加于 2019年4月11日星期四 下午1:17:11

3.群调度（Gang Scheduling）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10158-10159的标注 | 添加于 2019年4月11日星期四 下午1:17:31

人们寻找既可以调度时间又可以调度空间的算法，特别是对于要创建多个线程而这些线程通常需要彼此通信的线程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10160-10160的标注 | 添加于 2019年4月11日星期四 下午1:19:05

，设想一个系统中有线程A0 和A1 属于
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10160-10160的标注 | 添加于 2019年4月11日星期四 下午1:19:16

，设想一个系统中有线程A0 和A1 属于
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10160-10160的标注 | 添加于 2019年4月11日星期四 下午1:19:26

，设想一个系统中有线程A0 和A1 属于
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10160-10164的标注 | 添加于 2019年4月11日星期四 下午1:19:33

，设想一个系统中有线程A0 和A1 属于进程A，而线程B0 和B1 属于进程B。线程A0 和B0 在CPU 0上分时；而线程A1 和B1 在CPU 1上分时。线程A0 和A1 需要经常通信。其通信模式是，A0 送给A1 一个消息，然后A1 回送给A0 一个应答，紧跟的是另一个这样的序列。假设正好是A0
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10160-10164的标注 | 添加于 2019年4月11日星期四 下午1:19:35

，设想一个系统中有线程A0 和A1 属于进程A，而线程B0 和B1 属于进程B。线程A0 和B0 在CPU 0上分时；而线程A1 和B1 在CPU 1上分时。线程A0 和A1 需要经常通信。其通信模式是，A0 送给A1 一个消息，然后A1 回送给A0 一个应答，紧跟的是另一个这样的序列。假设
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10169-10170的标注 | 添加于 2019年4月11日星期四 下午1:26:35

这一问题的解决方案是群调度（gang scheduling），它是协同调度（co-scheduling）（Outsterhout，1982）的发展产物。群调度由三个部分组成：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10168-10169的标注 | 添加于 2019年4月11日星期四 下午1:26:45

最终结果是每200ms一个请求-应答序列。这个结果并不好。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10170-10172的标注 | 添加于 2019年4月11日星期四 下午1:28:31

把一组相关线程作为一个单位，即一个群（gang），一起调度。 2)一个群中的所有成员在不同的分时CPU上同时运行。 3)群中的所有成员共同开始和结束其时间片。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10172-10173的标注 | 添加于 2019年4月11日星期四 下午1:28:46

使群调度正确工作的关键是，同步调度所有的CPU。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10176-10176的标注 | 添加于 2019年4月11日星期四 下午1:29:36

有关群调度是如何工作的例子在图8-15中给出。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10182-10183的标注 | 添加于 2019年4月11日星期四 下午7:03:00

群调度的思想是，让一个进程的所有线程一起运行，这样，如果其中一个线程向另一个线程发送请求，接受方几乎会立即得到消息，并且几乎能够立即应答
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10187-10188的标注 | 添加于 2019年4月11日星期四 下午7:04:06
##8.2 多计算机

- 实现相关的问题
- 一大条就是有关指针参数的使用
  - 由于客户机和服务器在不同的地址空间中，所以用 RPC 传递指针是不可能的。
  - 在某些情形下，可以使用一些技巧使得传递指针成为可能。
    - 通过引用调用（ call-by-reference）的标准调用序列被复制 -恢复（ copy-restore）所替代
- 第二个问题是，对于弱类型的语言，如 C 语言，编写一个过程用于计算两个矢量（数组）的内积且不规定其任何一个矢量的大小，这是完全合法的。
  - 对于客户端桩而言，基本上没有可能对这种参数进行编排
- 第三个问题是，参数的类型并不总是能够推导出的，甚至不论是从形式化规约还是从代码自身
- 第四个问题与使用全局变量有关。
  - 全局变量不再是共享的了
- 分布式共享存储器（ Distributed Shared Memory， DSM）
  - 有了DSM，每个页面都位于如图8-1 所示的某一个存储器中。每台机器有其自己的虚拟内存和页表。当一个CPU 在一个它并不拥有的页面上进行LOAD 和STORE 时，会陷入到操作系统当中。然后操作系统对该页面进行定位，并请求当前持有该页面的CPU 解除对该页面的映射并通过互连网络发送该页面。在该页面到达时，页面被映射进来，于是出错指令重新启动。


- 实际的共享存储器和 DSM 之间的差别如图 8-21 所示。


- DSM 是如何工作



- 在 DSM 系统中，地址空间被划分为页面（page），这些页面分布在系统中的所有节点上。



- 1. 复制对基本系统的一个改进是复制那些只读页面，如程序代码、只读常量或其他只读数据结构，它可以明显地提高性能


另一种可能是，不仅复制只读页面，而且复制所有的页面。


- 2. 伪共享在某些关键方式上 DSM 系统与多处理机类似。在这两种系统中，当引用非本地存储器字时，从该字所在的机器上取包含该字的一块内存，并放到进行引用的（分别是内存储器或高速缓存）相关机器上。


- 对于 DSM 而言，较大的页面大小有优点也有缺点



- 通过采用大单位的数据传输，通常可减少传输的次数



- 另一方面，大页面的传输造成网络长期占用，阻塞了其他进程引起的故障。


- 过大的有效页面引起了另一个问题，称为伪共享（false sharing），如图 8-23 所示。


- 尽管这些变量是无关的，但它们碰巧在同一个页面内，所以当某个进程使用其中一个变量时，它也得到另一个。有效页面越大，发生伪共享的可能性也越高



- 理解这个问题并把变量放在相应的地址空间中的高明编译器能够帮助减少伪共享并改善性能



- 3. 实现顺序一致性如果不对可写页面进行复制，那么实现一致性是没有问题的。

多处理机流行和有吸引力的原因是，它们提供了一个简单的通信模型：所有CPU共享一个公用存储器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10189-10190的标注 | 添加于 2019年4月11日星期四 下午7:04:14

惟一美中不足的是，大型多处理机构造困难，因而造价高昂。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10190-10191的标注 | 添加于 2019年4月11日星期四 下午8:23:48

为了解决这个问题，人们在多计算机（multicomputers）领域中进行了很多研究。多
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10191-10192的标注 | 添加于 2019年4月12日星期五 上午10:29:43

这些系统有各种其他的名称，如机群计算机（cluster computers）以及工作站机群（Clusters of Workstations，COWS）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10190-10191的标注 | 添加于 2019年4月12日星期五 上午10:29:49

为了解决这个问题，人们在多计算机（multicomputers）领域中进行了很多研究。多计算机是紧耦合CPU，不共享存储器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10193-10193的标注 | 添加于 2019年4月12日星期五 上午10:31:12

多计算机容易构造，因为其基本部件只是一台配有高性能网络接口卡的PC裸机。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10199-10200的标注 | 添加于 2019年4月12日星期五 上午10:33:29

8.2.1　多计算机硬件 一台多计算机的基本节点包括一个CPU、存储器、一个网络接口，有时还有一个硬盘。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10203-10204的标注 | 添加于 2019年4月12日星期五 上午10:33:59

1.互连技术 在每个节点上有一块网卡，带有一根或两根从网卡上接出的电缆（或光纤）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10205-10206的标注 | 添加于 2019年4月12日星期五 上午10:34:49

现代交换型以太网就采用了这种拓扑结构。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10205-10205的标注 | 添加于 2019年4月12日星期五 上午10:35:18

图8-16a的星型拓扑结构连接
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10205-10205的标注 | 添加于 2019年4月12日星期五 上午10:35:23

图8-16a的星型拓扑结构
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10206-10206的标注 | 添加于 2019年4月12日星期五 上午10:35:40

作为单一交换机设计的另一种选择，节点可以组成一个环，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10208-10209的标注 | 添加于 2019年4月12日星期五 上午10:35:55

图8-16c中的网格（grid或mesh）是一种在许多商业系统中应用的二维设计
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10210-10211的标注 | 添加于 2019年4月12日星期五 上午10:36:23

网格的变种是双凸面（double torus），如图8-16d所示，这是一种边连通的网格。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10212-10212的标注 | 添加于 2019年4月12日星期五 上午10:36:33

图8-16e中的立方体（cube）是一种规则的三维拓扑结构
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10213-10213的标注 | 添加于 2019年4月12日星期五 上午10:36:48

在图8-16f中，是一种用两个三维立方体加上
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10215-10215的标注 | 添加于 2019年4月12日星期五 上午10:37:08

这种形式组成的n维立方体称为超立方体（hypercube）。许
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10215-10216的标注 | 添加于 2019年4月12日星期五 上午10:37:24

这种形式组成的n维立方体称为超立方体（hypercube）。许多并行计算机采用这种拓扑结构，因为其直径随着维数的增加线性增长。换
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10209-10210的标注 | 添加于 2019年4月12日星期五 上午10:37:38

这种系统有一个直径（diameter），即在任意两个节点之间的最长路径，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10209-10211的标注 | 添加于 2019年4月12日星期五 上午10:37:48

这种系统有一个直径（diameter），即在任意两个节点之间的最长路径，并且该值只按照节点数目的平方根增加。网格的变种是双凸面（double torus），如图8-16d所示，这是一种边连通的网格。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10216-10216的标注 | 添加于 2019年4月12日星期五 上午10:38:03

直径是节点数的自然对数，例
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10218-10220的标注 | 添加于 2019年4月12日星期五 上午10:38:38

于超立方体而言，获得较小直径的代价是扇出数量（fanout）以及由此而来的连接数量（及成本）的大量增加。 图　8-16　各种互连拓扑结构：a)单交换机；b)环；c)网格；d)双凸面；e)立方体；f)四
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10218-10219的标注 | 添加于 2019年4月12日星期五 上午10:38:52

于超立方体而言，获得较小直径的代价是扇出数量（fanout）以及由此而来的连接数量（及成本）的大量增加。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10221-10222的标注 | 添加于 2019年4月12日星期五 上午10:39:44

在多计算机中可采用两种交换机制。在第一种机制里，每个消息首先被分解（由用户软件或网络接口进行）成为有最大长度限制的块，称为包（packet）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10222-10223的标注 | 添加于 2019年4月12日星期五 上午10:40:03

称为存储转发包交换（store-and-forward packet switching），由源节点的网络接口卡注入到第一个交换机的包组成，如图8-17a所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10227-10227的标注 | 添加于 2019年4月12日星期五 上午10:43:23

尽管存储转发包交换灵活且有效，但是它存在通过互连网络时增加时延（延迟）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10229-10230的标注 | 添加于 2019年4月12日星期五 上午10:43:57

一条出路是设计一个网络，其中的包可以逻辑地划分为更小的单元
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10231-10232的标注 | 添加于 2019年4月12日星期五 上午10:45:02

另一种交换机制是电路交换（circuit switching），它包括由第一个交换机建立的，通过所有交换机而到达目标交换机
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10231-10233的标注 | 添加于 2019年4月12日星期五 上午10:45:07

另一种交换机制是电路交换（circuit switching），它包括由第一个交换机建立的，通过所有交换机而到达目标交换机的一条路径
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10235-10236的标注 | 添加于 2019年4月12日星期五 上午10:46:54

电路交换的一种变种称为虫孔路由（wormhole routing），它把每个包拆成子包，并允许第一个子包在整个路径还没有完全建立之前就开始流动。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10236-10236的标注 | 添加于 2019年4月12日星期五 上午10:47:01

2.网络接口
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10236-10237的标注 | 添加于 2019年4月12日星期五 上午10:47:13

在多计算机中，所有节点里都有一块插卡板，它包含节点与互连网络的连接，这使得多计算机连成一体
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10239-10239的标注 | 添加于 2019年4月12日星期五 上午11:55:30

事实上在所有的多计算机中，接口板上都有一些用来存储进出包的RAM。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10244-10244的标注 | 添加于 2019年4月12日星期五 下午12:00:36

同样的问题还出现在接收进来的包上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10247-10248的标注 | 添加于 2019年4月12日星期五 下午12:00:50

而把进来的包首先保存在接口板的私有RAM中，然后再把它们复制到主RAM中，则更安全些。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10248-10249的标注 | 添加于 2019年4月12日星期五 下午12:04:02

接口板上可以有一个或多个DMA通道，甚至在板上有一个完整的CPU（乃至多个CPU）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10252-10253的标注 | 添加于 2019年4月12日星期五 下午12:04:12

很多接口板上有一个完整的CPU，可能另外还有一个或多个DMA通道。它们被称为网络处理器（network processor），并且其功能日趋强大
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10252-10253的标注 | 添加于 2019年4月12日星期五 下午12:04:21

很多接口板上有一个完整的CPU，可能另外还有一个或多个DMA通道。它们被称为网络处理器（network processor），
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10253-10255的标注 | 添加于 2019年4月12日星期五 下午12:06:38

这种设计意味着主CPU将一些工作分给了网卡，诸如处理可靠的传送（如果底层的硬件会丢包）、多播（将包发送到多于一个的目的地）、压缩/解压缩、加密/解密以及在多进程系统中处理安全事务等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10259-10260的标注 | 添加于 2019年4月12日星期五 下午12:07:01

在多计算机系统中高性能通信的敌人是对包的过度复制。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10265-10266的标注 | 添加于 2019年4月12日星期五 下午12:08:17

如果说进出RAM的复制是性能瓶颈，那么进出内核的额外复制会将端到端的延迟加倍，并把吞吐量（throughput）降低一半。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10263-10264的标注 | 添加于 2019年4月12日星期五 下午12:08:30

内核会同时在输入和输出时把包复制到自己的存储空间去，从而在传送到网络上时避免出现缺页异常（page fault）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10268-10268的标注 | 添加于 2019年4月12日星期五 下午12:09:02

来了两个问题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10268-10269的标注 | 添加于 2019年4月12日星期五 下午12:10:46

首先，如果在节点上有若干个进程运行而且需要访问网络以发送包，该怎么办
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10272-10273的标注 | 添加于 2019年4月12日星期五 下午12:15:59

一个解决方案是，把接口板映射到所有需要它的进程中去，但是这样做就需要有一个机制用以避免竞争。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10278-10279的标注 | 添加于 2019年4月12日星期五 下午9:36:33

第二个问题是，内核本身会经常需要访问互连网络
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10281-10283的标注 | 添加于 2019年4月13日星期六 上午12:21:08

简单的设计是使用两块网络接口板，一块映射到用户空间供应用程序使用，另一块映射到内核空间供操作系统使用。许多
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10281-10283的标注 | 添加于 2019年4月13日星期六 上午12:21:15

最简单的设计是使用两块网络接口板，一块映射到用户空间供应用程序使用，另一块映射到内核空间供操作系统使用。许多
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10279-10280的标注 | 添加于 2019年4月13日星期六 上午12:21:38

如果考虑让内核与任何用户共享同一块接口板，即便是基于分时方式，也不是一个好主意。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10281-10282的标注 | 添加于 2019年4月13日星期六 上午12:21:46

最简单的设计是使用两块网络接口板，一块映射到用户空间供应用程序使用，另一块映射到内核空间供操作系统使用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10283-10283的标注 | 添加于 2019年4月13日星期六 上午12:21:53

节点至网络接口通信
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10283-10284的标注 | 添加于 2019年4月13日星期六 上午12:22:01

下一个问题是如何将包送到接口板上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10283-10284的标注 | 添加于 2019年4月13日星期六 上午12:22:12

下一个问题是如何将包送到接口板上。最快的方法是使用板上的DMA芯片直接将它们从RAM复制到板上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10290-10291的标注 | 添加于 2019年4月13日星期六 上午12:23:06

可采用一类将页面钉住和释放的系统调用，把有关页面标记成暂时不可交换的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10283-10285的标注 | 添加于 2019年4月13日星期六 上午12:23:20

下一个问题是如何将包送到接口板上。最快的方法是使用板上的DMA芯片直接将它们从RAM复制到板上。这种方式的问题是，DMA使用物理地址而不是虚拟地址，并且独立于CPU运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10290-10291的标注 | 添加于 2019年4月13日星期六 上午12:23:27

为了以避免上述问题，可采用一类将页面钉住和释放的系统调用，把有关页面标记成暂时不可交换的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10287-10288的标注 | 添加于 2019年4月13日星期六 上午12:23:39

另外，如果操作系统决定替换一个页面，而DMA芯片正在从该页面复制一个包，就会传送错误的数据
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10297-10297的标注 | 添加于 2019年4月13日星期六 上午12:24:05

8.2.3　用户层通信软件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10297-10298的标注 | 添加于 2019年4月13日星期六 上午12:24:17

在多计算机中，不同CPU上的进程通过互相发送消息实现通信。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10301-10301的标注 | 添加于 2019年4月13日星期六 上午12:24:35

1.发送和接收
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10298-10299的标注 | 添加于 2019年4月13日星期六 上午12:24:55

操作系统提供了一种发送和接收消息的途径，而库过程使得这些低层的调用对用户进程可用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10299-10300的标注 | 添加于 2019年4月13日星期六 上午12:25:03

通过使得远程通信看起来像过程调用的办法，将实际的消息传递对用户隐藏起来。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10301-10302的标注 | 添加于 2019年4月13日星期六 上午12:25:18

所提供的通信服务可以减少到两个（库）调用，一个用于发送消息，另一个用于接收消息。发送
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10301-10302的标注 | 添加于 2019年4月13日星期六 上午12:25:25

所提供的通信服务可以减少到两个（库）调用，一个用于发送消息，另一个用于接收消息
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10307-10309的标注 | 添加于 2019年4月13日星期六 上午12:29:41

一个问题是如何编址。由于多计算机是静态的，CPU数目是固定的，所以处理编址问题的最便利的办法是使addr由两部分的地址组成，其中一部分是CPU编号，另一部分是在这个已编址的CPU上的一个进程或端口的编号。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10307-10307的标注 | 添加于 2019年4月13日星期六 上午12:29:50

一个问题是如何编址。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10307-10309的标注 | 添加于 2019年4月13日星期六 上午12:30:13

处理编址问题的最便利的办法是使addr由两部分的地址组成，其中一部分是CPU编号，另一部分是在这个已编址的CPU上的一个进程或端口的编号。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10309-10310的标注 | 添加于 2019年4月13日星期六 上午12:30:20

2.阻塞调用和非阻塞调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10310-10310的标注 | 添加于 2019年4月13日星期六 上午12:30:39

上面所叙述的调用是阻塞调用（有时称为同步调用）。当
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10310-10310的标注 | 添加于 2019年4月13日星期六 上午12:30:50

上面所叙述的调用是阻塞调用（有时称为同步调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10316-10317的标注 | 添加于 2019年4月13日星期六 上午12:31:36

相对于阻塞调用的另一种方式是非阻塞调用（有时称为异步调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10318-10318的标注 | 添加于 2019年4月13日星期六 上午12:31:48

这种机制的优点是发送进程可以继续运算，与消息传送并行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10320-10321的标注 | 添加于 2019年4月13日星期六 上午12:32:11

非阻塞原语所提供的性能优点被其严重的缺点所抵消了：直到消息被送出发送者才能修改消息缓冲区。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10323-10323的标注 | 添加于 2019年4月13日星期六 上午12:32:33

有三种可能的解决方案。第
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10324-10324的标注 | 添加于 2019年4月13日星期六 上午12:32:43

让内核复制这个消息到内部的内核缓冲区
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10324-10324的标注 | 添加于 2019年4月13日星期六 上午12:33:03

让内核复制这个消息到内部的内核缓冲区，然后让进程继续，如图8-19b所
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10324-10324的标注 | 添加于 2019年4月13日星期六 上午12:33:07

让内核复制这个消息到内部的内核缓冲区，然后让进程继续，如图8-19b所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10326-10326的标注 | 添加于 2019年4月13日星期六 上午12:33:32

缺点是对每个送出的消息都必须将其从用户空间复制进内核空间
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10328-10328的标注 | 添加于 2019年4月13日星期六 上午12:33:43

当消息发送之后中断发送者，告知缓冲区又可以使用了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10329-10329的标注 | 添加于 2019年4月13日星期六 上午12:34:01

但是用户级中断使编写程序变得棘手，并可能会要处理竞争条件，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10330-10330的标注 | 添加于 2019年4月13日星期六 上午12:34:10

让缓冲区写时复制（copy on write）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10334-10337的标注 | 添加于 2019年4月13日星期六 上午12:35:05

发送端的选择是 1)阻塞发送（CPU在消息传输期间空闲）。 2)带有复制操作的非阻塞发送（CPU时间浪费在额外的复制上）。 3)带有中断操作的非阻塞发送（造成编程困难）。 4)写时复制（最终可能也会需要额外的复制）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10337-10337的标注 | 添加于 2019年4月13日星期六 上午12:35:35

在正常条件下，第一种选择是最好的，特别是在有多线程的情况下，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10342-10343的标注 | 添加于 2019年4月13日星期六 上午12:36:43

正如send可以是阻塞的和非阻塞的一样，receive也同样可以是阻塞的和非阻塞的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10347-10348的标注 | 添加于 2019年4月13日星期六 上午12:37:10

还有另一个选择，其机制是在接收者进程的地址空间中，一个消息的到达自然地引起一个新线程的创建
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10349-10349的标注 | 添加于 2019年4月13日星期六 上午12:37:22

弹出式线程（pop-up thread）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10345-10345的标注 | 添加于 2019年4月13日星期六 上午12:37:42

使用一个过程poll轮询进来的消息
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10353-10353的标注 | 添加于 2019年4月13日星期六 上午12:38:08

8.2.4　远程过程调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10354-10354的标注 | 添加于 2019年4月13日星期六 上午12:38:24

构造所有通信的范型（paradigm）都是输入/输出。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10354-10354的标注 | 添加于 2019年4月13日星期六 上午12:38:52

有不可救药的缺陷：构造所有通信的范型（paradigm）都是输入/输出。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10358-10358的标注 | 添加于 2019年4月13日星期六 上午12:39:04

简言之，Birrell和Nelson所建议的是，允许程序调用位于其他CPU中的过程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10361-10361的标注 | 添加于 2019年4月13日星期六 上午12:39:25

远程过程调用（Remote Procedure Call，RPC
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10361-10361的标注 | 添加于 2019年4月13日星期六 上午12:39:34

远程过程调用（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10361-10361的标注 | 添加于 2019年4月13日星期六 上午12:39:48

远程过程调用（Remote Procedure Call，RPC），
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10361-10362的标注 | 添加于 2019年4月13日星期六 上午12:41:00

发出调用的过程为客户机，而称被调用的过程为服务器，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10362-10363的标注 | 添加于 2019年4月13日星期六 上午12:41:12

RPC背后的思想是尽可能使远程过程调用像本地调用。在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10363-10364的标注 | 添加于 2019年4月13日星期六 上午12:41:53

客户程序必须被绑定在一个称为客户端桩（client stub）的小型库过程上，它在客户机地址空间中代表服务器过程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10363-10364的标注 | 添加于 2019年4月13日星期六 上午12:42:02

，要调用一个远程过程，客户程序必须被绑定在一个称为客户端桩（client stub）的小型库过程上，它在客户机地址空间中代表服务器过程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10364-10365的标注 | 添加于 2019年4月13日星期六 上午12:42:14

服务器程序也绑定在一个称为服务器端桩（server stub）的过程上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10366-10366的标注 | 添加于 2019年4月13日星期六 上午12:42:26

进行RPC的实际步骤如图8-20所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10368-10368的标注 | 添加于 2019年4月13日星期六 上午12:44:35

参数打包的过程称为编排（marshaling）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10368-10368的标注 | 添加于 2019年4月13日星期六 上午12:44:40

将参数打包的过程称为编排（marshaling）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9849-9850的标注 | 添加于 2019年4月13日星期六 下午2:39:39

Omega网络是如何工作
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9855-9856的标注 | 添加于 2019年4月13日星期六 下午2:54:38

在消息通过交换网络之后，模块号的左端的位就不再需要了。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9856-9856的标注 | 添加于 2019年4月13日星期六 下午2:54:46

可以用来记录入线编号，这样
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9858-9859的标注 | 添加于 2019年4月13日星期六 下午2:55:18

在上述 001需要往存储器001里写入一个字
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9860-9861的标注 | 添加于 2019年4月13日星期六 下午2:57:43

由于这两个请求不使用任何相同的开关、连线或存储器模块，所以它们可以并行工作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9861-9861的标注 | 添加于 2019年4月13日星期六 下午3:16:05

现在考虑如果CPU 000同时也请求访问存储器模块000会发生什么情况。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #9862-9863的标注 | 添加于 2019年4月13日星期六 下午3:16:55

不同，Omega网络是一种阻塞网络，并不是每组请求都可被同时处理。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10463-10463的标注 | 添加于 2019年4月13日星期六 下午4:46:33

进程集合。CPU 1不能突然决定运行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10443-10443的标注 | 添加于 2019年4月13日星期六 下午4:47:19

如果不对可写页面进行复制，那么实现一致性是没有问题的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10446-10447的标注 | 添加于 2019年4月13日星期六 下午4:47:40

但是，如果有一个进程试图在一个被复制的页面上写入，潜在的一致性问题就会出现，因为只修改一个副本却不管其他副本的做法是不能接受的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10448-10449的标注 | 添加于 2019年4月13日星期六 下午4:47:58

在多处理机中的解决方案是，要进行写的CPU首先将一个信号放到总线上，通知所有其他的CPU丢弃该高速缓存块的副本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10451-10452的标注 | 添加于 2019年4月13日星期六 下午4:48:23

在有详细约束的情况下，允许可写页面的多个副本存在是有可能的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10451-10453的标注 | 添加于 2019年4月13日星期六 下午4:48:45

在有详细约束的情况下，允许可写页面的多个副本存在是有可能的。一种方法是允许一个进程获得在部分虚拟地址空间上的一把锁，然后在被锁住的存储空间中进行多个读写操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10454-10455的标注 | 添加于 2019年4月13日星期六 下午4:49:15

另一种方法是，当一个潜在可写的页面被第一次真正写入时，制作一个“干净”的副本并保存在发出写操作的CPU上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10461-10461的标注 | 添加于 2019年4月13日星期六 下午4:50:55

8.2.6　多计算机调度
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10464-10465的标注 | 添加于 2019年4月13日星期六 下午4:51:25

说明在多计算机上的调度较为容易，但是将进程分配到节点上的工作更为重要。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10466-10466的标注 | 添加于 2019年4月13日星期六 下午4:52:02

最简单的多处理机算法—
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10465-10466的标注 | 添加于 2019年4月13日星期六 下午4:52:12

多计算机调度与多处理机的调度有些类似，但是并不是后者的所有算法都能适用于前者。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10468-10469的标注 | 添加于 2019年4月13日星期六 下午4:52:32

由于每个节点拥有自己的进程，因此可以应用任何本地调度算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10473-10473的标注 | 添加于 2019年4月13日星期六 下午4:52:42

8.2.7　负载平衡
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10477-10478的标注 | 添加于 2019年4月13日星期六 下午4:53:57

从事这种分配工作的算法和启发则是所谓的处理器分配算法（processor allocation algorithm）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10478-10478的标注 | 添加于 2019年4月13日星期六 下午4:55:37

多年来已出现了大量的处理器（节点）分配算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10478-10479的标注 | 添加于 2019年4月13日星期六 下午4:56:53

多年来已出现了大量的处理器（节点）分配算法。它们的差别是分别有各自的前提和目标。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10481-10481的标注 | 添加于 2019年4月13日星期六 下午4:57:09

1.图论确定算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10482-10483的标注 | 添加于 2019年4月13日星期六 下午4:57:44

系统包含已知CPU和存储器需求的进程，以及给出每对进程之间平均流量的已知矩阵。如果进程的数量大于CPU的数量k，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10482-10484的标注 | 添加于 2019年4月13日星期六 下午4:57:51

系统包含已知CPU和存储器需求的进程，以及给出每对进程之间平均流量的已知矩阵。如果进程的数量大于CPU的数量k，则必须把若干个进程分配给每个CPU。其想法是以最小的网络流量完成这个分配工作
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10482-10484的标注 | 添加于 2019年4月13日星期六 下午4:57:54

系统包含已知CPU和存储器需求的进程，以及给出每对进程之间平均流量的已知矩阵。如果进程的数量大于CPU的数量k，则必须把若干个进程分配给每个CPU。其想法是以最小的网络流量完成这个分配工作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10484-10485的标注 | 添加于 2019年4月13日星期六 下午4:58:06

该系统可以用一个带权图表示，每个顶点是一个进程，而每个弧代表两个进程之间的消息
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10484-10485的标注 | 添加于 2019年4月13日星期六 下午4:58:09

该系统可以用一个带权图表示，每个顶点是一个进程，而每个弧代表两个进程之间的消息流。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10486-10486的标注 | 添加于 2019年4月13日星期六 下午5:00:53

，寻找一个将图分割（切割）为k个互不连接的子图的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10484-10485的标注 | 添加于 2019年4月13日星期六 下午5:01:04

该系统可以用一个带权图表示，每个顶点是一个进程，而每个弧代表两个进程之间的消息流。在数学上，该问题就简化为在特定的限制条件下（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10490-10491的标注 | 添加于 2019年4月13日星期六 下午5:03:05

在图8-24a中，我们将有进程A、E和G的图划分到节点1上，进程B、F和H划分在节点2上，而进程C、D和I划分在节点3上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10491-10492的标注 | 添加于 2019年4月13日星期六 下午5:03:13

在图8-24b中，有一种不同的划分方法，只有28个单位的网络流量。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10490-10492的标注 | 添加于 2019年4月13日星期六 下午5:03:24

在图8-24a中，我们将有进程A、E和G的图划分到节点1上，进程B、F和H划分在节点2上，而进程C、D和I划分在节点3上。整个网络流量是被切割（虚线）的弧上的流量之和，即30个单位。在图8-24b中，有一种不同的划分方法，只有28个单位的网络流量。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10494-10495的标注 | 添加于 2019年4月13日星期六 下午5:04:16

直观地看，我们所做的是寻找紧耦合（簇内高流量）的簇（cluster），并且与其他的簇有较少的交互（簇外低流量）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10496-10496的标注 | 添加于 2019年4月13日星期六 下午5:04:23

2.发送者发起的分布式启发算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10497-10498的标注 | 添加于 2019年4月13日星期六 下午5:04:56

当进程创建时，它就运行在创建它的节点上，除非该节点过载了。过载
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10497-10498的标注 | 添加于 2019年4月13日星期六 下午5:05:04

当进程创建时，它就运行在创建它的节点上，除非该节点过载了。过载
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10501-10502的标注 | 添加于 2019年4月13日星期六 下午5:05:34

整个算法的思想是负载较重的节点试图甩掉超额的工作
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10501-10502的标注 | 添加于 2019年4月13日星期六 下午5:06:11

整个算法的思想是负载较重的节点试图甩掉超额的工作，如图8-25a所示
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10504-10506的标注 | 添加于 2019年4月13日星期六 下午11:17:17

Eager等人（1986）构造了一个该算法的分析排队模型（queueing model）。使用这个模型，所建立的算法表现良好而且在包括不同的阈值、传输成本以及探查限定等大范围的参数内工作稳定。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10508-10508的标注 | 添加于 2019年4月13日星期六 下午11:17:43

3.接收者发起的分布式启发
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10508-10508的标注 | 添加于 2019年4月13日星期六 下午11:17:48

3.接收者发起的分布式启发算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10508-10508的标注 | 添加于 2019年4月13日星期六 下午11:18:01

上面所给出的算法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10509-10509的标注 | 添加于 2019年4月13日星期六 下午11:18:09

它的一个互补算法是由一个轻载的接收者发起的，如图8-25b所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10513-10514的标注 | 添加于 2019年4月13日星期六 下午11:19:07

这个算法的优点是，在关键时刻
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10518-10519的标注 | 添加于 2019年4月13日星期六 下午11:20:17

把这两种算法组合起来是有可能的，当机器工作太多时可以试图卸掉一些工作，而在工作不多时可以尝试得到一些工作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10518-10520的标注 | 添加于 2019年4月13日星期六 下午11:20:51

把这两种算法组合起来是有可能的，当机器工作太多时可以试图卸掉一些工作，而在工作不多时可以尝试得到一些工作。此外，机器也许可以通过保留一份以往探查的历史记录（用以确定是否有机器经常性处于轻载或过载状态）来对随机轮询的方法进行改进。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10524-10525的标注 | 添加于 2019年4月13日星期六 下午11:52:55

某些环境下，一个机构拥有多计算机系统，但事实上却并不真正需要它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10524-10525的标注 | 添加于 2019年4月13日星期六 下午11:52:58

在某些环境下，一个机构拥有多计算机系统，但事实上却并不真正需要它。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10528-10530的标注 | 添加于 2019年4月13日星期六 下午11:53:21

上最重要的原因是可靠性（reliability）：现实中不能相信操作系统可以一天24小时，一年365或366天连续无故障地运行。通过把每个服务器放在不同机器上的方法，即使其中的一台服务器崩溃了，至少其他的服务器不会受到影响。虽然
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10528-10530的标注 | 添加于 2019年4月13日星期六 下午11:53:31

这些服务器不能作为进程运行在同一台机器上最重要的原因是可靠性（reliability）：现实中不能相信操作系统可以一天24小时，一年365或366天连续无故障地运行。通过把每个服务器放在不同机器上的方法，即使其中的一台服务器崩溃了，至少其他的服务器不会受到影响。虽然
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10528-10530的标注 | 添加于 2019年4月13日星期六 下午11:53:54

这些服务器不能作为进程运行在同一台机器上最重要的原因是可靠性（reliability）：现实中不能相信操作系统可以一天24小时，一年365或366天连续无故障地运行。通过把每个服务器放在不同机器上的方法，即使其中的一台服务器崩溃了，至少其他的服务器不会受到影响
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10528-10529的标注 | 添加于 2019年4月13日星期六 下午11:54:02

这些服务器不能作为进程运行在同一台机器上最重要的原因是可靠性（reliability）：现实中不能相信操作系统可以一天24小时，一年365或366天连续无故障地运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10532-10532的标注 | 添加于 2019年4月13日星期六 下午11:55:15

虚拟化（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10532-10532的标注 | 添加于 2019年4月13日星期六 下午11:55:28

机技术，通常简称为虚拟化（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10532-10532的标注 | 添加于 2019年4月13日星期六 下午11:55:38

虚拟化（virtualization），作为一种解决方法被提了出来，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10533-10536的标注 | 添加于 2019年4月13日星期六 下午11:56:02

。这种方法的好处在于，一台虚拟机上的错误不会自动地使其他虚拟机崩溃。在一个虚拟化系统中，不同的服务器可能运行在不同的虚拟机中，因此保持了多计算机系统局部性错误的模型，但是代价更低、也更易于维护。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10533-10534的标注 | 添加于 2019年4月13日星期六 下午11:56:07

。这种方法的好处在于，一台虚拟机上的错误不会自动地使其他虚拟机崩溃。在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10533-10534的标注 | 添加于 2019年4月13日星期六 下午11:56:09

。这种方法的好处在于，一台虚拟机上的错误不会自动地使其他虚拟机崩溃。在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10533-10534的标注 | 添加于 2019年4月13日星期六 下午11:56:11

。这种方法的好处在于，一台虚拟机上的错误不会自动地使其他虚拟机崩溃
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10538-10539的标注 | 添加于 2019年4月14日星期日 上午10:34:40

使用虚拟化技术，惟一一个运行在内核态的软件是管理程序（hypervisor），它的代码
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10538-10539的标注 | 添加于 2019年4月14日星期日 上午10:34:50

使用虚拟化技术，惟一一个运行在内核态的软件是管理程序（hypervisor），它的代码量比一个完整操作系统的代码量少两个数量级，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10537-10539的标注 | 添加于 2019年4月14日星期日 上午10:35:23

虚拟化技术能够起作用的原因在于大多数服务器停机的原因不是因为硬件的故障，而是因为臃肿、不可靠、有漏洞的软件，特别是操作系统。使用虚拟化技术，惟一一个运行在内核态的软件是管理程序（hypervisor），它的代码量比一个完整操作系统的代码量少两个数量级，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10540-10541的标注 | 添加于 2019年4月14日星期日 上午10:42:13

除了强大的隔离性，在虚拟机上运行软件还有其他的好处。其中之一就是减少
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10547-10547的标注 | 添加于 2019年4月14日星期日 上午10:44:01

虚拟机的另一个好处在于检查点和虚拟机的迁移（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10550-10552的标注 | 添加于 2019年4月14日星期日 上午10:44:26

虚拟机的另一个用途是运行那些不再被支持或不能在当前硬件上工作的操作系统（或操作系统版本）中的遗留应用程序（legacy application）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10553-10553的标注 | 添加于 2019年4月14日星期日 上午10:45:17

同时，虚拟机的一个重要应用是软件开发。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10560-10560的标注 | 添加于 2019年4月14日星期日 上午10:46:00

8.3.1　虚拟化的条件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10560-10560的标注 | 添加于 2019年4月14日星期日 上午10:46:30

看到，有两种虚拟化的方法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10560-10560的标注 | 添加于 2019年4月14日星期日 上午10:46:35

有两种虚拟化的方法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10560-10561的标注 | 添加于 2019年4月14日星期日 上午10:47:36

一种管理程序（hypervisor），又称为I型管理程序（或虚拟机监控器），如图1-29a所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10562-10563的标注 | 添加于 2019年4月14日星期日 上午10:47:52

它的工作是支持真实硬件的多个副本，也称作虚拟机（virtual machine），与普通操作系统所支持的进程类似。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10563-10564的标注 | 添加于 2019年4月14日星期日 上午10:48:06

II型管理程序，如图1-29b所示，是一种完全不同的类型。它只是一个运行在诸如Windows或Linux平台上，能够“解释”机器指令集的用户程序，它也创建了一个虚拟机。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10566-10568的标注 | 添加于 2019年4月14日星期日 上午10:48:39

两种情况下，运行在管理程序上的操作系统都称为客户操作系统（guest operating system）。在II型管理程序的情况下，运行在硬件上的操作系统称为宿主操作系统（host operating system）。 在两种情况下，虚拟机都必须像真实机器一样工作，认识到这一点非常重要。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10566-10568的标注 | 添加于 2019年4月14日星期日 上午10:48:53

两种情况下，运行在管理程序上的操作系统都称为客户操作系统（guest operating system）。在II型管理程序的情况下，运行在硬件上的操作系统称为宿主操作系统（host operating system）。 在两种情况下，虚拟机都必须像真实机器一样工作，认识到这一点非常重要。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10570-10571的标注 | 添加于 2019年4月14日星期日 上午10:51:17

虚拟机有两种类型的原因与Intel 386体系结构的缺陷有关，而这些缺陷在20年间以向后兼容的名义被盲目地不断推进到新的CPU中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10572-10573的标注 | 添加于 2019年4月14日星期日 上午10:51:41

等。Popek和Goldberg（1974）两人在他们的经典虚拟化工作中称这些指令为敏感指令（sensitive instruction）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10572-10574的标注 | 添加于 2019年4月14日星期日 上午10:52:04

等。Popek和Goldberg（1974）两人在他们的经典虚拟化工作中称这些指令为敏感指令（sensitive instruction）。还有一些指令如果在用户态下执行会引起陷入。Popek和Goldberg称它们是特权指令（privileged instruction）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10572-10572的标注 | 添加于 2019年4月14日星期日 上午10:52:24

一组只能在内核态执行的指令集合，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10574-10575的标注 | 添加于 2019年4月14日星期日 下午1:10:48

，当且仅当敏感指令是特权指令的子集时，机器才是可虚拟化的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10579-10580的标注 | 添加于 2019年4月14日星期日 下午1:27:40

。除了某些指令在用户态不能陷入之外，还有一些指令可以在用户态读取敏感状态而不引起陷入
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10582-10583的标注 | 添加于 2019年4月14日星期日 下午1:29:08

从2005年开始，Intel和AMD公司在它们的处理器上引进了虚拟化技术，从而使问题得到了解决。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10582-10584的标注 | 添加于 2019年4月14日星期日 下午1:31:01

从2005年开始，Intel和AMD公司在它们的处理器上引进了虚拟化技术，从而使问题得到了解决。在Intel Core 2CPU上，这种技术称为VT（Virtualization Technology）。在AMD Pacific CPU上，这种技术称为SVM（Secure Virtual Machine）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10584-10585的标注 | 添加于 2019年4月14日星期日 下午1:31:15

处。基本的思想是创建容器使得虚拟机可以在其内运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10590-10590的标注 | 添加于 2019年4月14日星期日 下午1:33:09

8.3.2　I型管理程序 可虚拟化是一个重要的问题
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10590-10590的标注 | 添加于 2019年4月14日星期日 下午1:33:16

8.3.2
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10591-10591的标注 | 添加于 2019年4月14日星期日 下午1:33:27

在图8-26中，我们可以看到一个支持一台虚拟机的I型管理程序。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10591-10592的标注 | 添加于 2019年4月14日星期日 下午1:38:28

在图8-26中，我们可以看到一个支持一台虚拟机的I型管理程序。像所有的I型管理程序一样，它在裸机上运行。虚拟机在用户态以用户进程的身份运行，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10592-10594的标注 | 添加于 2019年4月14日星期日 下午1:38:42

指令。虚拟机内运行着一个客户操作系统，该客户操作系统认为自己是运行在内核态的，但是实际上它是运行在用户态的。我们把这种状态称为虚拟内核态（virtual kernel mode）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10600-10600的标注 | 添加于 2019年4月14日星期日 下午1:41:50

在支持VT技术的处理器上，当客户操作系统运行一条敏感指令时，发生到内核的陷入，如图8-26所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10600-10601的标注 | 添加于 2019年4月14日星期日 下午1:43:15

在支持VT技术的处理器上，当客户操作系统运行一条敏感指令时，发生到内核的陷入，如图8-26所示。管理程序分析指令，查看它是来自于虚拟机中的客户操作系统还是来自于虚拟机中的用户程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10606-10606的标注 | 添加于 2019年4月14日星期日 下午1:43:34

8.3.3　II型管理程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10607-10608的标注 | 添加于 2019年4月14日星期日 下午1:43:50

在一台虚拟机上运行完整的操作系统是不可行的，因为（一些）敏感指令会被忽略掉，从而导致系统崩溃
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10609-10610的标注 | 添加于 2019年4月14日星期日 下午1:44:14

示。最早的一代产品是VMware（Adams和Agesen，2006；以及Waldspurger，2002），它是斯坦福大学（Bugnion等人，1997）DISCO研究项目的发展成果。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10609-10611的标注 | 添加于 2019年4月14日星期日 下午1:46:13

示。最早的一代产品是VMware（Adams和Agesen，2006；以及Waldspurger，2002），它是斯坦福大学（Bugnion等人，1997）DISCO研究项目的发展成果。VMware在Windows或Linux的宿主操作系统上作为普通用户程序运行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10613-10613的标注 | 添加于 2019年4月14日星期日 下午1:46:38

研究VMware是如何工作的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10613-10615的标注 | 添加于 2019年4月14日星期日 下午1:48:05

研究VMware是如何工作的。当运行一个Pentium二进制文件的时候，这个二进制文件可能来自于安装光盘或虚拟磁盘，VMware首先浏览代码段以寻找基本块（basic block）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10613-10613的标注 | 添加于 2019年4月14日星期日 下午1:48:22

研究VMware是如何工作的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10614-10616的标注 | 添加于 2019年4月14日星期日 下午1:48:36

磁盘，VMware首先浏览代码段以寻找基本块（basic block）。所谓基本块，是指以jump指令、call指令、trap指令或其他改变控制流的指令结束的可顺序运行的指令序列
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10616-10617的标注 | 添加于 2019年4月14日星期日 下午1:51:44

检查基本块是为了找出该基本块中是否含有敏感指令（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10619-10619的标注 | 添加于 2019年4月14日星期日 下午1:52:04

上述操作完成之后，基本块在VMware中缓存并执行
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10620-10621的标注 | 添加于 2019年4月14日星期日 下午1:52:19

。这种技术称为二进制翻译（binary translation）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10620-10621的标注 | 添加于 2019年4月14日星期日 下午1:52:23

它就是在裸机上运行的。通过这种方式找出、仿真敏感指令。这种技术称为二进制翻译（binary translation）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10620-10621的标注 | 添加于 2019年4月14日星期日 下午1:52:30

通过这种方式找出、仿真敏感指令。这种技术称为二进制翻译（binary translation）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10621-10621的标注 | 添加于 2019年4月14日星期日 下午1:52:47

基本块执行结束之后，控制返回到VMware，它会定位下一个基本块的位置
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10623-10624的标注 | 添加于 2019年4月14日星期日 下午1:54:44

多优化方法得到了运用，例如，如果一个基本块跳转或调用另一个基本块，最后一条指令被一条跳转或调用已翻译好的基本块的指令所代替，从而节省了寻找后续基本块的开销。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10625-10627的标注 | 添加于 2019年4月14日星期日 下午1:55:30

即使在不可虚拟化的硬件上，II型管理程序也能正常工作的原因就已经很清楚了：所有的敏感指令被仿真这些指令的过程调用所替
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10625-10627的标注 | 添加于 2019年4月14日星期日 下午1:55:42

即使在不可虚拟化的硬件上，II型管理程序也能正常工作的原因就已经很清楚了：所有的敏感指令被仿真这些指令的过程调用所替代。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10629-10631的标注 | 添加于 2019年4月14日星期日 下午1:56:20

其结果显示，支持VT技术的硬件使用陷入——仿真的方法会引起太多的陷入，而在现代硬件上，陷入的代价是非常昂贵的，它们会清空处理器内的缓存、TLB和分支预测表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10631-10632的标注 | 添加于 2019年4月14日星期日 下午1:56:50

正如Adams和Agesen所指出的，根据工作负载的不同，软件有的时候会击败硬件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10636-10637的标注 | 添加于 2019年4月14日星期日 下午1:57:26

8.3.4　准虚拟化 运行在I型和II型管理程序之上的都是没有修改过的客户操作系统，但是这两类管理程序为了获得合理的性能都备受煎熬。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10636-10638的标注 | 添加于 2019年4月14日星期日 下午1:57:56

8.3.4　准虚拟化 运行在I型和II型管理程序之上的都是没有修改过的客户操作系统，但是这两类管理程序为了获得合理的性能都备受煎熬。另一个逐渐开始流行起来的处理方法是更改客户操作系统的源代码，从而略过敏感指令的执行，转而调用管理程序调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10639-10640的标注 | 添加于 2019年4月14日星期日 下午2:01:24

当采用这种方法时，管理程序必须定义由过程调用集合组成的接口以供客户操作系统使用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10641-10644的标注 | 添加于 2019年4月14日星期日 下午2:02:20

从操作系统中移除所有的敏感指令，只让操作系统调用管理程序调用（hypervisor call）来获得诸如I/O操作等系统服务，通过这种方式我们就已经把管理程序变成了一个微内核，如图1-26所示。一些或全部敏感指令有意移除的客户操作系统称为准虚拟化的（paravirtualized）（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10645-10647的标注 | 添加于 2019年4月14日星期日 下午2:05:02

义。让客户操作系统直接调用管理程序（或者微内核）完成I/O操作等任务会更好。之前的管理程序都选择模拟完整的计算机，其主要原因在于客户操作系统的源代码不可获得（如Windows）、或源代码种类太多样（如Linux）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10649-10649的标注 | 添加于 2019年4月14日星期日 下午2:05:13

全虚拟化和准虚拟化之间的区别如图8-27所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10653-10653的标注 | 添加于 2019年4月14日星期日 下午2:06:38

如图8-27所示，管理程序被一条虚线分成两个部分
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10653-10655的标注 | 添加于 2019年4月14日星期日 下午2:10:07

如图8-27所示，管理程序被一条虚线分成两个部分。而在现实中，只有一个程序在硬件上运行。它的一部分用来解释陷入的敏感指令，这种情况下，请参照Windows一边。另一部分用来执行管理程序例程。在图8-27中，后一部分被标记为“微内核”。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10657-10658的标注 | 添加于 2019年4月14日星期日 下午2:22:54

I型管理程序和微内核之间的界限越来越模糊，当管理程序获得越来越多的功能和例程时，这个界限变得更加不清晰。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10658-10659的标注 | 添加于 2019年4月14日星期日 下午2:23:09

：以内核态运行在硬件上的程序应当短小、可靠，由数千行代码而不是数百万行代码组成
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10662-10663的标注 | 添加于 2019年4月14日星期日 下午3:03:52

对客户操作系统进行准虚拟化引起了很多问题。第一，如果所有的敏感指令都被管理程序例程所代替，操作系统如何在物理机器上运行呢？
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10663-10663的标注 | 添加于 2019年4月14日星期日 下午3:04:12

。第二，如果市场上有很多种管理程序，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10665-10666的标注 | 添加于 2019年4月14日星期日 下午3:04:46

Amsden等人（2006）提出了一个解决方案。在他们的模型当中，当内核需要执行一些敏感操作时会转而调用特殊的例程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10665-10667的标注 | 添加于 2019年4月14日星期日 下午4:41:35

Amsden等人（2006）提出了一个解决方案。在他们的模型当中，当内核需要执行一些敏感操作时会转而调用特殊的例程。这些特殊的例程，称作VMI（虚拟机接口），形成的低层与硬件或管理程序进行交互。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10667-10668的标注 | 添加于 2019年4月14日星期日 下午4:41:42

这种技术的一个示例如图8-28所示，这是一个准虚拟化的Linux版本，称为VMI Linux（VMIL）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10667-10670的标注 | 添加于 2019年4月14日星期日 下午4:42:31

这种技术的一个示例如图8-28所示，这是一个准虚拟化的Linux版本，称为VMI Linux（VMIL）。当VMI Linux运行在硬件上的时候，它链接到一个发射敏感指令来完成工作的函数库，如图8-28a所示。当它运行在管理程序上，如VMware或Xen，客户操作系统链接到另一个函数库，该函数库提供对下层管理程序的适当（或不同）例程调用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10667-10671的标注 | 添加于 2019年4月14日星期日 下午4:42:46

这种技术的一个示例如图8-28所示，这是一个准虚拟化的Linux版本，称为VMI Linux（VMIL）。当VMI Linux运行在硬件上的时候，它链接到一个发射敏感指令来完成工作的函数库，如图8-28a所示。当它运行在管理程序上，如VMware或Xen，客户操作系统链接到另一个函数库，该函数库提供对下层管理程序的适当（或不同）例程调用。通过这种方式，操作系统的内核保持了可移植性和高效性，可以适应不同的管理程序。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10673-10678的标注 | 添加于 2019年4月14日星期日 下午4:43:21

关于虚拟机接口还有很多其他的建议。其中比较流行的一个是paravirt ops。它的主要思想与我们上面所介绍的相似，但是在细节上有所不同。 8.3.5　内存的虚拟化 现在我们已经知道了如何虚拟化处理器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10673-10677的标注 | 添加于 2019年4月14日星期日 下午4:43:30

关于虚拟机接口还有很多其他的建议。其中比较流行的一个是paravirt ops。它的主要思想与我们上面所介绍的相似，但是在细节上有所不同。 8.3.5　内存的虚拟化
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10679-10680的标注 | 添加于 2019年4月14日星期日 下午4:43:53

几乎全部的现代操作系统都支持虚拟内存，即从虚拟地址空间到物理地址空间的页面映射。这个映射由（多级）页表所定义。通过操作系统设置处理器中的控制寄存器，使之指向顶级页表，从而动态设置页面映射
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10679-10681的标注 | 添加于 2019年4月14日星期日 下午4:44:00

几乎全部的现代操作系统都支持虚拟内存，即从虚拟地址空间到物理地址空间的页面映射。这个映射由（多级）页表所定义。通过操作系统设置处理器中的控制寄存器，使之指向顶级页表，从而动态设置页面映射。虚拟化技术使得内存管理更加复杂。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10682-10684的标注 | 添加于 2019年4月14日星期日 下午4:44:59

建立包含这种映射关系的页表，加载指向顶级页表的硬件寄存器。这条指令是敏感指令。在支持VT技术的处理器上，将会引起陷入；在VMware管理程序上，它将会调用VMware例程；在准虚拟化的客户操作系统中，它将会调用管理程序调用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10685-10687的标注 | 添加于 2019年4月14日星期日 下午4:45:36

管理程序会怎么做呢？一种解决办法是把物理页面10、11、12分配给这台虚拟机，然后建立真实的页表使之分别映射到该虚拟机的虚拟页面7、4、3，随后使用这些页面。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10687-10687的标注 | 添加于 2019年4月14日星期日 下午4:48:14

假设第二台虚拟机启动，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10689-10690的标注 | 添加于 2019年4月14日星期日 下午4:48:24

它可以找到其他空闲页面，比如说20、21、22并使用它们，但是在此之前，它需要创建一个新的页表完成虚拟页面4、5、6到物理页面20、21、22的映射。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10691-10692的标注 | 添加于 2019年4月14日星期日 下午4:48:38

。总之，管理程序必须为每一台虚拟机创建一个影子页表（shadow page table），用以实现该虚拟机使用的虚拟页面到管理程序分配给它的物理页面之间的映射。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10693-10693的标注 | 添加于 2019年4月14日星期日 下午4:49:14

但更糟糕的是，每次客户操作系统改变它的页表，管理程序必须相应地改变其影子页表。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10696-10697的标注 | 添加于 2019年4月14日星期日 下午4:49:51

一种可能的（也很笨拙的）解决方式是，管理程序监视客户虚拟内存中保存顶级页表的内存页。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10701-10701的标注 | 添加于 2019年4月14日星期日 下午4:52:34

这种方法并不好，但它在理论上是可行的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10701-10702的标注 | 添加于 2019年4月14日星期日 下午4:53:54

在这方面，将来的VT技术可以通过硬件实现两级映射从而提供一些帮助
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10705-10706的标注 | 添加于 2019年4月14日星期日 下午4:54:13

在准虚拟化的操作系统中，情况是不同的。这时，准虚拟化的客户操作系统知道当它结束的时候需要更改进程页表，此时它需要通知管理程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10705-10706的标注 | 添加于 2019年4月14日星期日 下午4:54:20

在准虚拟化的操作系统中，情况是不同的。这时，准虚拟化的客户操作系统知道当它结束的时候需要更改进程页表，此时它需要通知管理程序。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10708-10709的标注 | 添加于 2019年4月14日星期日 下午4:54:51

效率会高很多。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10711-10711的标注 | 添加于 2019年4月14日星期日 下午4:55:15

8.3.6　I/O设备的虚拟化
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10712-10714的标注 | 添加于 2019年4月14日星期日 下午4:56:35

客户操作系统在启动的时候会探测硬件以找出当前系统中都连接了哪种类型的I/O设备。这些探测会陷入到管理程序。那么管理程序会怎么做呢？一种方法是向客户操作系统报告设备信息
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10718-10719的标注 | 添加于 2019年4月14日星期日 下午4:59:06

是管理程序在物理磁盘上为每一个虚拟机创建一个文件或区域作为它的物理磁盘
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10717-10717的标注 | 添加于 2019年4月14日星期日 下午4:59:45

现在我们有一个问题。每一个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10717-10718的标注 | 添加于 2019年4月14日星期日 下午4:59:59

每一个客户操作系统都认为它拥有全部的磁盘分区，而同时实际上虚拟机的数量比磁盘分区数多得多
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10720-10721的标注 | 添加于 2019年4月14日星期日 下午5:01:23

客户操作系统正在使用的磁盘也许跟真实的磁盘不同
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10723-10724的标注 | 添加于 2019年4月14日星期日 下午5:02:28

，虚拟机对硬件设备重映射的能力证实VM/370流行的原因：公司想要买更新更快的硬件，但是不想更改它们的软件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10725-10726的标注 | 添加于 2019年4月14日星期日 下午5:02:56

另一个必须解决的I/O问题是DMA技术的应用。DMA技术使用的是绝对物理内存地址。我们希望，管理程序在DMA操作开始之前介入，并完成地址的转换。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10725-10725的标注 | 添加于 2019年4月14日星期日 下午5:03:10

另一个必须解决的I/O问题是DMA技术的应用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10726-10726的标注 | 添加于 2019年4月14日星期日 下午5:03:16

希望，管理程序在DMA操作开始之前介入，并完成地址的转换。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10726-10726的标注 | 添加于 2019年4月14日星期日 下午5:03:20

地址。我们希望，管理程序在DMA操作开始之前介入，并完成地址的转换。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10726-10726的标注 | 添加于 2019年4月14日星期日 下午5:03:25

我们希望，管理程序在DMA操作开始之前介入，并完成地址的转换。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10726-10727的标注 | 添加于 2019年4月14日星期日 下午5:03:57

带有I/O MMU的硬件出现了，它按照MMU虚拟内存的方式对I
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10726-10727的标注 | 添加于 2019年4月14日星期日 下午5:04:02

带有I/O MMU的硬件出现了，它按照MMU虚拟内存的方式对I/O进行虚拟化。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10727-10728的标注 | 添加于 2019年4月14日星期日 下午5:04:22

另一种处理I/O操作的方法是让其中一个虚拟机运行标准的操作系统，并把其他虚拟机的I/O请求全部反射给它去处理。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10731-10731的标注 | 添加于 2019年4月14日星期日 下午5:04:58

Xen使用这种方法处理I/O操作，其中完成I/O操作的虚拟机称为domain0。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10732-10733的标注 | 添加于 2019年4月14日星期日 下午5:05:21

在I/O设备虚拟化方面，II型管理程序相对于I型管理程序所具备的优势在于：宿主操作系统包含了所有连接到计算机上的所有怪异的I/O设备的驱动程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10735-10736的标注 | 添加于 2019年4月14日星期日 下午5:07:37

。随着虚拟技术的成熟，将来的硬件也许会让应用程序以一种安全的方式直接访问硬件，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10739-10739的标注 | 添加于 2019年4月14日星期日 下午5:07:50

8.3.7　虚拟工具
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10740-10741的标注 | 添加于 2019年4月14日星期日 下午5:08:15

虚拟机为长期困扰用户（特别是使用开源软件的用户）的问题提供了一种有趣的解决方案：如何安装新的应用程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10740-10741的标注 | 添加于 2019年4月14日星期日 下午5:08:20

虚拟机为长期困扰用户（特别是使用开源软件的用户）的问题提供了一种有趣的解决方案：如何安装新的应用程序。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10742-10744的标注 | 添加于 2019年4月14日星期日 下午5:08:59

使用虚拟机技术，一个软件开发人员能够仔细地创建一个虚拟机，装入所需的操作系统、编译器、函数库和应用程序代码，组成一个整体来运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10746-10747的标注 | 添加于 2019年4月14日星期日 下午5:09:55

这些被包装好的虚拟机通常叫做虚拟工具（virtual appliance）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10749-10750的标注 | 添加于 2019年4月14日星期日 下午5:10:01

8.3.8　多核处理机上的虚拟机
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10750-10751的标注 | 添加于 2019年4月14日星期日 下午5:10:53

可以在软件中指定可用的处理机数量。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10754-10754的标注 | 添加于 2019年4月14日星期日 下午5:11:05

虽然还不普遍，但是在虚拟机之间是可能实现共享内存的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10754-10755的标注 | 添加于 2019年4月14日星期日 下午5:11:10

虽然还不普遍，但是在虚拟机之间是可能实现共享内存的。所需要完成的工作就是将物理页面映射到多个虚拟机的地址空间当中
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10757-10757的标注 | 添加于 2019年4月14日星期日 下午5:11:30

多核、虚拟机、管理程序和微内核的结合将从根本上改变人们对计算机系统的认知
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10758-10759的标注 | 添加于 2019年4月14日星期日 下午5:12:08

程序员确定需要多少个处理机，这些处理机是应该组成一个多计算机系统还是一个多处理机，以及在某种情况下最少的内核数量需求到底是多少。将来的软件将处理这些问题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10762-10762的标注 | 添加于 2019年4月14日星期日 下午5:12:14

8.3.9　授权问题
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10762-10763的标注 | 添加于 2019年4月14日星期日 下午5:12:23

大部分软件是基于每个处理器授权的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10766-10767的标注 | 添加于 2019年4月14日星期日 下午5:13:20

在某些情况下，软件商在许可证（license）中加入明确的条款，禁止在虚拟机或未授权的虚拟机中使用该软件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10771-10773的标注 | 添加于 2019年4月14日星期日 下午5:17:52

系统（distributed system）。这些系统与多计算机类似，每个节点都有自己的私有存储器，整个系统中没有共享的物理存储器。但是，分布式系统与多计算机相比，耦合更加松散。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10774-10775的标注 | 添加于 2019年4月14日星期日 下午6:37:10

，分布式系统中的每个节点都是一台完整的计算机，带有全部的外部设备。其次，一台多计算机的所有节点一般就在一个房间里，这样它们
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10774-10778的标注 | 添加于 2019年4月14日星期日 下午6:37:18

，分布式系统中的每个节点都是一台完整的计算机，带有全部的外部设备。其次，一台多计算机的所有节点一般就在一个房间里，这样它们可以通过专门的高速网络通信，而分布式系统中的节点则可能分散在全世界范围内。最后，一台多计算机的所有节点运行同样的操作系统，共享一个文件系统，并处在一个共同的管理之下，而一个分布式系统的节点可以运行不同的操作系统，每个节点有自己的文件系统，并且处在不同的管理之下。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10774-10778的标注 | 添加于 2019年4月14日星期日 下午6:37:27

，分布式系统中的每个节点都是一台完整的计算机，带有全部的外部设备。其次，一台多计算机的所有节点一般就在一个房间里，这样它们可以通过专门的高速网络通信，而分布式系统中的节点则可能分散在全世界范围内。最后，一台多计算机的所有节点运行同样的操作系统，共享一个文件系统，并处在一个共同的管理之下，而一个分布式系统的节点可以运行不同的操作系统，每个节点有自己的文件系统，并且处在不同的管理之下。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10779-10781的标注 | 添加于 2019年4月14日星期日 下午6:37:54

在图8-29中，对多处理机、多计算机和分布式系统就上述各点进行了比较。 图　8-29　三类多CPU系统的比较
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10782-10782的标注 | 添加于 2019年4月14日星期日 下午6:49:01

“多计算机是更像多处理机还是更像分布式系统？
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10783-10783的标注 | 添加于 2019年4月14日星期日 下午6:49:11

。从技术角度来看，多处理机有共享存储器而其他两类没有。这个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10783-10784的标注 | 添加于 2019年4月14日星期日 下午6:49:17

。从技术角度来看，多处理机有共享存储器而其他两类没有。这个差别导致了不同的程序设计模式和不同的思考方式
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10783-10783的标注 | 添加于 2019年4月14日星期日 下午6:49:25

。从技术角度来看，多处理机有共享存储器而其他两类没有。这个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10783-10783的标注 | 添加于 2019年4月14日星期日 下午6:49:28

。从技术角度来看，多处理机有共享存储器而其他两类没有。这个
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10783-10783的标注 | 添加于 2019年4月14日星期日 下午6:49:31

。从技术角度来看，多处理机有共享存储器而其他两类没有
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10784-10785的标注 | 添加于 2019年4月14日星期日 下午6:49:44

从应用角度来看，多处理机和多计算机都不过是在机房中的大设备机架（rack）罢了，而在全部依靠Internet连接计算机的分布式系统中显然通信要多于计算，并且以不同的方式使用着。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10785-10786的标注 | 添加于 2019年4月14日星期日 下午6:51:17

在某种程度上，分布式系统中计算机的松散耦合既是优点又是缺点。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10788-10789的标注 | 添加于 2019年4月14日星期日 下午6:51:33

典型的Internet应用有远程计算机访问（使用telnet、ssh和rlogin）、远程信息访问（使用万维网（World Wide Web）和FTP，即文件传输协议）、人际通信（使用e-mail和聊天程序）以及正在浮现的许多应用（例如，电子商务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10788-10789的标注 | 添加于 2019年4月14日星期日 下午6:52:13

典型的Internet应用有远程计算机访问（使用telnet、ssh和rlogin）、远程信息访问（使用万维网（World Wide Web）和FTP，即文件传输协议）、人际通信（使用e-mail和聊天程序）以及正在浮现的许多应用（例如，电子商务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10788-10790的标注 | 添加于 2019年4月14日星期日 下午6:52:44

典型的Internet应用有远程计算机访问（使用telnet、ssh和rlogin）、远程信息访问（使用万维网（World Wide Web）和FTP，即文件传输协议）、人际通信（使用e-mail和聊天程序）以及正在浮现的许多应用（例如，电子商务、远程医疗以及远程教育等）。所有
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10788-10790的标注 | 添加于 2019年4月14日星期日 下午6:52:53

典型的Internet应用有远程计算机访问（使用telnet、ssh和rlogin）、远程信息访问（使用万维网（World Wide Web）和FTP，即文件传输协议）、人际通信（使用e-mail和聊天程序）以及正在浮现的许多应用（例如，电子商务、远程医疗以及远程教育等）。所有这些应用带来的问题是，每个应用都得重新开发。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10794-10795的标注 | 添加于 2019年4月14日星期日 下午6:53:37

分布式系统添加在其底层网络
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10794-10795的标注 | 添加于 2019年4月14日星期日 下午6:53:40

分布式系统添加在其底层网络上的是一些通用范型（模型
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10794-10795的标注 | 添加于 2019年4月14日星期日 下午6:53:48

分布式系统添加在其底层网络上的是一些通用范型（模型），它们提供了一种统一的方法来观察整个系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10797-10798的标注 | 添加于 2019年4月14日星期日 下午6:59:27

在上下文稍有差别的情形下，统一范例的一个简单例子可以在UNIX中找到。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10794-10796的标注 | 添加于 2019年4月14日星期日 下午6:59:43

分布式系统添加在其底层网络上的是一些通用范型（模型），它们提供了一种统一的方法来观察整个系统。分布式系统想要做的是，将松散连接的大量机器转化为基于一种概念的一致系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10794-10797的标注 | 添加于 2019年4月14日星期日 下午6:59:52

分布式系统添加在其底层网络上的是一些通用范型（模型），它们提供了一种统一的方法来观察整个系统。分布式系统想要做的是，将松散连接的大量机器转化为基于一种概念的一致系统。这些范型有的比较简单，而有的是很复杂的，但是其思想则总是提供某些东西用来统一整个系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10800-10801的标注 | 添加于 2019年4月14日星期日 下午8:29:20

分布式系统面对不同硬件和操作系统实现某种统一性的途径是，在操作系统的顶部添加一层软件。这层软件称为中间件（middleware），如图8-30所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10800-10802的标注 | 添加于 2019年4月14日星期日 下午8:29:34

分布式系统面对不同硬件和操作系统实现某种统一性的途径是，在操作系统的顶部添加一层软件。这层软件称为中间件（middleware），如图8-30所示。这层软件提供了一些特定的数据结构和操作，从而允许散布的机器上的进程和用户用一致的方式互操作。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10803-10804的标注 | 添加于 2019年4月14日星期日 下午8:30:08

在某种意义上，中间件像是分布式系统的操作系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10804-10805的标注 | 添加于 2019年4月14日星期日 下午8:30:22

。不过另一方面，中间件又不是真正的操作系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10806-10808的标注 | 添加于 2019年4月14日星期日 下午8:30:52

在本章余下的部分，首先我们将快速考察在分布式系统（下层的计算机网络）中使用的硬件，然后是其通信软件（网络协议）。接着我们将考虑在这些系统中的各种范型。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10808-10808的标注 | 添加于 2019年4月14日星期日 下午8:30:59

8.4.1　网络硬件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10808-10809的标注 | 添加于 2019年4月14日星期日 下午8:32:25

分布式系统构建在计算机网络的上层，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10809-10810的标注 | 添加于 2019年4月14日星期日 下午8:32:36

网络主要有两种，覆盖一座建筑物或一个校园的LAN（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10809-10809的标注 | 添加于 2019年4月14日星期日 下午8:32:45

计算机网络
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10809-10810的标注 | 添加于 2019年4月14日星期日 下午8:33:21

网络主要有两种，覆盖一座建筑物或一个校园的LAN（局域网，Local Area Networks）和可用于城市、乡村甚至世界范围的WAN（广域网，Wide Area Network）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10809-10811的标注 | 添加于 2019年4月14日星期日 下午8:33:33

网络主要有两种，覆盖一座建筑物或一个校园的LAN（局域网，Local Area Networks）和可用于城市、乡村甚至世界范围的WAN（广域网，Wide Area Network）。最重要的LAN类型是以太网（Ethernet），所以我们把它作为LAN的范例来考察。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10809-10811的标注 | 添加于 2019年4月14日星期日 下午8:35:33

网络主要有两种，覆盖一座建筑物或一个校园的LAN（局域网，Local Area Networks）和可用于城市、乡村甚至世界范围的WAN（广域网，Wide Area Network）。最重要的LAN类型是以太网（Ethernet），所以我们把它作为LAN的范例来考察。至于WAN的例子，我们将考察Internet，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10813-10815的标注 | 添加于 2019年4月14日星期日 下午8:36:30

1.以太网（Ethernet） 经典的以太网，在IEEE802.3标准中有具体描述，由用来连接若干计算机的同轴电缆组成。这些电缆之所以称为以太网（Ethernet），是源于发光以太，人们曾经认为电磁辐射是通过以太传播的。（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10818-10819的标注 | 添加于 2019年4月14日星期日 下午9:40:35

在以太网的非常早的第一个版本中，计算机与钻了半截孔的电缆通过一端固定在这些孔中而另一端与计算机连接的电线相连接
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10818-10819的标注 | 添加于 2019年4月14日星期日 下午9:40:58

在以太网的非常早的第一个版本中，计算机与钻了半截孔的电缆通过一端固定在这些孔中而另一端与计算机连接的电线相连接。它们被称为插入式分接头（vampire tap），如图8-31a中所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10823-10824的标注 | 添加于 2019年4月14日星期日 下午9:42:10

计算机便开始传送一个包，其中有一个短包头，随后是0到1500字节的有效信息载荷（payload）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10822-10824的标注 | 添加于 2019年4月14日星期日 下午9:42:20

要在以太网上发送包，计算机首先要侦听电缆，看看是否有其他的计算机正在进行传输。如果没有，这台计算机便开始传送一个包，其中有一个短包头，随后是0到1500字节的有效信息载荷（payload）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10825-10825的标注 | 添加于 2019年4月14日星期日 下午9:42:37

如果两台计算机同时开始发送，就会导致冲突发生，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10825-10826的标注 | 添加于 2019年4月14日星期日 下午9:42:41

如果两台计算机同时开始发送，就会导致冲突发生，两台机器都做检测。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10827-10828的标注 | 添加于 2019年4月14日星期日 下午9:43:45

在每个后续的冲突中，最大等待间隔加倍，用以减少更多碰撞的机会。这个算法称为二进制指数补偿算法（binary exponential backoff）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10825-10826的标注 | 添加于 2019年4月14日星期日 下午9:44:17

如果两台计算机同时开始发送，就会导致冲突发生，两台机器都做检测。两机都用中断其传输来响应检测到的碰撞，然后在等待一个从0到T微秒的随机时间段之后，再重新开始。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10829-10830的标注 | 添加于 2019年4月14日星期日 下午9:48:42

以太网有其最大电缆长度限制，以及可连接的最多的计算机台数限制
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10829-10831的标注 | 添加于 2019年4月14日星期日 下午11:20:08

以太网有其最大电缆长度限制，以及可连接的最多的计算机台数限制。要想超过其中一个的限制，就要在一座大建筑物或校园中连接多个以太网，然后用一种称为桥接器（bridge）的设备把这些以太网连接起来
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10832-10833的标注 | 添加于 2019年4月15日星期一 上午12:07:09

为了避免碰撞问题，现代以太网使用交换机（switch），如图8-31b所示。每
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10832-10833的标注 | 添加于 2019年4月15日星期一 上午12:07:23

为了避免碰撞问题，现代以太网使用交换机（switch），如图8-31b所示。每个交换机有若干个端口，一个端口用于连接一台计算机、一个以太网或另一个交换机。当
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10837-10837的标注 | 添加于 2019年4月15日星期一 上午12:07:48

2.因特网
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10837-10838的标注 | 添加于 2019年4月15日星期一 上午12:08:02

Internet由ARPANET（美国国防部高级研究项目署资助的一个实验性的分组交换网络）演化而来。它
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10841-10841的标注 | 添加于 2019年4月15日星期一 上午12:08:23

ARPANET在20世纪70年代迅速地成长，结果拥
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10843-10843的标注 | 添加于 2019年4月15日星期一 上午12:08:52

Internet包括了两类计算机，主机和路由器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10843-10844的标注 | 添加于 2019年4月15日星期一 上午12:09:06

Internet包括了两类计算机，主机和路由器。主机（host）有PC机、笔记本计算机、掌上电脑，服务器、大型计算机以及其他那些个人或公司所有且希望与Internet连接的计算机。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10843-10845的标注 | 添加于 2019年4月15日星期一 上午12:09:56

Internet包括了两类计算机，主机和路由器。主机（host）有PC机、笔记本计算机、掌上电脑，服务器、大型计算机以及其他那些个人或公司所有且希望与Internet连接的计算机。路由器（router）是专用的交换计算机，它在许多进线中的一条线上接收进来的包，并在许多个出口线中的一条线上按照其路径发送包。路
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10848-10849的标注 | 添加于 2019年4月15日星期一 上午12:10:25

图8-32展示了Internet的一部分。在图的顶部是其主干网（backbone）之一，通常由主干网操作员管理。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10848-10850的标注 | 添加于 2019年4月15日星期一 上午12:10:35

图8-32展示了Internet的一部分。在图的顶部是其主干网（backbone）之一，通常由主干网操作员管理。它包括了大量通过宽带光纤连接的路由器，同时连接着其他（竞争）电话公司运行管理的主干网。除了
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10852-10854的标注 | 添加于 2019年4月15日星期一 上午12:11:07

地区网络和ISP的路由器通过中等速度的光纤连接到主干网上。依次，每个配备路由器的公司以太网连接到地区网络的路由器上。而ISP的路由器则被连接到供ISP客户们使用的调制解调器汇集器（bank）上。按照
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10855-10856的标注 | 添加于 2019年4月15日星期一 上午12:11:34

在Internet上的所有通信都以包（packet）的形式传送。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10855-10856的标注 | 添加于 2019年4月15日星期一 上午12:13:03

在Internet上的所有通信都以包（packet）的形式传送。每个包在其内部携带着目的地的地址，而这个地址是供路由器使用的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10858-10859的标注 | 添加于 2019年4月15日星期一 上午12:13:18

路由表是高度动态的，并且随着路由器和链路的损坏、恢复以及通信条件的变化在连续不断地
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10858-10859的标注 | 添加于 2019年4月15日星期一 上午12:13:21

路由表是高度动态的，并且随着路由器和链路的损坏、恢复以及通信条件的变化在连续不断地更新。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10862-10862的标注 | 添加于 2019年4月15日星期一 上午12:13:27

8.4.2　网络服务和协议
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10862-10863的标注 | 添加于 2019年4月15日星期一 上午12:13:51

所有的计算机网络都为其用户（主机和进程）提供一定的服务，这种服务通过某些关于合法消息交换的规则加以实现。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10863-10864的标注 | 添加于 2019年4月15日星期一 上午12:13:58

1.网络服务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10864-10865的标注 | 添加于 2019年4月15日星期一 上午12:14:09

面向连接的服务是对电话系统的一种模仿。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10866-10866的标注 | 添加于 2019年4月15日星期一 上午12:14:36

连接。一个连接的基本
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10866-10867的标注 | 添加于 2019年4月15日星期一 上午12:14:46

一个连接的基本作用则像一根管道：发送者在一端把物品（信息位）推入管道，而接收者则按照相同的顺序在管道的另一端取出它们。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10867-10868的标注 | 添加于 2019年4月15日星期一 上午12:14:52

相反，无连接服务则是对邮政系统的一种模仿
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10871-10871的标注 | 添加于 2019年4月15日星期一 上午12:15:08

每种服务可以用服务质量（quality of service）表征。有些
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10872-10873的标注 | 添加于 2019年4月15日星期一 上午12:15:32

可靠的服务是用以下方式实现的：接收者发回一个特别的确认包（acknowledgement packet），确认每个收到的消息，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10874-10875的标注 | 添加于 2019年4月15日星期一 上午12:15:42

一种适合可靠的、面向连接服务的典型场景是文件传送。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10876-10877的标注 | 添加于 2019年4月15日星期一 上午12:15:59

可靠的、面向连接的服务有两种轻微变种（minor variant）：消息序列和字节流。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10881-10882的标注 | 添加于 2019年4月15日星期一 上午12:16:30

而另一方面，在通过一个终端登录进入某个远程分时系统时，所需要的也只是从该终端到计算机的字节流。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10882-10882的标注 | 添加于 2019年4月15日星期一 上午8:30:23

对某些应用而言，由确认所引入的时延是不可接受的。一种
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10884-10884的标注 | 添加于 2019年4月15日星期一 上午8:32:06

并不是所有的应用都需要连接。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10885-10886的标注 | 添加于 2019年4月15日星期一 上午8:32:39

不可靠的（意味着没有确认）无连接服务，常常称作数据报服务（datagram service），它模拟了电报服务，这种服务也不为发送者提供回送确认的服务。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10888-10888的标注 | 添加于 2019年4月15日星期一 上午8:32:57

可以把确认数据报服务（acknowledged datagram service）提供给这些应用使用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10890-10890的标注 | 添加于 2019年4月15日星期一 上午8:35:54

还有一种服务是请求-应答服务（request-reply service）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10890-10891的标注 | 添加于 2019年4月15日星期一 上午8:36:01

还有一种服务是请求-应答服务（request-reply service）。在这种服务中，发送者传送一份包含一个请求的数据报；应答中含有答复
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10888-10889的标注 | 添加于 2019年4月15日星期一 上午8:36:14

可以把确认数据报服务（acknowledged datagram service）提供给这些应用使用。它类似于寄送一封挂号信并且要求得到一个返回收据
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10892-10892的标注 | 添加于 2019年4月15日星期一 上午8:36:34

在客户机-服务器模式的通信实现中常常采用请求-应答：客户机发出一个请求，而服务器则响应该请求
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10894-10894的标注 | 添加于 2019年4月15日星期一 上午8:37:00

2.网络协议
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10895-10895的标注 | 添加于 2019年4月15日星期一 上午8:38:28

所有网络都有高度专门化的规则，用以说明什么消息可以发送以及如何响应这些消息。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10897-10898的标注 | 添加于 2019年4月15日星期一 上午8:42:02

于特定计算机通信的这些规则的集合，称为协议（protocol）。有许多种协议，包括路由器-路由器协议、主机-主机协议以及其他协议等。要
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10899-10900的标注 | 添加于 2019年4月15日星期一 上午8:42:52

所有的现代网络都使用所谓的协议栈（protocol stack）把不同的协议一层一层叠加起来。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10899-10900的标注 | 添加于 2019年4月15日星期一 上午8:43:03

所有的现代网络都使用所谓的协议栈（protocol stack）把不同的协议一层一层叠加起来。每一层解决不同的问题
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10899-10902的标注 | 添加于 2019年4月15日星期一 上午8:46:21

所有的现代网络都使用所谓的协议栈（protocol stack）把不同的协议一层一层叠加起来。每一层解决不同的问题。例如，处于最低层的协议会定义如何识别比特流中的数据包的起始和结束位置。在更高一层上，协议会确定如何通过复杂的网络来把数据包从来源节点发送到目标节点
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10899-10902的标注 | 添加于 2019年4月15日星期一 上午8:46:37

所有的现代网络都使用所谓的协议栈（protocol stack）把不同的协议一层一层叠加起来。每一层解决不同的问题。例如，处于最低层的协议会定义如何识别比特流中的数据包的起始和结束位置。在更高一层上，协议会确定如何通过复杂的网络来把数据包从来源节点发送到目标节点。再高一层上，协议会确保多包消息中的所有数据包都按照合适的顺序正确到达。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10903-10904的标注 | 添加于 2019年4月15日星期一 上午8:47:00

大多数分布式系统都使用Internet作为基础，因此这些系统使用的关键协议是两种主要的Internet协议：IP和TCP。IP（Internet Protocol）是一种数据报协议，发送者可以向网络上发出长达64KB的数据报，并期望它能够到达
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10906-10907的标注 | 添加于 2019年4月15日星期一 上午8:47:19

当前有两个版本的IP在使用，即v4和v6。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10908-10909的标注 | 添加于 2019年4月15日星期一 上午8:47:49

每个v4包以一个40字节的包头开始，其中包含32位源地址和32位目标地址。这些地址就称为IP地址，它们构成了Internet中路由选择的基础。通常IP地址写作4个由点隔开的十进制数，每个数介于0～255之间，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10910-10912的标注 | 添加于 2019年4月15日星期一 上午8:48:23

既然IP数据报是非应答的，所以对于Internet的可靠通信仅仅使用IP是不够的。为了提供可靠的通信，通常在IP层之上使用另一种协议，TCP（Transmission Control Protocol，传输控制协议）。TCP使用IP来提供面向连接的数据流。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10915-10915的标注 | 添加于 2019年4月15日星期一 上午8:48:49

TCP的实现是通过序列号、校检和、出错重传来提供这种保证的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10915-10916的标注 | 添加于 2019年4月15日星期一 上午8:49:10

TCP的实现是通过序列号、校检和、出错重传来提供这种保证的。所有这些对于发送者和接收者进程都是透明的。它们看到的只是可靠的进程间通信，就像UNIX管道一样。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10917-10918的标注 | 添加于 2019年4月15日星期一 下午12:42:24

要发送的消息很小，在任何一层都不需要分割它。主机处于一个连接到Internet上的Ethernet中。那么
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10918-10920的标注 | 添加于 2019年4月15日星期一 下午12:42:42

首先，用户进程产生消息，并在一个事先建立好的TCP连接上通过系统调用来发送消息。内核协议栈依次在消息前面添加TCP包头和IP包头。然后由Ethernet驱动再添加一个Ethernet包头，并把该数据包发送到Ethernet的路由器上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10921-10922的标注 | 添加于 2019年4月15日星期一 下午12:48:47

为了与远程机器建立连接（或者仅仅是给它发送一个数据包），需要知道它的IP地址。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10922-10924的标注 | 添加于 2019年4月15日星期一 下午12:49:10

对于人们来说管理32位的IP地址列表是很不方便的，所以就产生了一种称为DNS（Domain Name System，域名系统）的方案，它作为一个数据库把主机的ASCII名称映射为对应的IP地址。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10924-10925的标注 | 添加于 2019年4月15日星期一 下午12:51:49

由于Internet电子邮件地址采用“用户名@DNS主机名”的形式命名，所以DNS名称广为人知。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10930-10930的标注 | 添加于 2019年4月15日星期一 下午12:51:56

8.4.3　基于文档的中间件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10931-10932的标注 | 添加于 2019年4月15日星期一 下午12:52:15

中间件层位于基础网络上，为应用程序和用户提供一致的范型。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10932-10933的标注 | 添加于 2019年4月15日星期一 下午12:52:32

万维网（World Wide Web）。Web是由在欧洲核子中心（CERN）工作的Tim Berners-Lee于1989年发明的，从
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10933-10934的标注 | 添加于 2019年4月15日星期一 下午12:52:42

Web背后的原始范型是非常简单的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10933-10934的标注 | 添加于 2019年4月15日星期一 下午12:52:50

Web背后的原始范型是非常简单的：每个计算机可以持有一个或多个文档，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10933-10934的标注 | 添加于 2019年4月15日星期一 下午12:52:52

Web背后的原始范型是非常简单的：每个计算机可以持有一个或多个文档，称为Web页面（Web page）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10935-10936的标注 | 添加于 2019年4月15日星期一 下午12:53:16

当用户使用一个称为Web浏览器（Web browser）的程序请求一个Web页面时，该页面就显示在用户的屏幕上。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10937-10938的标注 | 添加于 2019年4月15日星期一 下午12:53:32

Web是一个由文档构成的巨大有向图，其中文档可以指向其他的文档，如图8-35所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10939-10940的标注 | 添加于 2019年4月15日星期一 下午12:53:56

每个Web页面都有一个惟一的地址，称为URL（统一资源定位符，Uniform Resource Locator），其形式为protocol://DNS-name/file-name。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10939-10941的标注 | 添加于 2019年4月15日星期一 下午12:54:18

每个Web页面都有一个惟一的地址，称为URL（统一资源定位符，Uniform Resource Locator），其形式为protocol://DNS-name/file-name。http协议（超文本传输协议，HyperText Transfer Protocol）是最常用的，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10943-10943的标注 | 添加于 2019年4月15日星期一 下午12:54:29

Web根本上是一个客户机-服务器系统，用户是客户端，而Web站点则是服务器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10955-10955的标注 | 添加于 2019年4月15日星期一 下午12:55:35

8.4.4　基于文件系统的中间件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10955-10956的标注 | 添加于 2019年4月15日星期一 下午12:55:43

隐藏在Web背后的基本思想是，使一个分布式系统看起来像一个巨大的、超链接的集合。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10955-10957的标注 | 添加于 2019年4月15日星期一 下午12:55:50

隐藏在Web背后的基本思想是，使一个分布式系统看起来像一个巨大的、超链接的集合。另一种处理方式则是使一个分布式系统看起来像一个大型文件系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10957-10958的标注 | 添加于 2019年4月15日星期一 下午12:57:08

分布式系统采用一个文件系统模型意味着只存在一个全局文件系统，全世界的用户都能够读写他们各自具有授权的文件。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10960-10960的标注 | 添加于 2019年4月15日星期一 下午12:59:01

1.传输模式
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10960-10961的标注 | 添加于 2019年4月15日星期一 下午12:59:12

第一个问题是，在上传/下载模式（upload/download model）和远程访问模式之间的选择问题。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10960-10962的标注 | 添加于 2019年4月15日星期一 下午1:00:33

第一个问题是，在上传/下载模式（upload/download model）和远程访问模式之间的选择问题。在前一种模式中，如图8-36a所示，通过把远程服务器上的文件复制到本地的方法，实现进程对远程文件的访问。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10964-10965的标注 | 添加于 2019年4月15日星期一 下午1:00:43

在远程访问模式中，文件停留在服务器上，而客户机向服务器发出命令并在服务器上完成工作，如图8-36b所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10966-10967的标注 | 添加于 2019年4月15日星期一 下午1:03:37

上传/下载模式的优点是简单，而且一次性传送整个文件的方法比用小块传送文件的方法效率更高。其
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10966-10967的标注 | 添加于 2019年4月15日星期一 下午1:03:48

上传/下载模式的优点是简单，而且一次性传送整个文件的方法比用小块传送文件的方法效率更高。其缺点是为了在本地存放整个文件，必须拥有足够的空间，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10969-10969的标注 | 添加于 2019年4月15日星期一 下午1:06:53

2.目录层次
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10969-10969的标注 | 添加于 2019年4月15日星期一 下午1:07:00

文件只是所涉及的问题中的一部分。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10969-10970的标注 | 添加于 2019年4月15日星期一 下午1:07:07

文件只是所涉及的问题中的一部分。另一部分问题是目录系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10969-10970的标注 | 添加于 2019年4月15日星期一 下午1:07:13

文件只是所涉及的问题中的一部分。另一部分问题是目录系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10970-10971的标注 | 添加于 2019年4月15日星期一 下午1:07:24

接下来的设计问题是，是否所有的用户都拥有该目录层次的相同视图。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10973-10974的标注 | 添加于 2019年4月15日星期一 下午1:09:04

相反，在图8-37c中，不同的机器有该文件系统的不同视图。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10979-10982的标注 | 添加于 2019年4月15日星期一 下午1:14:45

一个密切相关的问题是，是否存在一个所有的机器都承认的全局根目录。获得全局根目录的一个方法是，让每个服务器的根目录只包含一个目录项。在这种情况下，路径取/server/path的形式，这种方式有其缺点，但是至少做到了在系统中处处相同。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10979-10980的标注 | 添加于 2019年4月15日星期一 下午1:14:51

一个密切相关的问题是，是否存在一个所有的机器都承认的全局根目录。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10979-10980的标注 | 添加于 2019年4月15日星期一 下午1:14:55

一个密切相关的问题是，是否存在一个所有的机器都承认的全局根目录。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10979-10981的标注 | 添加于 2019年4月15日星期一 下午1:16:44

一个密切相关的问题是，是否存在一个所有的机器都承认的全局根目录。获得全局根目录的一个方法是，让每个服务器的根目录只包含一个目录项。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10982-10982的标注 | 添加于 2019年4月15日星期一 下午1:16:50

3.命名透明性
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10982-10983的标注 | 添加于 2019年4月15日星期一 下午1:23:19

这种命名方式的主要问题是，它不是完全透明的。这里涉及两种类型的透明性（transparency），并且有必要加以区分
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10983-10984的标注 | 添加于 2019年4月15日星期一 下午1:23:49

位置透明性（location transparency），其含义是路径名没有隐含文件所在位置的信息。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10982-10983的标注 | 添加于 2019年4月15日星期一 下午1:24:25

这里涉及两种类型的透明性（transparency），并且有必要加以区分
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10982-10984的标注 | 添加于 2019年4月15日星期一 下午1:24:33

这里涉及两种类型的透明性（transparency），并且有必要加以区分。第一种，位置透明性（location transparency），其含义是路径名没有隐含文件所在位置的信息。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10990-10990的标注 | 添加于 2019年4月15日星期一 下午1:25:23

如果在一个系统中文件移动时文件的名称不会随之改变，则称为具有位置独立性（location independence）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10993-10993的标注 | 添加于 2019年4月15日星期一 下午1:25:46

可见位置独立性是不容易实现的，但它是分布式系统所期望的一个属性。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10994-10994的标注 | 添加于 2019年4月15日星期一 下午1:25:52

在分布式系统中处理文件和目录命名的方式通常有以下三种：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10995-10996的标注 | 添加于 2019年4月15日星期一 下午1:26:03

机器+路径名，如/machine/path或machine:path。 2)将远程文件系统安装在本地文件层次中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10996-10996的标注 | 添加于 2019年4月15日星期一 下午1:26:07

3)在所有的机器上看来都相同的单一名字空间。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10998-10999的标注 | 添加于 2019年4月15日星期一 下午1:26:33

4.文件共享的语义
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #10999-11000的标注 | 添加于 2019年4月15日星期一 下午1:26:44

当两个或多个用户共享同一个文件时，为了避免出现问题有必要精确地定义读和写的语义。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11000-11000的标注 | 添加于 2019年4月15日星期一 下午1:26:48

write系统调用时，则read
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11002-11003的标注 | 添加于 2019年4月15日星期一 下午2:04:36

，系统强制所有的系统调用有序，并且所有的处理器都看到同样的顺序。我们将这种模型称为顺序一致性（sequential consistency）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11003-11004的标注 | 添加于 2019年4月15日星期一 下午2:04:55

在分布式系统中，只要只有一个文件服务器而且客户机不缓存文件，那么顺序一致性是很容易实现的。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11005-11007的标注 | 添加于 2019年4月15日星期一 下午2:06:37

不过，实际情况中，如
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11010-11011的标注 | 添加于 2019年4月15日星期一 下午2:07:12

走出这个困局的一个途径是，将高速缓存文件上的改动立即传送回服务器。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11011-11011的标注 | 添加于 2019年4月15日星期一 下午2:07:23

另一个解决方案是放宽文件共享的语义。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11016-11017的标注 | 添加于 2019年4月15日星期一 下午2:31:17

这个规则就是图8-36中的上传/下载模式。这种语义已经得到广泛的实现，即所谓的会话语义（session semantic）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11011-11014的标注 | 添加于 2019年4月15日星期一 下午2:31:43

另一个解决方案是放宽文件共享的语义。一般的语义要求一个读操作要看到其之前的所有写操作的效果，我们可以定义一条新规则来取代它：“在一个打开文件上所进行的修改，最初仅对进行这些修改的进程是可见的。只有在该文件关闭之后，这些修改才对其他进程可见。”采用
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11017-11019的标注 | 添加于 2019年4月15日星期一 下午2:56:33

使用会话语义产生了新的问题，即如果两个或更多的客户机同时缓存并修改同一个文件，应该怎么办？一个解决方案是，当每个文件依次关闭时，其值会被送回给服务器，所以最后的结果取决于哪个文件最后关闭
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11017-11020的标注 | 添加于 2019年4月15日星期一 下午2:57:04

使用会话语义产生了新的问题，即如果两个或更多的客户机同时缓存并修改同一个文件，应该怎么办？一个解决方案是，当每个文件依次关闭时，其值会被送回给服务器，所以最后的结果取决于哪个文件最后关闭。一个不太令人满意的、但是较容易实现的替代方案是，最后的结果是在各种候选中选择一个，但并不指定是哪一个。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11020-11021的标注 | 添加于 2019年4月15日星期一 下午2:57:13

对会话语义的另一种处理方式是，使用上传/下载模式，但是自动对已经下载的文件加锁。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11026-11026的标注 | 添加于 2019年4月15日星期一 下午2:58:02

8.4.5　基于对象的中间件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11028-11028的标注 | 添加于 2019年4月15日星期一 下午2:58:35

。对象是变量的集合，这些变量与一套称为方法的访问过程绑定在一起
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11029-11030的标注 | 添加于 2019年4月15日星期一 下午2:58:52

有一些程序设计语言，如C++和Java，是面向对象的，但这些对象是语言级的对象，而不是运行时刻的对象
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11029-11031的标注 | 添加于 2019年4月15日星期一 下午2:59:10

有一些程序设计语言，如C++和Java，是面向对象的，但这些对象是语言级的对象，而不是运行时刻的对象。一个知名的基于运行时对象的系统是CORBA（公共对象请求代理体系结构，Common Object Request Broker Architecture）（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11031-11032的标注 | 添加于 2019年4月15日星期一 下午3:00:03

）。CORBA是一个客户机-服务器系统，其中在客户机上的客户进程可以调用位于（可能是远程）服务器上的对象操作
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11033-11034的标注 | 添加于 2019年4月15日星期一 下午3:00:17

了使在一个平台上的客户有可能使用在不同平台上的服务器，将ORB（对象请求代理，Object Request Broker）插入到客户机和服务器之间，从而使它们相互匹配。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11035-11036的标注 | 添加于 2019年4月15日星期一 下午3:00:46

每个CORBA对象是由叫做IDL（接口定义语言，Interface Definition Language）的语言中的接口定义所定义的，说明该对象提供什么方法，以及每个方法期望使用什么类型的参数
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11035-11037的标注 | 添加于 2019年4月15日星期一 下午3:03:31

每个CORBA对象是由叫做IDL（接口定义语言，Interface Definition Language）的语言中的接口定义所定义的，说明该对象提供什么方法，以及每个方法期望使用什么类型的参数。可以把IDL的规约（specification）编译进客户端桩过程中，并且存储在一个库里。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11038-11038的标注 | 添加于 2019年4月15日星期一 下午3:03:37

也可以把IDL规约编译进服务器一方的一个框架（skeleton）过程中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11040-11040的标注 | 添加于 2019年4月15日星期一 下午3:03:51

当创建一个CORBA对象时，一个对它的引用也创建出来并返回给创建它的进程
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11042-11042的标注 | 添加于 2019年4月15日星期一 下午3:04:25

要调用一个对象中的方法，客户机进程必须首先获得对该对象的引用。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11043-11044的标注 | 添加于 2019年4月15日星期一 下午3:05:24

一旦有了该对象的引用，客户机进程将把方法调用的参数编排进一个便利的结构中，然后与客户机ORB联系
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11043-11045的标注 | 添加于 2019年4月15日星期一 下午3:05:36

一旦有了该对象的引用，客户机进程将把方法调用的参数编排进一个便利的结构中，然后与客户机ORB联系。接着，客户机ORB向服务器ORB发送一条消息，后者真正调用对象中的方法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11043-11045的标注 | 添加于 2019年4月15日星期一 下午3:05:40

一旦有了该对象的引用，客户机进程将把方法调用的参数编排进一个便利的结构中，然后与客户机ORB联系。接着，客户机ORB向服务器ORB发送一条消息，后者真正调用对象中的方法。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11045-11046的标注 | 添加于 2019年4月15日星期一 下午3:09:11

ORB的功能是将客户机和服务器代码中的所有低层次的分布和通信细节都隐藏起来
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11049-11050的标注 | 添加于 2019年4月15日星期一 下午3:09:43

对于用在Internet上的通信，协议称为IIOP（Internet InterOrb Protocol）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11050-11051的标注 | 添加于 2019年4月15日星期一 下午3:10:54

为了能够在CORBA系统中使用那些不是为CORBA编写的对象，可以为每个对象装备一个对象适配器（object adapter）。对象适配器是一种包装器，它
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11050-11051的标注 | 添加于 2019年4月15日星期一 下午3:10:56

为了能够在CORBA系统中使用那些不是为CORBA编写的对象，可以为每个对象装备一个对象适配器（object adapter）。对象适配
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11054-11056的标注 | 添加于 2019年4月15日星期一 下午3:11:19

对于CORBA而言，一个严重问题是每个CORBA对象只存在一个服务器上，这意味着那些在世界各地客户机上被大量使用的对象，会有很差的性能。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11054-11057的标注 | 添加于 2019年4月15日星期一 下午3:11:35

对于CORBA而言，一个严重问题是每个CORBA对象只存在一个服务器上，这意味着那些在世界各地客户机上被大量使用的对象，会有很差的性能。在实践中，CORBA只在小规模系统中才能有效工作，比如，在一台计算机、一个局域网或者一个公司中用来连接进程。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11059-11060的标注 | 添加于 2019年4月15日星期一 下午3:11:40

8.4.6　基于协作的中间件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11060-11061的标注 | 添加于 2019年4月15日星期一 下午3:11:48

分布式系统的最后一个范型是所谓基于协作的中间件（coordination-based middleware）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11062-11062的标注 | 添加于 2019年4月15日星期一 下午3:12:12

1.
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11062-11064的标注 | 添加于 2019年4月15日星期一 下午3:12:34

Linda是一个由耶鲁大学的David Gelernter和他的学生Nick Carriero（Carriero与Gelernter，1986；Carriero与Gelernter，1985）研发的用于通信和同步的新系统。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11062-11064的标注 | 添加于 2019年4月15日星期一 下午3:12:50

Linda是一个由耶鲁大学的David Gelernter和他的学生Nick Carriero（Carriero与Gelernter，1986；Carriero与Gelernter，1985）研发的用于通信和同步的新系统。在Linda系统中，相互独立的进程之间通过一个抽象的元组空间（tuple space）进行通信。对
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11062-11065的标注 | 添加于 2019年4月15日星期一 下午3:13:14

Linda是一个由耶鲁大学的David Gelernter和他的学生Nick Carriero（Carriero与Gelernter，1986；Carriero与Gelernter，1985）研发的用于通信和同步的新系统。在Linda系统中，相互独立的进程之间通过一个抽象的元组空间（tuple space）进行通信。对整个系统而言，元组空间是全局
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11062-11065的标注 | 添加于 2019年4月15日星期一 下午3:13:20

Linda是一个由耶鲁大学的David Gelernter和他的学生Nick Carriero（Carriero与Gelernter，1986；Carriero与Gelernter，1985）研发的用于通信和同步的新系统。在Linda系统中，相互独立的进程之间通过一个抽象的元组空间（tuple space）进行通信。对整个系统而言，元组空间是全局性的，在
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11066-11066的标注 | 添加于 2019年4月15日星期一 下午3:13:40

对于用户而言，元组空间像一个巨大的全局共享存储器，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11067-11067的标注 | 添加于 2019年4月15日星期一 下午3:13:46

一个元组类似于C语言或者Java中的结构
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11067-11068的标注 | 添加于 2019年4月15日星期一 下午3:14:02

一个元组类似于C语言或者Java中的结构。它包括一个或多个域，每个域是一个由基语言（base language）（通过在已有的语言，如C语言中添加一个库，可以实现Linda）所支持的某种类型的值。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11070-11070的标注 | 添加于 2019年4月15日星期一 下午3:14:46

。与对象不同，元组是纯粹的数据；它们没有任何相关联的方法
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11072-11072的标注 | 添加于 2019年4月15日星期一 下午3:14:54

在元组上存在四种操作。第一种out，将一个元组放入元组空间中。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11073-11074的标注 | 添加于 2019年4月15日星期一 下午3:15:06

out的域通常是常数、变量或者是表达式，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11075-11076的标注 | 添加于 2019年4月15日星期一 下午3:15:22

通过使用in原语可以从元组空间中获取元组。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11075-11076的标注 | 添加于 2019年4月15日星期一 下午3:15:30

通过使用in原语可以从元组空间中获取元组。该原语通过内容而不是名称或者地址寻找
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11075-11077的标注 | 添加于 2019年4月15日星期一 下午3:15:34

通过使用in原语可以从元组空间中获取元组。该原语通过内容而不是名称或者地址寻找元组。in的域可以是表达式或者形式参数。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11081-11084的标注 | 添加于 2019年4月15日星期一 下午3:16:57

in采用的匹配算法是很直接的。in原语的域，称为模板（template），（在概念上）它与元组空间中的每个元组的同一个域相比较，如果下面的三个条件都符合，那么产生出一个匹配： 1)模板和元组有相同数量的域。 2)对应域的类型一样。 3)模板中的每个常数或者变量均与该元组域相匹配。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11084-11085的标注 | 添加于 2019年4月15日星期一 下午3:17:33

形式参数，由问号标识后面跟随一个变量名或类型所给定
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11086-11087的标注 | 添加于 2019年4月15日星期一 下午3:17:44

如果没有匹配的元组存在，调用进程便被挂起，直到另一个进程插入了所需要的元组为止，此时该调用进程自动复活并获得新
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11089-11090的标注 | 添加于 2019年4月15日星期一 下午3:18:28

某个进程需要一个不存在的元组时，阻塞该进程的方式可以有许多用途。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11089-11090的标注 | 添加于 2019年4月15日星期一 下午3:18:48

在某个进程需要一个不存在的元组时，阻塞该进程的方式可以有许多用途。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11089-11090的标注 | 添加于 2019年4月15日星期一 下午3:18:52

在某个进程需要一个不存在的元组时，阻塞该进程的方式可以有许多用途。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11094-11096的标注 | 添加于 2019年4月15日星期一 下午3:19:48

除了out和in操作，Linda还提供了原语read，它和in是一样的，不过它不把元组移出元组空间。还有一个原语eval，它的作用是同时对元组的参数进行计算，计算后的元组会被放进元组空间中去。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11097-11097的标注 | 添加于 2019年4月15日星期一 下午3:20:06

2.发布/订阅（Pubilsh/Subscribe）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11097-11098的标注 | 添加于 2019年4月15日星期一 下午3:20:11

由于受到Linda的启发，出现了基于协作的模型的一个例子，称作pubilsh/subscribe（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11098-11099的标注 | 添加于 2019年4月15日星期一 下午3:24:40

它由大量通过广播网网络互联的进程组成。每个进程可以是一个信息生产者、信息消费者或两者都是。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11099-11100的标注 | 添加于 2019年4月15日星期一 下午3:24:51

当一个信息生产者有了一条新的信息（例如，一个新的股票价格）后，它就把该信息作为一个元组在网络上广播。这种行为称为发布（publishing）
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11101-11102的标注 | 添加于 2019年4月15日星期一 下午3:25:18

对特定信息感兴趣的进程可以订阅（subscribe）特定的专题，这包括在主题行中使用通配符。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11101-11102的标注 | 添加于 2019年4月15日星期一 下午3:25:37

对特定信息感兴趣的进程可以订阅（subscribe）特定的专题，这包括在主题行中使用通配符。在同一台机器上，只要通知一个元组守护进程就可以完成订阅工作，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11103-11103的标注 | 添加于 2019年4月15日星期一 下午3:25:59

发布/订阅的实现过程如图8-41所示。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11110-11111的标注 | 添加于 2019年4月15日星期一 下午3:27:16

这里可以实现各种语义，包括可靠发送以及保证发送，即使出现崩溃也没有关系
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11111-11112的标注 | 添加于 2019年4月15日星期一 下午3:27:35

一种情形下，有必要存储原有的元组供以后需要时使用。一种存储的方法是将一个数据库系统和该系统挂钩，并让该数据库订阅所有的元组。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11110-11112的标注 | 添加于 2019年4月15日星期一 下午3:27:40

这里可以实现各种语义，包括可靠发送以及保证发送，即使出现崩溃也没有关系。在后一种情形下，有必要存储原有的元组供以后需要时使用。一种存储的方法是将一个数据库系统和该系统挂钩，并让该数据库订阅所有的元组。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11114-11114的标注 | 添加于 2019年4月15日星期一 下午3:28:26

发布/订阅模型完全把生产者和消费者分隔开来，如同在Linda中一样。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11116-11116的标注 | 添加于 2019年4月15日星期一 下午3:28:33

3.Jini
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11118-11119的标注 | 添加于 2019年4月15日星期一 下午3:30:06

器。Sun公司的Jini（基因拼写的变形）则是企图改变这种计算模型的一个尝试，这种模型可以描述为以网络为中心
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11116-11117的标注 | 添加于 2019年4月15日星期一 下午3:30:13

50多年来，计算始终是以CPU为中心的
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11118-11119的标注 | 添加于 2019年4月15日星期一 下午3:30:22

Sun公司的Jini（基因拼写的变形）则是企图改变这种计算模型的一个尝试，这种模型可以描述为以网络为中心
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11118-11119的标注 | 添加于 2019年4月15日星期一 下午3:30:24

Sun公司的Jini（基因拼写的变形）则是企图改变这种计算模型的一个尝试，这种模型可以描述为以网络为中心
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11119-11119的标注 | 添加于 2019年4月15日星期一 下午3:30:32

在Jini世界中有大量自包含的Jini设备
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11119-11120的标注 | 添加于 2019年4月15日星期一 下午3:30:52

在Jini世界中有大量自包含的Jini设备，其中的每一个设备都为其他的设备提供了一种或多种服务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11119-11120的标注 | 添加于 2019年4月15日星期一 下午3:31:13

在Jini世界中有大量自包含的Jini设备，其中的每一个设备都为其他的设备提供了一种或多种服务。可以把Jini设备插入到网络中，并且立即开始提供和使用服务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11121-11123的标注 | 添加于 2019年4月15日星期一 下午3:31:31

中。一个Jini设备可以是一台传统的计算机，但也可以是一台打印机、掌上电脑、蜂窝电话、电视机、立体音响或其他带有CPU、一些存储器以及
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11123-11124的标注 | 添加于 2019年4月15日星期一 下午3:31:52

。Jini系统是Jini设备的一个松散联邦，Jini设备可以依照自己的意愿进入和离开该联邦，不存在集权式的管理。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11124-11125的标注 | 添加于 2019年4月15日星期一 下午3:32:39

当一个Jini设备想加入Jini联邦时，它在本地局域网上广播一个包，或者在本地无线蜂窝网上询问是否存在查询服务（lookup service）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11124-11127的标注 | 添加于 2019年4月15日星期一 下午3:33:04

当一个Jini设备想加入Jini联邦时，它在本地局域网上广播一个包，或者在本地无线蜂窝网上询问是否存在查询服务（lookup service）。用于寻找查询服务的协议是发现协议（discovery protocol）以及若干Jini硬线协议中的某一个。（另一种寻找方法是，新的Jini设备可以等待直到有一个周期性
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11124-11127的标注 | 添加于 2019年4月15日星期一 下午3:33:07

当一个Jini设备想加入Jini联邦时，它在本地局域网上广播一个包，或者在本地无线蜂窝网上询问是否存在查询服务（lookup service）。用于寻找查询服务的协议是发现协议（discovery protocol）以及若干Jini硬线协议中的某一个。（另一种寻找方法是，新的Jini设备可以等待直到有一个周期性的查询服务公告经过，但是
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11127-11128的标注 | 添加于 2019年4月15日星期一 下午3:33:17

当查询服务看到有一个新的设备想注册时，它用一段可以用来完成注册的代码作为回答。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11127-11129的标注 | 添加于 2019年4月15日星期一 下午3:33:50

当查询服务看到有一个新的设备想注册时，它用一段可以用来完成注册的代码作为回答。由于Jini是纯的Java系统，被发送的代码是JVM（Java虚拟机语言）形式的，所有的Jini设备必定能运行它，通常是以解释方式运行。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11127-11130的标注 | 添加于 2019年4月15日星期一 下午3:34:26

当查询服务看到有一个新的设备想注册时，它用一段可以用来完成注册的代码作为回答。由于Jini是纯的Java系统，被发送的代码是JVM（Java虚拟机语言）形式的，所有的Jini设备必定能运行它，通常是以解释方式运行。接着，新设备运行该代码，代码同查询服务联系并且在某个固定的时间段中进行注册。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11132-11132的标注 | 添加于 2019年4月15日星期一 下午3:34:50

注册一定的时间间隔的做法，称为取得一项租约（lease）。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11131-11131的标注 | 添加于 2019年4月15日星期一 下午3:35:01

着，一个Jini设备可以通过关机的方式离开系统
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11132-11133的标注 | 添加于 2019年4月15日星期一 下午3:36:23

请注意，由于用于注册设备的代码是通过下载进入设备的，因此注册用的代码会随着系统演化而被修改掉，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11132-11134的标注 | 添加于 2019年4月15日星期一 下午3:36:43

请注意，由于用于注册设备的代码是通过下载进入设备的，因此注册用的代码会随着系统演化而被修改掉，不过系统的演进并不会影响设备的硬件和软件
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11136-11136的标注 | 添加于 2019年4月15日星期一 下午3:38:04

寻找某个特定服务的设备和用户可以请求查询服务是否知道这样的一个特定服务存在。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11139-11140的标注 | 添加于 2019年4月15日星期一 下午3:38:51

Jini客户机和服务（硬件或软件设备）使用JavaSpace进行通信和同步，这方式实际是模仿Linda的元组空间，但存在一些重要的差别。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11139-11140的标注 | 添加于 2019年4月15日星期一 下午3:39:43

Jini客户机和服务（硬件或软件设备）使用JavaSpace进行通信和同步，这方式实际是模仿Linda的元组空间，但存在一些重要的差别。每个JavaSpace由一些强类型的记录项组成
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11141-11142的标注 | 添加于 2019年4月15日星期一 下午3:40:00

在每个记录项中包含一些域，每个域中有一个基本Java类型。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11143-11144的标注 | 添加于 2019年4月15日星期一 下午3:40:18

在JavaSpace中只定义了四个方法（尽管其中的两个方法还有一个变种）：
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11144-11144的标注 | 添加于 2019年4月15日星期一 下午3:40:22

1)Write：把一个记录项放入JavaSpace。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11145-11145的标注 | 添加于 2019年4月15日星期一 下午3:40:31

2)Read：将一个与模板匹配的记录项复制出JavaSpace。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11145-11146的标注 | 添加于 2019年4月15日星期一 下午3:40:41

3)Take：复制并移走一个与模板匹配的记录项。 4)Notify：当一个匹配的记录项写入时通知调用者。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11147-11147的标注 | 添加于 2019年4月15日星期一 下午3:41:02

write方法提供记录项并确定其租约时间，即何时应该丢弃该记录项。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11148-11148的标注 | 添加于 2019年4月15日星期一 下午3:41:36

在JavaSpace中可以保存有同一个记录项的多个副本，所以它不是一个数学意义上的集合
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11149-11149的标注 | 添加于 2019年4月15日星期一 下午3:41:57

read和take方法为要寻找的记录项提供了一个模板
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11149-11150的标注 | 添加于 2019年4月15日星期一 下午3:42:41

read和take方法为要寻找的记录项提供了一个模板。在该模板的每个域中有一个必须匹配的特定值，或者可以包含一个“不在乎”的通配符，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11151-11152的标注 | 添加于 2019年4月15日星期一 下午3:43:15

这些JavaSpace方法中的每一个都有两个变种，在没有匹配到记录项时，它们之间有所差别
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11153-11153的标注 | 添加于 2019年4月15日星期一 下午3:43:21

notify方法用一个特殊模板注册兴趣
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11153-11154的标注 | 添加于 2019年4月15日星期一 下午3:44:34

如果以后进来了一个相匹配的记录项，就调用调用者的notify方法。 与
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11154-11155的标注 | 添加于 2019年4月15日星期一 下午3:44:40

与Linda中的元组空间不同，JavaSpace支持原子事务处理。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11157-11157的标注 | 添加于 2019年4月15日星期一 下午3:45:08

可以在通信进程之间的同步中运用JavaSpace
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11157-11157的标注 | 添加于 2019年4月15日星期一 下午3:45:44

可以在通信进程之间的同步
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11157-11157的标注 | 添加于 2019年4月15日星期一 下午3:45:49

可以在通信进程之间的同步中运用JavaSpace。例如
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11157-11157的标注 | 添加于 2019年4月15日星期一 下午3:45:56

可以在通信进程之间的同步中运用JavaSpace
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11162-11162的标注 | 添加于 2019年4月15日星期一 下午3:46:31

8.4.7　网格
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11163-11163的标注 | 添加于 2019年4月15日星期一 下午3:46:47

在未来有可能变得非常重要的网格，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11163-11163的标注 | 添加于 2019年4月15日星期一 下午3:46:56

在未来有可能变得非常重要
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11164-11165的标注 | 添加于 2019年4月15日星期一 下午3:47:22

网格（grid），是一个大的、地理上分散的、通常是由私有网络或因特网连接起来的异构机器的集合，向用户提供一系列服务
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11166-11166的标注 | 添加于 2019年4月15日星期一 下午3:47:54

一般位于多个管理域中，所有的这些
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11165-11167的标注 | 添加于 2019年4月15日星期一 下午3:48:03

。它是很多独立计算机的集合，一般位于多个管理域中，所有的这些管理域都会运行中间件的一个公共的中间件层以便用户和程序可以通过方便和一致的方式访问所有
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11165-11167的标注 | 添加于 2019年4月15日星期一 下午3:48:21

。它是很多独立计算机的集合，一般位于多个管理域中，所有的这些管理域都会运行中间件的一个公共的中间件层以便用户和程序可以通过方便和一致的方式访问所有资源。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11165-11167的标注 | 添加于 2019年4月15日星期一 下午3:49:39

。它是很多独立计算机的集合，一般位于多个管理域中，所有的这些管理域都会运行中间件的一个公共的中间件层以便用户和程序可以通过方便和一致的方式访问所有资源。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11167-11167的标注 | 添加于 2019年4月15日星期一 下午3:50:03

构建网格的初始动机是为了CPU的时钟周期共享。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11169-11170的标注 | 添加于 2019年4月15日星期一 下午3:50:29

现在，网格研究人员也在关注其他资源的共享，尤其是专门硬件和
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11169-11170的标注 | 添加于 2019年4月15日星期一 下午3:50:32

现在，网格研究人员也在关注其他资源的共享，尤其是专门硬件和数据库。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11170-11171的标注 | 添加于 2019年4月15日星期一 下午3:50:44

典型地，网格的工作原理是：在每个参与的机器中运行一组管理机器并且把它加入到网格中的程序
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11170-11171的标注 | 添加于 2019年4月15日星期一 下午3:52:26

典型地，网格的工作原理是：在每个参与的机器中运行一组管理机器并且把它加入到网格中的程序。这个程序通常需要处理认证及远程用户登录、资源发布及发现、作业调度
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11170-11171的标注 | 添加于 2019年4月15日星期一 下午3:52:29

典型地，网格的工作原理是：在每个参与的机器中运行一组管理机器并且把它加入到网格中的程序。这个程序通常需要处理认证及远程用户登录、资源发布及发现、作业调度及分配等。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11173-11174的标注 | 添加于 2019年4月15日星期一 下午3:52:40

在网格世界中，一个流行的中间件叫Globus Toolkit，它
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11173-11174的标注 | 添加于 2019年4月15日星期一 下午3:52:54

在网格世界中，一个流行的中间件叫Globus Toolkit，它在很多平台上都是可用的并且支持很多（即将出现的）网格标准（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11175-11176的标注 | 添加于 2019年4月15日星期一 下午4:01:25

性。网格正在成为很多分布式应用的构建基础。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11180-11181的标注 | 添加于 2019年4月15日星期一 下午4:01:42

在多处理器领域中的多数研究与硬件有关，特别是与如何构建共享存储器和保持其一致性
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11182-11182的标注 | 添加于 2019年4月15日星期一 下午4:02:08

还有一些关于多处理器的其他研究，特别是片上多处理器，包括编程模型和随之带来的操作系统问题（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11183-11183的标注 | 添加于 2019年4月15日星期一 下午4:02:14

、通信机制（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11183-11183的标注 | 添加于 2019年4月15日星期一 下午4:02:18

2007）、软件的能源管理（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11183-11183的标注 | 添加于 2019年4月15日星期一 下午4:02:31

软件的能源管理（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11183-11183的标注 | 添加于 2019年4月15日星期一 下午4:02:36

安全（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11185-11185的标注 | 添加于 2019年4月15日星期一 下午4:03:02

多计算机比多处理器更容易构建。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11185-11186的标注 | 添加于 2019年4月15日星期一 下午4:03:59

多计算机比多处理器更容易构建。所需要的只是一批PC机或工作站，以及一个高速网络。
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11190-11191的标注 | 添加于 2019年4月15日星期一 下午4:04:21

虚拟机是一个特别热门的话题，针对不同的方面有许多论文，包括能源管理（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11191-11191的标注 | 添加于 2019年4月15日星期一 下午4:04:29

内存管理
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11191-11191的标注 | 添加于 2019年4月15日星期一 下午4:04:36

和信任管理（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11192-11192的标注 | 添加于 2019年4月15日星期一 下午4:04:45

2007）。性能优化也是一个很有意思的问题，特别是CPU的性能（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11192-11192的标注 | 添加于 2019年4月15日星期一 下午4:04:50

安全也是一个方面（Jaeger等人，2007）。性能优化也是一个很有意思的问题，特别是CPU的性能（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11193-11193的标注 | 添加于 2019年4月15日星期一 下午4:05:06

网络性能（Menon等人，2006）、I/O性能（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11194-11194的标注 | 添加于 2019年4月15日星期一 下午4:05:16

虚拟机也已经被用来调试操作系统（
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11193-11194的标注 | 添加于 2019年4月15日星期一 下午4:05:23

虚拟机使得迁移变得可行，
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11195-11195的标注 | 添加于 2019年4月15日星期一 下午4:05:36

随着分布式计算的发展
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11195-11196的标注 | 添加于 2019年4月15日星期一 下午4:05:54

遇到的问题包括：遭遇软硬件错误、人为错误、自然灾害时的长期可维护性
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11197-11197的标注 | 添加于 2019年4月15日星期一 下午4:06:06

用不可信的服务器（A
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11197-11198的标注 | 添加于 2019年4月15日星期一 下午4:06:18

证（Kaminsky等人，2003）和分布式文件系统的可扩展性（G
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11198-11199的标注 | 添加于 2019年4月15日星期一 下午4:06:37

何扩展分布式系统也已
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11199-11199的标注 | 添加于 2019年4月15日星期一 下午4:06:44

对点（P2P）分布式文
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11199-11199的标注 | 添加于 2019年4月15日星期一 下午4:06:51

对点（P2P）分布式文件系统也
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11200-11201的标注 | 添加于 2019年4月15日星期一 下午4:07:05

有一些节点可以移动的情况下，能源有效利用率也开始变得很重要（N
==========
现代操作系统（原书第3版） (计算机科学丛书) (Andrews Tanenbaum)
- 您在位置 #11325-11325的标注 | 添加于 2019年4月16日星期二 下午3:07:09

标注 (黄色) - 习题 > 位置 11222 

1. 可以把 USENET 新闻组系统和 SETI@ home 
  笔记 - 习题 > 位置 11223 
  USENET和SETI@home都可以被描述为广域分布式系统。然而，USENET实际上比图8-1c的方案更原始，因为它不需要任何网络基础设施，而是机器之间的点对点连接。另外，由于除了确保新闻文章的正确传播之外，它没有任何的处理工作，所以可以讨论其是否真的是本章所关心的分布式系统。SETI @ home是广域分布式系统的一个更典型的例子，数据被分发到远程节点，然后将计算结果返回给协调节点 
  笔记 - 习题 > 位置 11223 
  USENET和SETI@home都可以被描述为广域分布式系统。然而，USENET实际上比图8-1c的方案更原始，因为它不需要任何网络基础设施，而是机器之间的点对点连接。另外，由于除了确保新闻文章的正确传播之外，它没有任何的处理工作，所以可以讨论其是否真的是本章所关心的分布式系统。SETI @ home是广域分布式系统的一个更典型的例子，数据被分发到远程节点，然后将计算结果返回给协调节点 
  标注 (黄色) - 习题 > 位置 11224 
2. 如果一个多处理器中的两个 CPU 在 
  笔记 - 习题 > 位置 11225 
  取决于CPU是怎样连接到内存，例如，其中一个CPU会先访问到内存，它占用总线，完成其内存操作后另一个CPU发生才能访问。哪一个CPU首先访问是不可预测的，但如果系统是被设计为顺序一致性的，那这并不重要。 
  笔记 - 习题 > 位置 11225 
  取决于CPU是怎样连接到内存，例如，其中一个CPU会先访问到内存，它占用总线，完成其内存操作后另一个CPU发生才能访问。哪一个CPU首先访问是不可预测的，但如果系统是被设计为顺序一致性的，那这并不重要。 
  标注 (黄色) - 习题 > 位置 11225 
3. 如果一个 CPU 在每条指令中都发出一个 
  笔记 - 习题 > 位置 11226 
  200-MIPS的计算机将发布2亿内存访问请求/秒，占用2亿的总线，即总线容量的一半。所以只需要两个CPU就会使总线饱和。缓存将内存请求数减少到2000万/秒，允许20个CPU共享总线。要使32个CPU 共享该总线，每个CPU需满足不超过1250万个请求/秒。如果2亿内存引用中只有1250万条在总线上出现，则缓存没有命中的概率为12.5 / 200，即6.25％，这意味着命中率为93.75％。 
  笔记 - 习题 > 位置 11226 
  200-MIPS的计算机将发布2亿内存访问请求/秒，占用2亿的总线，即总线容量的一半。所以只需要两个CPU就会使总线饱和。缓存将内存请求数减少到2000万/秒，允许20个CPU共享总线。要使32个CPU 共享该总线，每个CPU需满足不超过1250万个请求/秒。如果2亿内存引用中只有1250万条在总线上出现，则缓存没有命中的概率为12.5 / 200，即6.25％，这意味着命中率为93.75％。 
  标注 (黄色) - 习题 > 位置 11228 
4. 在图 8-5 的 omega 网络中， 
  笔记 - 习题 > 位置 11229 
  CPU000，010，100和110与存储器010和011被切断。 
  笔记 - 习题 > 位置 11229 
  CPU000，010，100和110与存储器010和011被切断。 
  标注 (黄色) - 习题 > 位置 11230 
5. 在图 8-7 的模型中，信号是如何处理 
  笔记 - 习题 > 位置 11230 
  每个CPU独立管理自己的信号。如果信号从键盘产生，并且键盘没有分配给任何特定的CPU（通常情况下），则必须将信号提供给正确的CPU来处理。 
  笔记 - 习题 > 位置 11230 
  每个CPU独立管理自己的信号。如果信号从键盘产生，并且键盘没有分配给任何特定的CPU（通常情况下），则必须将信号提供给正确的CPU来处理。 
  标注 (黄色) - 习题 > 位置 11230 
6. 使用纯 read 重写图 2-22 
  笔记 - 习题 > 位置 11230 
  enter_region: TST LOCK                             | Test the value of lock JNE ENTERREGION           | If it is nonzero, go try again TSL REGISTER,LOCK        | Copy lock to register and set lock to 1 CMP REGISTER,#0             | Was lock zero? JNE ENTERREGION           | If it was nonzero, lock was set, so loop RET                                        | Return to caller; critical region entered 
  笔记 - 习题 > 位置 11230 
  enter_region: TST LOCK                             | Test the value of lock JNE ENTERREGION           | If it is nonzero, go try again TSL REGISTER,LOCK        | Copy lock to register and set lock to 1 CMP REGISTER,#0             | Was lock zero? JNE ENTERREGION           | If it was nonzero, lock was set, so loop RET                                        | Return to caller; critical region entered 
  标注 (黄色) - 习题 > 位置 11231 
7. 多核 CPU 开始在普通的桌面机和笔记本电脑上出现，拥有数 
  笔记 - 习题 > 位置 11231 
  如文中所述，人们在编写高度并行的桌面应用程序方面几乎没有经验（和工具）。虽然桌面应用程序有时是多线程的，但线程通常用于简化I/O编程，因此它们不是计算密集型线程。具有大规模并行化的一个桌面应用领域是视频游戏，游戏的许多方面都需要大量（并行）计算。更可行的方法是并行化操作系统和库服务。已经可以在当前的硬件和操作系统设计中看到了这个例子。例如，网卡现在具有用于加速分组处理并且以线路速度（例如，加密，入侵检测等））提供更高级别的网络服务的板上并行处理器（网络处理器）。另一个例子，考虑到用于从主CPU分担视频渲染处理并向应用程序（例如Open GL）提供更高级别的图形API的视频卡上的强大处理器，可以想象用单芯片多核处理器替换这些专用卡。此外，随着核心数量的增加，可以使用相同的基本方法来并行化其他操作系统和库服务。 
  笔记 - 习题 > 位置 11231 
  如文中所述，人们在编写高度并行的桌面应用程序方面几乎没有经验（和工具）。虽然桌面应用程序有时是多线程的，但线程通常用于简化I/O编程，因此它们不是计算密集型线程。具有大规模并行化的一个桌面应用领域是视频游戏，游戏的许多方面都需要大量（并行）计算。更可行的方法是并行化操作系统和库服务。已经可以在当前的硬件和操作系统设计中看到了这个例子。例如，网卡现在具有用于加速分组处理并且以线路速度（例如，加密，入侵检测等））提供更高级别的网络服务的板上并行处理器（网络处理器）。另一个例子，考虑到用于从主CPU分担视频渲染处理并向应用程序（例如Open GL）提供更高级别的图形API的视频卡上的强大处理器，可以想象用单芯片多核处理器替换这些专用卡。此外，随着核心数量的增加，可以使用相同的基本方法来并行化其他操作系统和库服务。 
  标注 (黄色) - 习题 > 位置 11234 
8. 为了避免竞争，在 SMP 
  笔记 - 习题 > 位置 11234 
  可能锁定数据结构就足够了。很难想象任何一段代码可以做到这一点而不涉及一些内核数据结构。所有资源的获取和发布都使用数据结构。对数据结构加锁很有可能是足够的，虽然不能证明。 
  笔记 - 习题 > 位置 11234 
  可能锁定数据结构就足够了。很难想象任何一段代码可以做到这一点而不涉及一些内核数据结构。所有资源的获取和发布都使用数据结构。对数据结构加锁很有可能是足够的，虽然不能证明。 
  标注 (黄色) - 习题 > 位置 11236 
9. 在多处理器同步中 
  笔记 - 习题 > 位置 11236 
  每个TSL需要16个总线周期才能移动该块，同时它具有两路。因此，每50个总线周期有32个被移动缓存块占用。因此，64％的总线带宽被缓存来回移动占用。 
  笔记 - 习题 > 位置 11236 
  每个TSL需要16个总线周期才能移动该块，同时它具有两路。因此，每50个总线周期有32个被移动缓存块占用。因此，64％的总线带宽被缓存来回移动占用。 
  标注 (黄色) - 习题 > 位置 11240 
10. 课文中曾经建议 
  笔记 - 习题 > 位置 11240 
  是的，但是间插时间可能会非常久，性能下降。但这是正确的，即使没有最大限度。 
  笔记 - 习题 > 位置 11240 
  是的，但是间插时间可能会非常久，性能下降。但这是正确的，即使没有最大限度。 
  标注 (黄色) - 习题 > 位置 11242 
11. 假设在一个多处理器的同步处理中没有 TSL 指令。 
   笔记 - 习题 > 位置 11242 
   ：它和TSL一样好。它被用于将1加载到要使用的寄存器中。然后，该寄存器和内存字被原子地交换。在执行指令之后，存储器字被锁定（即，值为1），其以前的值现在包含在寄存器中。如果以前被加锁，该字未被更改，并且调用者必须循环等待。如果它以前没有加锁，现在被加锁。 
   笔记 - 习题 > 位置 11242 
   ：它和TSL一样好。它被用于将1加载到要使用的寄存器中。然后，该寄存器和内存字被原子地交换。在执行指令之后，存储器字被锁定（即，值为1），其以前的值现在包含在寄存器中。如果以前被加锁，该字未被更改，并且调用者必须循环等待。如果它以前没有加锁，现在被加锁。 
   标注 (黄色) - 习题 > 位置 11244 
12. 在本问题中，读者要 
   笔记 - 习题 > 位置 11244 
   该循环由TSL指令（5nsec），总线周期（10nsec）和回到TSL指令（5nsec）的JMP组成。因此，在20nsec中，请求1个总线周期占用10ns。该回路耗费50％的总线带宽。 
   笔记 - 习题 > 位置 11244 
   该循环由TSL指令（5nsec），总线周期（10nsec）和回到TSL指令（5nsec）的JMP组成。因此，在20nsec中，请求1个总线周期占用10ns。该回路耗费50％的总线带宽。 
   标注 (黄色) - 习题 > 位置 11248 
13. 图 8-12 用于 
   笔记 - 习题 > 位置 11248 
   A是刚刚选择的进程。在同一个CPU上可能会有其他的进程。 
   笔记 - 习题 > 位置 11248 
   A是刚刚选择的进程。在同一个CPU上可能会有其他的进程。 
   标注 (黄色) - 习题 > 位置 11248 
14. 亲和调度减少了高速缓冲的失效。它也减少 TLB 的失效吗？ 
   笔记 - 习题 > 位置 11249 
   亲和调度与将正确的线程放在正确的CPU上有关。这样做可能会减少TLB的失效，因为这些都保留在每个CPU之内。另一方面，它对缺页没有影响，因为如果页面位于一个CPU的内存中，则它位于所有CPU的内存中。 
   笔记 - 习题 > 位置 11249 
   亲和调度与将正确的线程放在正确的CPU上有关。这样做可能会减少TLB的失效，因为这些都保留在每个CPU之内。另一方面，它对缺页没有影响，因为如果页面位于一个CPU的内存中，则它位于所有CPU的内存中。 
   标注 (黄色) - 习题 > 位置 11249 
15. 对于图 8-16 中的每个拓扑结构 
   笔记 - 习题 > 位置 11249 
   连网络的直径是指：任意两台设备之间连接时通过的设备数目的最大值，所以，(a) 2；(b) 4；(c) 8；(d) 5；(e) 3；(f) 4。 
   笔记 - 习题 > 位置 11249 
   连网络的直径是指：任意两台设备之间连接时通过的设备数目的最大值，所以，(a) 2；(b) 4；(c) 8；(d) 5；(e) 3；(f) 4。 
   标注 (黄色) - 习题 > 位置 11250 
16. 考虑图 8-16 d 中的 
   笔记 - 习题 > 位置 11251 
   在网格上，最坏的情况是相反的角落的节点试图进行通信。然而，该拓扑有一个圆环，使得相反的角落只需要两跳。所以，该拓扑最坏的情况是试图与中间的一个节点通信。对于k为奇数时，需要(k-1)/2跳从角落到中间的横线，到中间竖线又需要(k-1)/2跳，总共为k-1跳。对于偶数的k，中间是四个点组成的正方形，所以最坏的情况是从角落到正方形最远的点。水平方向是k/2跳，垂直方向是k/2跳，所以直径为k。 
   笔记 - 习题 > 位置 11251 
   在网格上，最坏的情况是相反的角落的节点试图进行通信。然而，该拓扑有一个圆环，使得相反的角落只需要两跳。所以，该拓扑最坏的情况是试图与中间的一个节点通信。对于k为奇数时，需要(k-1)/2跳从角落到中间的横线，到中间竖线又需要(k-1)/2跳，总共为k-1跳。对于偶数的k，中间是四个点组成的正方形，所以最坏的情况是从角落到正方形最远的点。水平方向是k/2跳，垂直方向是k/2跳，所以直径为k。 
   标注 (黄色) - 习题 > 位置 11252 
17. 互联网络的平分贷款经常用来测试网络容量。其计算方法是， 
   笔记 - 习题 > 位置 11252 
   网络可以通过中间的平面切成两个，给出两个系统，每个系统具有8×8×4的几何形状。两个半部之间有64个链路，平分带宽为64Gbps。 
   笔记 - 习题 > 位置 11252 
   网络可以通过中间的平面切成两个，给出两个系统，每个系统具有8×8×4的几何形状。两个半部之间有64个链路，平分带宽为64Gbps。 
   标注 (黄色) - 习题 > 位置 11255 
18. 如果多计算机系统中的网络接口处于用户模式，那么从源 RAM 到目的 RAM 只需要三个副本。 
   笔记 - 习题 > 位置 11255 
   如果考虑网络时间，则每位数据需要1ns，即每个数据包需要512ns延迟。要一次复制64字节，每侧需要320ns，共640ns，加上512ns传输时间，总共延时1132ns。如果需要两个附加副本，需要1792ns 
   笔记 - 习题 > 位置 11255 
   如果考虑网络时间，则每位数据需要1ns，即每个数据包需要512ns延迟。要一次复制64字节，每侧需要320ns，共640ns，加上512ns传输时间，总共延时1132ns。如果需要两个附加副本，需要1792ns 
   标注 (黄色) - 习题 > 位置 11258 
19. 对于三次复制和五次复制的情形 
   笔记 - 习题 > 位置 11259 
   如果考虑网络时间，则每位数据需要1ns，即每个数据包需要512ns延迟。要一次复制64字节，每侧需要320ns，共640ns，加上512ns传输时间，总共延时1132ns。如果需要两个附加副本，需要1792ns 
   笔记 - 习题 > 位置 11259 
   如果考虑网络时间，则每位数据需要1ns，即每个数据包需要512ns延迟。要一次复制64字节，每侧需要320ns，共640ns，加上512ns传输时间，总共延时1132ns。如果需要两个附加副本，需要1792ns 
   标注 (黄色) - 习题 > 位置 11260 
20. 在共享存储器多处理器和多计算机之间 send 和 receive的实现 
   笔记 - 习题 > 位置 11260 
   在共享存储器的多计算机上，可以将执行发送的CPU的指针传递给执行接收的CPU，并在虚拟和物理内存地址之间进行可能的转换。在没有共享内存的多计算机上，一个CPU地址空间中的地址对另一个CPU没有意义，因此必须将发送缓冲区中的实际内容作为数据包传输，然后在接收缓冲区中重新组合。对于程序员来说，这个过程看起来是一样的，但是在多计算机上所需的时间要长得多。 
   笔记 - 习题 > 位置 11260 
   在共享存储器的多计算机上，可以将执行发送的CPU的指针传递给执行接收的CPU，并在虚拟和物理内存地址之间进行可能的转换。在没有共享内存的多计算机上，一个CPU地址空间中的地址对另一个CPU没有意义，因此必须将发送缓冲区中的实际内容作为数据包传输，然后在接收缓冲区中重新组合。对于程序员来说，这个过程看起来是一样的，但是在多计算机上所需的时间要长得多。 
   标注 (黄色) - 习题 > 位置 11261 
21. 在将数据从 RAM 传送到网络接口时， 
   笔记 - 习题 > 位置 11261 
   通过编程I/O移动k个字节的时间是20k ns。 DMA的时间为2000 + 5k ns，令20k = 2000 + 5k，得到k = 133字节的平衡点。（原文题目有点问题） 
   笔记 - 习题 > 位置 11261 
   通过编程I/O移动k个字节的时间是20k ns。 DMA的时间为2000 + 5k ns，令20k = 2000 + 5k，得到k = 133字节的平衡点。（原文题目有点问题） 
   标注 (黄色) - 习题 > 位置 11263 
22. 将一个过程从一台机器中取出并且放到另一台机器 
   笔记 - 习题 > 位置 11263 
   显然，如果远程过程执行系统调用，会发生错误。如果文件不存在，尝试读取远程计算机上的文件将无法正常工作。另外，在远程机器上设置定时器不会将信号发送回主叫机。处理远程系统调用的一种方法是将其陷阱并将其发回原始站点执行。 
   笔记 - 习题 > 位置 11263 
   显然，如果远程过程执行系统调用，会发生错误。如果文件不存在，尝试读取远程计算机上的文件将无法正常工作。另外，在远程机器上设置定时器不会将信号发送回主叫机。处理远程系统调用的一种方法是将其陷阱并将其发回原始站点执行。 
   标注 (黄色) - 习题 > 位置 11266 
23. 在 DSM 系统中，当出现一个页面故障时，必须 
   笔记 - 习题 > 位置 11266 
   首先，在广播网络上，可以进行广播请求。第二，一个集中维护页面的数据库。第三，每个页面可以具有由其虚拟地址的高k位指示的初始基地址，初始基地址可以跟踪每个页面的位置。 
   笔记 - 习题 > 位置 11266 
   首先，在广播网络上，可以进行广播请求。第二，一个集中维护页面的数据库。第三，每个页面可以具有由其虚拟地址的高k位指示的初始基地址，初始基地址可以跟踪每个页面的位置。 
   标注 (黄色) - 习题 > 位置 11267 
24. 考虑图 8-24 中的处理器分配。 
   笔记 - 习题 > 位置 11267 
   在该分割中，节点1具有A，E和G，节点2具有B和F，节点3具有C，D，H和I。节点1和节点2之间的分割现在包含AB和EB，节点2和节点3之间的分割现在包含流量为14的CD，CI，FI和FH。节点1和3之间的分割现在包含流量为8的EH和GH。外部信息流量总和为27。 
   笔记 - 习题 > 位置 11267 
   在该分割中，节点1具有A，E和G，节点2具有B和F，节点3具有C，D，H和I。节点1和节点2之间的分割现在包含AB和EB，节点2和节点3之间的分割现在包含流量为14的CD，CI，FI和FH。节点1和3之间的分割现在包含流量为8的EH和GH。外部信息流量总和为27。 
   标注 (黄色) - 习题 > 位置 11268 
25. 某些多计算机允许把运行着的进程从一个节点迁移到另一个节点。停止 
   笔记 - 习题 > 位置 11268 
   打开文件的表保存在内核中，所以如果一个进程有打开的文件，当它被解冻并尝试使用其中一个文件时，新的内核并不知道这些文件。第二个问题是信号掩码，也存储在原来的内核上。第三个问题是如果一个定时挂起，它将在错误的计算机上被关闭。一般来说，内核包含了很多关于进程的信息，必须成功迁移这些信息。 
   笔记 - 习题 > 位置 11268 
   打开文件的表保存在内核中，所以如果一个进程有打开的文件，当它被解冻并尝试使用其中一个文件时，新的内核并不知道这些文件。第二个问题是信号掩码，也存储在原来的内核上。第三个问题是如果一个定时挂起，它将在错误的计算机上被关闭。一般来说，内核包含了很多关于进程的信息，必须成功迁移这些信息。 
   标注 (黄色) - 习题 > 位置 11270 
26. 考虑能同时支持最多 n 个虚拟机的 I 型管理程序， PC 
   笔记 - 习题 > 位置 11270 
   虚拟机与磁盘分区无关。虚拟机管理程序可以使用单个磁盘分区，并将其划分为子分区，并为每个虚拟机提供其中一个。原则上可以有数百个。它可以将磁盘静态划分为n个块，或者按要求执行此操作。 
   笔记 - 习题 > 位置 11270 
   虚拟机与磁盘分区无关。虚拟机管理程序可以使用单个磁盘分区，并将其划分为子分区，并为每个虚拟机提供其中一个。原则上可以有数百个。它可以将磁盘静态划分为n个块，或者按要求执行此操作。 
   标注 (黄色) - 习题 > 位置 11271 
27. 处理客户操作系统使用普通（非特权）指令改变页表的一个方式是将页表标记为只读，所以当它被修改 
   笔记 - 习题 > 位置 11272 
   页表只能由客户操作系统修改，而不能由访客中的应用程序修改。当客户操作系统完成表的修改时，必须通过发出敏感指令（如RETURN FROM TRAP）切换回用户模式。该指令导致系统陷入并给予管理程序控制。然后，它可以检查客户操作系统中的页表，看看它们是否被修改。虽然这可以起作用，但是必须在访客应用程序所做的每个系统上检查所有的页表，也就是每次客户操作系统返回到用户模式时，每秒可能会有数千个这样的转换，因此它不可能像只读页表方式一样高效。 
   笔记 - 习题 > 位置 11272 
   页表只能由客户操作系统修改，而不能由访客中的应用程序修改。当客户操作系统完成表的修改时，必须通过发出敏感指令（如RETURN FROM TRAP）切换回用户模式。该指令导致系统陷入并给予管理程序控制。然后，它可以检查客户操作系统中的页表，看看它们是否被修改。虽然这可以起作用，但是必须在访客应用程序所做的每个系统上检查所有的页表，也就是每次客户操作系统返回到用户模式时，每秒可能会有数千个这样的转换，因此它不可能像只读页表方式一样高效。 
   标注 (黄色) - 习题 > 位置 11273 
28. VMware 每次对一个基本块进行二进制转换 
   笔记 - 习题 > 位置 11274 
   它可以提前转换整个程序。不这样做的原因是许多程序都有大量的代码永远不会执行。通过按需转换基本块，未使用的代码没有被转换。按需转换的潜在缺点是，保持开始和停止转换的效率可能略低，但这种效果可能很小。 
   笔记 - 习题 > 位置 11274 
   它可以提前转换整个程序。不这样做的原因是许多程序都有大量的代码永远不会执行。通过按需转换基本块，未使用的代码没有被转换。按需转换的潜在缺点是，保持开始和停止转换的效率可能略低，但这种效果可能很小。 
   标注 (黄色) - 习题 > 位置 11275 
29. 如果一个操作系统的源代码可以得到，对半虚拟化一个操作系统有意义吗 
   标注 (黄色) - 习题 > 位置 11276 
30. 各种 PC 在底层会有微小的差别，例如如何管理时钟、如何处理中断以及 DMA 
   笔记 - 习题 > 位置 11277 
   不，这些差异可能意味着将虚拟机管理程序从一个平台移植到另一个平台需要一些调整，但机器仿真在所有情况下都是一样的，所以虚拟设备可以在任何机器上工作。 
   笔记 - 习题 > 位置 11277 
   不，这些差异可能意味着将虚拟机管理程序从一个平台移植到另一个平台需要一些调整，但机器仿真在所有情况下都是一样的，所以虚拟设备可以在任何机器上工作。 
   标注 (黄色) - 习题 > 位置 11278 
31. 在以太网上为什么 
   笔记 - 习题 > 位置 11278 
   以太网节点必须能够检测分组之间的冲突，因此两个距离最远的节点之间的传输时延必须小于要发送的最短分组的持续时间。否则，即使分组与电缆另一端的节点发送的分组发生碰撞，发送方也完全发送分组，并且检测不到冲突。 
   笔记 - 习题 > 位置 11278 
   以太网节点必须能够检测分组之间的冲突，因此两个距离最远的节点之间的传输时延必须小于要发送的最短分组的持续时间。否则，即使分组与电缆另一端的节点发送的分组发生碰撞，发送方也完全发送分组，并且检测不到冲突。 
   标注 (黄色) - 习题 > 位置 11279 
32. 在一台 PC 上运行多个虚拟机需要大量的内存，为什么 
   笔记 - 习题 > 位置 11279 
   该机器不仅需要提供正常（客户）操作系统及其所有应用程序的内存，而且还需要提供代表客户操作系统执行敏感指令的管理程序所需的功能和数据结构的内存。类型2管理程序还具有主机操作系统的附加成本。而且，每个虚拟机都有自己的操作系统，所以会有N个操作系统拷贝存储在内存中。减少内存使用的一种方法是识别“共享代码”，并且只将该代码的一个副本保留在内存中。例如，一个网络服务器公司可能会运行多个虚拟机，每个虚拟机都运行相同版本的Linux操作系统代码和Apache Web服务器代码的相同副本。在这种情况下，代码段可以跨VM共享，即使数据区域必须是私有的。 
   笔记 - 习题 > 位置 11279 
   该机器不仅需要提供正常（客户）操作系统及其所有应用程序的内存，而且还需要提供代表客户操作系统执行敏感指令的管理程序所需的功能和数据结构的内存。类型2管理程序还具有主机操作系统的附加成本。而且，每个虚拟机都有自己的操作系统，所以会有N个操作系统拷贝存储在内存中。减少内存使用的一种方法是识别“共享代码”，并且只将该代码的一个副本保留在内存中。例如，一个网络服务器公司可能会运行多个虚拟机，每个虚拟机都运行相同版本的Linux操作系统代码和Apache Web服务器代码的相同副本。在这种情况下，代码段可以跨VM共享，即使数据区域必须是私有的。 
   标注 (黄色) - 习题 > 位置 11280 
33. 在图 8-30 中，四台机器上的第三层和第四层标记 
   笔记 - 习题 > 位置 11280 
   中间件在不同的操作系统上运行，所以代码明显不同，因为嵌入式的系统调用是不同的。它们共同的是生成一个与上面的应用层通用的接口。如果应用层只调用中间件层，并且没有系统调用，那么它的所有版本都可以具有相同的源代码。如果它们也进行真正的系统调用，这些将不同。 
   笔记 - 习题 > 位置 11280 
   中间件在不同的操作系统上运行，所以代码明显不同，因为嵌入式的系统调用是不同的。它们共同的是生成一个与上面的应用层通用的接口。如果应用层只调用中间件层，并且没有系统调用，那么它的所有版本都可以具有相同的源代码。如果它们也进行真正的系统调用，这些将不同。 
   标注 (黄色) - 习题 > 位置 11281 
34. 在图 8-33 中列出了 
   笔记 - 习题 > 位置 11281 
   最合适的服务是： （a）不可靠的连接。 （b）可靠的字节流。 
   笔记 - 习题 > 位置 11281 
   最合适的服务是： （a）不可靠的连接。 （b）可靠的字节流。 
   标注 (黄色) - 习题 > 位置 11283 
35. DNS 的名称有一个层次结构，如 cs.uni.edu 或sales.general-widget.com。 
   笔记 - 习题 > 位置 11283 
   它是分级维护的。有一个全球服务器.edu知道所有的大学和一个全球服务器.com知道所有以.com结尾的名字。因此，要查找cs.uni.edu，一台机器将首先在.edu服务器上查找uni，然后去那里询问有关cs的信息，依此类推。 
   笔记 - 习题 > 位置 11283 
   它是分级维护的。有一个全球服务器.edu知道所有的大学和一个全球服务器.com知道所有以.com结尾的名字。因此，要查找cs.uni.edu，一台机器将首先在.edu服务器上查找uni，然后去那里询问有关cs的信息，依此类推。 
   标注 (黄色) - 习题 > 位置 11285 
36. 在讨论浏览器如何处理URL时，曾经说明与 
   笔记 - 习题 > 位置 11285 
   计算机可能有许多进程等待传入的连接。这些进程可能是Web服务器，邮件服务器，新闻服务器等。需要一些方法来使传入的连接指向某个特定的进程。这是通过让每个进程监听特定端口来完成的。已经规定Web服务器监听端口80，因此指向Web服务器的传入连接被发送到端口80。端口数字可以任意选择，但是必须选择一个数字。 
   笔记 - 习题 > 位置 11285 
   计算机可能有许多进程等待传入的连接。这些进程可能是Web服务器，邮件服务器，新闻服务器等。需要一些方法来使传入的连接指向某个特定的进程。这是通过让每个进程监听特定端口来完成的。已经规定Web服务器监听端口80，因此指向Web服务器的传入连接被发送到端口80。端口数字可以任意选择，但是必须选择一个数字。 
   标注 (黄色) - 习题 > 位置 11286 
37. 虚拟机迁移可能比进程迁移容易，但是迁移仍然是困难的。在虚拟机迁移 
   笔记 - 习题 > 位置 11286 
   物理I/O设备仍然存在问题，因为它们不与虚拟机一起迁移，但是它们的寄存器可能保存着对系统正常运行至关重要的状态，比如对已经发布但尚未完成的设备（例如，磁盘）进行读取或写入操作。网络I/O特别困难，因为其他机器将继续向管理程序发送数据包，不知道虚拟机已移动。即使数据包可以重定向到新的虚拟机管理程序，虚拟机在迁移期间将无响应，这个时间可能很长，因为包括客户机操作系统在内的整个虚拟机必须移动到新机器上。因此，如果设备/管理程序缓冲区溢出，数据包可能会遇到很大的延迟甚至数据包会丢失。 
   笔记 - 习题 > 位置 11286 
   物理I/O设备仍然存在问题，因为它们不与虚拟机一起迁移，但是它们的寄存器可能保存着对系统正常运行至关重要的状态，比如对已经发布但尚未完成的设备（例如，磁盘）进行读取或写入操作。网络I/O特别困难，因为其他机器将继续向管理程序发送数据包，不知道虚拟机已移动。即使数据包可以重定向到新的虚拟机管理程序，虚拟机在迁移期间将无响应，这个时间可能很长，因为包括客户机操作系统在内的整个虚拟机必须移动到新机器上。因此，如果设备/管理程序缓冲区溢出，数据包可能会遇到很大的延迟甚至数据包会丢失。 
   标注 (黄色) - 习题 > 位置 11287 
38. 在显示网页中使用的URL可以透明 
   笔记 - 习题 > 位置 11287 
   可以。例如，对www.intel.com的服务器的位置一无所知。 
   笔记 - 习题 > 位置 11287 
   可以。例如，对www.intel.com的服务器的位置一无所知。 
   标注 (黄色) - 习题 > 位置 11288 
39. 当浏览器获取一个网页时，它首先发起一个 TCP 链接以获得页面上的文本 
   笔记 - 习题 > 位置 11288 
   一种方式是Web服务器将整个页面（包括所有图像）打包在一个大的zip文件中，并且首次发送整个页面，以便只需要一个连接。第二种方法是使用无连接协议，如UDP。这将消除连接开销，但需要服务器和浏览器自己进行差错控制 
   笔记 - 习题 > 位置 11288 
   一种方式是Web服务器将整个页面（包括所有图像）打包在一个大的zip文件中，并且首次发送整个页面，以便只需要一个连接。第二种方法是使用无连接协议，如UDP。这将消除连接开销，但需要服务器和浏览器自己进行差错控制 
   标注 (黄色) - 习题 > 位置 11290 
40. 在使用会话语义时，有一项总是成立的，即一个文件的修改对于进行该修改的进程而言是立即可见的，而 
   笔记 - 习题 > 位置 11291 
   读操作得到的值取决于进程是否与最后一个修改的进程在同一台机器上。这是为了使更改只对进行更改的进程可见。另一方面，具有单个缓存管理器的机器是更容易实现，且更便宜。如果必须维护每个被修改的文件的多个副本，管理进程会变得更加复杂，其返回值取决于哪个进程正在执行读操作。 
   笔记 - 习题 > 位置 11291 
   读操作得到的值取决于进程是否与最后一个修改的进程在同一台机器上。这是为了使更改只对进行更改的进程可见。另一方面，具有单个缓存管理器的机器是更容易实现，且更便宜。如果必须维护每个被修改的文件的多个副本，管理进程会变得更加复杂，其返回值取决于哪个进程正在执行读操作。 
   标注 (黄色) - 习题 > 位置 11292 
41. 当有多个进程需要访问数据时，基于对象 
   笔记 - 习题 > 位置 11293 
   共享内存与整个页面一起使用。这可能导致虚假共享，访问发生在同一页面上的无关变量时会导致颠簸。将每个变量放在单独的页面上是浪费的。基于对象的访问消除了这些问题，并允许更细微的共享。 
   笔记 - 习题 > 位置 11293 
   共享内存与整个页面一起使用。这可能导致虚假共享，访问发生在同一页面上的无关变量时会导致颠簸。将每个变量放在单独的页面上是浪费的。基于对象的访问消除了这些问题，并允许更细微的共享。 
   标注 (黄色) - 习题 > 位置 11293 
42. 在 Linda 的 in 操作完成对一个元组的定位之后，线性地查询整个元组空间 
   笔记 - 习题 > 位置 11294 
   当元组插入到元组空间中时，对元组的任何字段进行散列没有帮助，因为in可能具有大多数正式的参数。总是有效的一个优化是注意到所有的out和in的所有字段都是键入的。因此，元组空间中所有元组的类型签名是已知的，并且元数据所需的元组类型也是已知的。建议为每个类型签名创建一个元组子空间。例如，所有的(int，int，int)元组都进入一个空间，所有的(string，int，float)元组都进入一个不同的空间。当执行in时，只能搜索匹配的子空间。 
   笔记 - 习题 > 位置 11294 
   当元组插入到元组空间中时，对元组的任何字段进行散列没有帮助，因为in可能具有大多数正式的参数。总是有效的一个优化是注意到所有的out和in的所有字段都是键入的。因此，元组空间中所有元组的类型签名是已知的，并且元数据所需的元组类型也是已知的。建议为每个类型签名创建一个元组子空间。例如，所有的(int，int，int)元组都进入一个空间，所有的(string，int，float)元组都进入一个不同的空间。当执行in时，只能搜索匹配的子空间。 
   标注 (黄色) - 习题 > 位置 11295 
43. 缓存区的复制很花费时间。写一个 C 程序找出 
