#现代操作系统 第12章 实例研究3：Symbian

（原书第3版） (计算机科学丛书)

Andrews Tanenbaum

Citation (APA): Tanenbaum, A. (2019). *现代操作系统（原书第3版） (计算机科学丛书)* [Kindle Android version]. Retrieved from Amazon.com

------

##12.1 Symbian操作系统的历史

- Symbian 操作系统的历史相对较短。它起源于20 世纪90 年代研发的操作系统，首次出现则是在2001 年。

###12.1.1 Symbian 操作系统的起源： Psion 和EPOC

- Symbian 操作系统继承于某些最初的掌上设备
  - 掌上设备也逐渐包含了通信功能
- 在 20 世纪 90 年代， Psion 电脑公司制造了 PDA 设备
  - 程序是用 C 语言实现的，利用面向对象设计，并采用了“应用引擎”—— Symbian操作系统发展中的一个重要部分
- 1996 年， Psion 开始设计一种新型的 32 位操作系统，它支持触摸屏上的定位设备，采用多媒体技术，并且具有更丰富的通信功能
  - Psion 的付出所得到的结果是系统 EPOC 版本 1 的推出
    - EPOC 由 C + + 编程实现，并且是彻底的面向对象的设计
- Psion 同时也试图强调它的操作系统可以适用于其他硬件平台。
  - 这一新的内核设计现在称为 Symbian 操作系统。 

### 12.1.2 Symbian 操作系统版本 6 

- 鉴于 EPOC 的最后一个版本为 ER5，因此 Symbian 操作系统在 2001 年以版本 6 首发。
  - 同时， Symbian 操作系统将会积极采用现代最先进的、成熟的关键技术
- Symbian 操作系统版本 6 被它的设计者们称为“开放的”。

###12.1.3 Symbian 操作系统版本

- Symbian 操作系统版本 6 在设计和功能上很像 EPOC 以及版本 6 以前的版本。它的设计主要着眼于移动电话
  - Symbian 操作系统版本 7 保了 EPOC 的台式机功能，但是大部分系统内部被重写了以包含多种智能手机功能

### 12.1.4 今天的Symbian操作系统 

- Symbian 操作系统版本 7 是一个重要的版本，因为它将抽象性以及灵活性带入了操作系统。
  - 然而，这种抽象是有代价的。
- 于是重写操作系统的工程又开始了，这次主要着眼于性能
  - 这个Symbian 操作系统是由一个掌上设备操作系统发展成为一个以实时性能作为目标的用在智能手机平台上的操作系统。

##12.2 Symbian操作系统概述

- Symbian 是一个独特的操作系统，因为它是以智能手机作为目标平台的。
- Symbian 操作系统继承了其前身的最佳的特性，

### 12.2.1 面向对象

- 面向对象是一个意味着抽象的术语
- 在一个面向对象的设计中，针对某个系统成分的数据和功能，建立一个抽象的实体，称为对象。
- 当面向对象应用到操作系统设计中时，就意味着所有的系统调用以及内核端功能的使用均要通过接口，而不能直接获取实际数据或依靠其他类型的实现。 
- Symbian 操作系统采用了面向对象的设计。系统功能的实现是隐藏的，系统数据的使用通过系统对象已定义的接口完成。
- 需要注意的是 Symbian 操作系统与其他在设计中运用了面向对象理念的操作系统不同。 

### 12.2.2 微内核设计

- 具有面向对象内在特性的Symbian操作系统的内核结构是微内核设计
  - 典型的基于微内核的操作系统初始化引导时占用较少的内存，并且其结构也更加动态。
- Symbian 操作系统被设计为基于微内核的操作系统。
- 这种微内核的设计也带来了一些需要探讨的话题

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17041

这些性能问题使得 Symbian操作系统（以及其他基于微内核的操作系统）的设计者们对于设计以及实现细节给予了极大关注。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17045

12.2.3 Symbian 操作系统纳核 Symbian 操作系统的设计者们在操作系统设计的核心采用了一种纳核的结构来处理微内核所具有的问题

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17048

在 Symbian 操作系统中，纳核提供部分最基本的功能。在纳核中，运行在特权级别的简单线程完成着十分初级的功能

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17051

这种纳核的设计需要一个二级层次来实现较为复杂的内核功

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17056

图 12-1 展示了一个完整的Symbian操作系统内核的结构。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17061

12.2.4 客户机/服务器资源访问

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17061

那样，Symbian操作系统使用微内核设计并使用客户机/服务器模型来访问系统资源。需要访问系统资源的应用是客户端，操作系统中运行着的用来协调资源访问的程序是服务器端。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17066

这样做对于保护资源有着几点好处。首先，它符合操作系统的面向对象以及微内核的设计

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17067

其次，这种结构对于管理多任务、多线程系统中所需要的资源多重访问十分有效。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17072

12.2.5 较大型操作系统的特点

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17074

Symbian 操作系统与较大型的操作系统有一些共同的特性。

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17074

·进程与线程： Symbian 操作系统是一个多任务多线程的操作系统。

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17076

·常见文件系统支持：Symbian操作系统利用一个文件系统模型来管理对系统存储空间的访问，正如大型操作系统一样。

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17079

·网络： Symbian 操作系统支持 TCP /IP 网络以及其他的通信接口

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17080

·内存管理：尽管 Symbian操作系统不使用（也没有相应的设备）虚拟内存映射，但它通过按页管理实现对内存访问，并支持页的置换，也就是说支持页面

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17081

入，但不支持页面换出。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17084

12.2.6 通信与多媒体 Symbian 操作系统以多种方式协助通信

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17086

结构。Symbian操作系统的通信结构是以模块形式建立的，从而允许新的通信机制方便地接入操作系统。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17088

由于 Symbian 操作系统只针对智能手机平台，因此有许多独特的特点。

标注 (蓝色) - 12.2 Symbian操作系统概述 >  位置 17089

它具有一个可插拔的消息结构，可以引入新的消息类型，并可以通过消息服务器动态加载的模块来实现。

标注 (黄色) - 12.2 Symbian操作系统概述 >  位置 17093

Symbian 操作系统的核心设计有专门针对多媒体的各种API。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17099

Symbian 操作系统是一个多任务操作系统，像其他操作系统那样，使用了进程和线程的概念。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17101

12.3.1 线程和纳线程

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17102

对于多任务，Symbian操作系统更倾向于线程，并且是建立在线程概念上的，而不是把进程作为多任务的基础。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17104

Symbian 操作系统对于线程的支持是基于纳线程的纳核。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17107

每个纳线程需要一个数据的极小集来运行：实质上就是它的栈以及栈的大小。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17109

Symbian 操作系统的纳核使用的模型在基本模型中增加了一些状态。除了基本状态以外，纳线程还可以处于如下状态：

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17111

·挂起。这就是当一个线程挂起另一个线程时的状态，与等待状态不同，在等待状态下一个线程是被某个上层对象阻塞

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17112

·快速信号量等待。处于这个状态的线程正在等待一个快速信号量（哨兵变量的一种）得到信号通知。快速信号量是纳核级别的信号量。 ·DFC 等待。处于这种状态的线程正在等待一个延迟的函数调用或者要被加入到 DFC 队列中的 DFC。 

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17115

·休眠。休眠线程正在等候特定长度的时间过去。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17116

·其他。还有一种通用状态，是当开发人员为纳线程实现额外的状态时使用的。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17118

下面将纳线程思想与传统进程思想作比较。纳线程实际上是一个完全轻量级的进程。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17121

Symbian 操作系统线程依赖于纳线程，内核增加除纳核提供的功能之外的支持。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17124

Symbian 操作系统线程在纳线程实现之上实现自己的状态集。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17126

Symbian 操作系统添加了Symbian 操作系统线程可以进入的新的七种状态，来关注Symbian 操作系统线程可能出现的特殊阻塞条件。这些特殊状态包括在信号量上的等待和挂起（正常的）、互斥变量以及条件变量。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17132

12.3.2 进程 Symbian 操作系统的进程，就是在一个单一的进程控制块结构下，具有一个单一存储空间的，归于一类的 Symbian 操作系统的线程组。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17135

Symbian 操作系统线程通过几种方式，在一个单一进程的组织下工作在一起。首先，有一个主线程被标志为进程的起始点。其次，线程共享调度参数

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17137

。第三，线程共享包括设备和其他对象描述符的存储空间对象。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17138

最后，当一个进程终止时，内核终止该进程的所有线程。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17141

12.3.3 活动对象活动对象是线程的特有形式，用这种方式实现以便减轻它们带给操作环境的负担。Symbian

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17145

由于活动对象运行在用户空间，因此它们具有 Symbian 操作系统线程的特性。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17148

活动对象的关键点体现在调度上。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17150

通过将在其他方面作为多线程执行的代码结合到一个线程中，通过构建固定的入口点进入代码，以及通过使用一个单一调度器来协调它们的执行，活动对象构成了标准线程的一种高效、轻量版本。 

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17152

认识到活动对象和 Symbian操作系统进程结构在何处融合成为一体是很重要的。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17159

12.3.4 进程间通信在类似 Symbian 操作系统的多线程环境中，进程间通信对系统性能是至关重要的。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17161

套接字是 Symbian 操作系统使用的基本通信模型

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17163

套接字模型也构成了设备I/ O 的基础。抽象再次成为使这一模型更加有效的关键。

标注 (黄色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17166

Symbian 操作系统实现了通用操作系统上使用的标准同步原语。

标注 (蓝色) - 12.3 Symbian操作系统中的进程和线程 >  位置 17167

操作系统中广泛地使用了信号量和互斥量的一些形式

标注 (黄色) - 12.4 内存管理 >  位置 17171

诸如 Linux 和 Windows 系统中的内存管理使用了很多我们前面讲过的关于实现内存资源管理的概念。

标注 (黄色) - 12.4 内存管理 >  位置 17173

Symbian 操作系统和实际的通用操作系统一样，也必须提供内存管理模式。

标注 (黄色) - 12.4 内存管理 >  位置 17176

12.4.1 没有虚拟内存的系统

标注 (黄色) - 12.4 内存管理 >  位置 17177

许多计算机系统没有提供成熟的支持按需分页的虚拟内存的设备。

标注 (黄色) - 12.4 内存管理 >  位置 17180

这些系统一般都有两种类型的存储介质： RAM 和闪存。 RAM 存储操作系统代码（当系统启动时使用），闪存用作操作内存和永久性（文件）存储介质。 

标注 (黄色) - 12.4 内存管理 >  位置 17182

没有支持按需分页的虚拟内存不代表缺少内存管理

标注 (黄色) - 12.4 内存管理 >  位置 17186

内存管理包含如下的任务： ·应用程序大小的管理：应用程序的大小（所有的代码和数据）对如何使用内存有很大的影响。

标注 (蓝色) - 12.4 内存管理 >  位置 17189

·堆的管理：堆（用来进行动态内存分配的空间）在较小的平台上必须严格地管理

标注 (蓝色) - 12.4 内存管理 >  位置 17191

·就地执行：没有磁盘设备的平台通常支持就地执行。

标注 (蓝色) - 12.4 内存管理 >  位置 17193

·加载动态链接库：什么时候加载动态链接库的选择会明显影响系统性能

标注 (蓝色) - 12.4 内存管理 >  位置 17197

·卸下内存管理给硬件：如果有 MMU，尽可能地使用它。

标注 (黄色) - 12.4 内存管理 >  位置 17198

即使使用就地执行的规则，较小的平台仍然需要保留一部分内存用作操作系统操作。

标注 (蓝色) - 12.4 内存管理 >  位置 17199

首先，一些操作系统采用一种十分简单的方法，内存根本不分页。

标注 (蓝色) - 12.4 内存管理 >  位置 17202

第二种方法是使用一种更加有规则的方法，内存被切分成为页，这些页按照操作需要分配。

标注 (粉色) - 12.4 内存管理 >  位置 17205

Symbian 操作系统是第二种方法的例子。

标注 (黄色) - 12.4 内存管理 >  位置 17208

12.4.2 Symbian 操作系统的寻址方式由于 Symbian 操作系统是32位系统，因此寻址范围可以达到 4GB 。它与更大的系统一样使用同样的抽象方式：程序必须使用由操作系统映射到物理地址的虚拟地址。

标注 (黄色) - 12.4 内存管理 >  位置 17211

因为最大具有 4GB 的地址空间，因此 4KB 的页框大小就意味着具有超过 100 万条目的页表。Symbian

标注 (黄色) - 12.4 内存管理 >  位置 17213

为了解决这个问题，Symbian 操作系统采用2 级页表方式，如图12-2 所示。称作页面目录的第一级提供一个到第二级的链接，可以使用虚拟地址的一部分进行检索（前12 位）。该目录驻留在内存中，由TTBR（转换表基址寄存器）指向。每个目录条目指向第二级，也就是页表的集合。这些页表提供到某一内存中特定页的链接，由虚拟地址的一部分检索（中间8 位）。最后，虚拟地址的低12 位索引检索页的字。

标注 (黄色) - 12.4 内存管理 >  位置 17220

当一个页面不在内存中时，就会出现错误状态，这是因为当一个应用程序启动的时候所有的应用程序内存页面都应该已经被加载（没有请求页面调度）。 

标注 (黄色) - 12.4 内存管理 >  位置 17222

Symbian 操作系统中尽管没有页交换，但内存却不可思议地是动态的。

标注 (黄色) - 12.4 内存管理 >  位置 17228

实际上 Symbian 操作系统使用的存储实现模型有四种不同的版本。

标注 (黄色) - 12.4 内存管理 >  位置 17230

·移动模型：该模型是为早期的 ARM 体系结构设计的。移动模型中的页目录是 4KB 长，每个条目 4 字节，给出一块 16KB 大小的目录。通过与页框相关的存取位和使用域来标志存储器访问的方式保护存储页面。域信息记录在页表目录， MMU 为每个域实现访问权限。 

标注 (黄色) - 12.4 内存管理 >  位置 17233

·复合模型：该模型是为ARM6或者之后的体系开发的模式。这些版本中的 MMU 与以前版本使用的不同

标注 (黄色) - 12.4 内存管理 >  位置 17236

·直接模型：该模型假定根本就没有 MMU

标注 (黄色) - 12.4 内存管理 >  位置 17238

·仿真模型：该模型是为了支持基于 windows 宿主机的Symbian操作系统仿真器。

标注 (黄色) - 12.5 输入和输出 >  位置 17244

Symbian 操作系统的输入 /输出结构仿照其他操作系统的设计。

标注 (黄色) - 12.5 输入和输出 >  位置 17246

12.5.1 设备驱动在 Symbian 操作系统中，设备驱动作为具有内核权限的代码运行，从而赋予用户级别的代码对系统保护资源的访问能力。 

标注 (黄色) - 12.5 输入和输出 >  位置 17248

Symbian 操作系统中的设备驱动分为两层：一个是逻辑设备驱动（ LDD），一个是物理设备驱动（ PDD）。 LDD 为上层软件提供一个接口，而 PDD 直接与硬件进行交互。

标注 (黄色) - 12.5 输入和输出 >  位置 17251

考虑串行设备的一个例子。Symbian操作系统定义了一个通用的串行 LDD ，该 LDD 定义了访问串行设备的程序接口。

标注 (黄色) - 12.5 输入和输出 >  位置 17255

当 LDD 和 PDD 不在内存中时，它们可以由用户程序动态地加载进内存

标注 (黄色) - 12.5 输入和输出 >  位置 17259

12.5.2 内核扩展内核扩展就是 Symbian 操作系统在引导时刻加载的驱动程序。

标注 (蓝色) - 12.5 输入和输出 >  位置 17261

内核扩展与标准的设备驱动不同。

标注 (黄色) - 12.5 输入和输出 >  位置 17262

内核扩展是引导过程的一部分。

标注 (蓝色) - 12.5 输入和输出 >  位置 17263

这些特殊的设备驱动在调度器启动之后加载并且启动

标注 (蓝色) - 12.5 输入和输出 >  位置 17264

之所以提供它们有两个原因。首先，它与我们已经看作是微内核设计特征的面向对象设计抽象相称。其次，它允许Symbian操作系统所处的不同平台运行专门的设备驱动，

标注 (黄色) - 12.5 输入和输出 >  位置 17269

12.5.3 直接存储器访问设备驱动经常使用 DMA，Symbian 操作系统支持 DMA 硬件的使用。 DMA 硬件包含一个控制一系列 DMA 通道的控制器。

标注 (黄色) - 12.5 输入和输出 >  位置 17272

一旦一个设备把数据传送到内存，就会激发一个系统中断。PDD为了传输设备使用 DMA 硬件提供的 DMA 服务，这里传输设备是指与硬件接口的设备驱动的一部分

标注 (蓝色) - 12.5 输入和输出 >  位置 17273

在 PDD 与 DMA 控制器之间， Symbian 操作系统实现两层软件：一个软件的 DMA层，一个与 DMA 硬件接口的内核扩展。

标注 (粉色) - 12.5 输入和输出 >  位置 17274

DMA 层把自身分成平台独立层和台相关层。

标注 (粉色) - 12.5 输入和输出 >  位置 17275

由于特殊的原因，对 DMA的支持是比较复杂的。 Symbian操作系统支持许多不同的硬件配置，但是没有提供缺省的 DMA配置。

标注 (黄色) - 12.5 输入和输出 >  位置 17282

12.5.4 特殊情况：存储介质 Symbian 操作系统中存储介质驱动是 PDD 的一种特殊形式，文件服务器排他地使用它们来实现对存储介质设备的访问

标注 (蓝色) - 12.5 输入和输出 >  位置 17284

。Symbian操作系统对介质的支持包括一个标准的 LDD 和为用户提

标注 (蓝色) - 12.5 输入和输出 >  位置 17285

的接口 API。

标注 (黄色) - 12.5 输入和输出 >  位置 17285

Symbian 操作系统中的文件服务器能够同时支持多达 26 个不同的设备

标注 (黄色) - 12.5 输入和输出 >  位置 17289

12.5.5 阻塞 I/ O Symbian 操作系统通过活动对象处理阻塞 I/ O。

标注 (蓝色) - 12.5 输入和输出 >  位置 17291

。活动对象由一个调度器进行协调并且在一个单独的线程中执行。

标注 (黄色) - 12.5 输入和输出 >  位置 17291

当活动对象使用一个阻塞

标注 (黄色) - 12.5 输入和输出 >  位置 17292

O 调用时，它用信号通知操作系统并且把自身挂起。当调用完成时，操作系统唤醒挂起的进程，该进程如同带有数据返回的函数一样继续执行。

标注 (黄色) - 12.5 输入和输出 >  位置 17297

12.5.6 可移动存储器可移动存储器带给操作系统设计人员一个有趣的两难处境。当往读取槽插入一张安全数据（Secure Digital， SD）卡时，该卡就同其他设备一样成为一个设备。它需要一个控制器、一个驱动、一种总线结构，而且很有可能通过 DMA 与 CPU 进行通信。

标注 (黄色) - 12.5 输入和输出 >  位置 17302

Symbian 操作系统使用可移动存储器的很多共同性来实现对它们的支持。每种可移动存储器通常具有如下特点：

标注 (蓝色) - 12.5 输入和输出 >  位置 17304

1) 所有的设备必须支持插入和移除。

标注 (蓝色) - 12.5 输入和输出 >  位置 17304

2) 所有的可移动存储器能够“热”拔，也就是正在使用时被拔下。 3) 每种介质都能报告它自己的容量。 4) 必须拒绝不适配的卡。 5) 每种卡都需要电源。

标注 (黄色) - 12.5 输入和输出 >  位置 17306

为了支持可移动存储器，Symbian操作系统提供控制每种支持卡片的软件控制器。

标注 (黄色) - 12.6 存储系统 >  位置 17313

和所有面向用户的操作系统一样， Symbian 操作系统有一个文件系统。

标注 (黄色) - 12.6 存储系统 >  位置 17314

12.6.1 移动设备文件系统就文件系统和存储而言，手机操作系统有很多和台式机操作系统相同的需求

标注 (黄色) - 12.6 存储系统 >  位置 17317

手机操作系统设计人员有很多文件系统可以选择时，一个很重要的特性影响了他们的选择：大多数手机存储介质可以和Windows环境共享使用。

标注 (蓝色) - 12.6 存储系统 >  位置 17318

如果手机系统中没有可移动存储器件，则任一种文件系统都是可以使用的。

标注 (蓝色) - 12.6 存储系统 >  位置 17323

一个基本的概念是，当文件被更新时，文件系统会将文件的更新副本写入空闲的存储块并修改文件指针，而在有空闲时间时再进行旧数据块的回收操作。最早的闪存文件系统之一是微软公司在 20 世纪 90 年代初为 MS-DOS 使用的 FFS2 文件系统。在 1994 年 PCMCIA 工业组织通过了关于闪存的闪存传输层（ Flash Translation Layer）标准后，闪存器件可以被识别为一个 FAT 文件系统。 Linux 同时也专门为闪存设计了 JFFS（ Journaling Flash File System）和 YAFFS（ Yet Another Flash Filing System）两种文件系统。 

标注 (黄色) - 12.6 存储系统 >  位置 17327

但是，移动平台必须和其他计算机共享存储介质，这就要求必须有一定的兼容措施。

标注 (黄色) - 12.6 存储系统 >  位置 17332

12.6.2 Symbian 操作系统文件系统作为智能手机操作系统，Symban OS 至少需要实现 FAT-16 文件系统

标注 (黄色) - 12.6 存储系统 >  位置 17333

但是， Symbian 操作系统文件服务器是建立在一个类似Linux的虚拟文件系统的抽象层上的。

标注 (黄色) - 12.6 存储系统 >  位置 17336

Symbian 操作系统也支持NFS和 SMB 文件系统。

标注 (黄色) - 12.6 存储系统 >  位置 17339

12.6.3 文件系统安全和保护智能手机安全是通用计算机安全的一个有趣的变体。

标注 (黄色) - 12.6 存储系统 >  位置 17342

考虑到智能手机的环境，它们属于单用户设备，不需要在使用前进行用户认证。一个手机用户可以执行应用程序、拨打电话、访问网络，全都不需要用户认证。

标注 (黄色) - 12.6 存储系统 >  位置 17345

除了权限，安全经常受益于其他形式的信息。在 Symbian 操作系统版本 9 或更新的版本中，应用程序在安装时就已被指定了其行为能力（授予一个应用程序权限的机制将在下一节涉及）。一个应用程序在请求执行某项行为时， 

标注 (黄色) - 12.6 存储系统 >  位置 17349

Symbian 操作系统中还有一些其他形式的文件安全。

标注 (黄色) - 12.6 存储系统 >  位置 17353

对 Symbian 操作系统来说，权限的使用和文件所有者在保护文件访问上的效果是相当的。

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17357

智能手机提供的环境很难保证安全。像我们之前提到的，它们属于单用户设备，不需要在使用基本功能前进行用户认证。更复杂的功能（如应用软件安装）需要授权，但不需认证。

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17360

Symbian 操作系统很好地体现了这一安全难度。

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17363

在 Symbian 操作系统版本 9 以前的版本中，操作系统提供了一个守门人式的安全功能：系统询问用户是否允许安装每一个应用程序。 

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17365

守门人式设计有很多优点。例如：一个新的没有用户自己安装的应用程序的智能手机是一个可以无故障运行的系统。

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17369

Symbian 操作系统版本 9 的信任验证机制提升到了一个新设计的平台上。这个版本的操作系统保留原有的守门人式机制，但是在用户之外提供了对安装软件进行验证的机制。每

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17372

当一个应用软件需要数字签名时，需要如下几个步骤： 1) 软件开发者需要从可信的第三方获得一个厂商 ID，这些可信的第三方由 Symbian 来进行鉴定。 2) 当一个开发者开发了一个程序包并希望发布时，他必须将其提交到可信的第三方进行验证。

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17375

3) 可信第三方验证所提供的访问类型列表是完全的，而且没有其他类型的访问发生。

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17377

4) 该安装包被送回到软件开发人员处，并可以发放给用户。

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17381

这个看起来复杂的机制使得我们可以在Symbian 操作系统中建立一个自动的守门人式机制，

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17383

图 12-3 中的图描述了Symbian操作系统版本 9 中的信任关系

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17384

。需要注意的是，系统中内置了多个信任等级。有些

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17390

在这个系统中有若干个方面看起来值得质疑

标注 (蓝色) - 12.7 Symbian操作系统的安全 >  位置 17394

一个开发人员必须获得一个有时效限制（通常是 6 个月）的证书和一个特殊的智能手机，即可使用自己的数字证书来创建安装包。

标注 (黄色) - 12.7 Symbian操作系统的安全 >  位置 17395

除了这样的守门人式机制外， Symbian 操作系统版本 9 同时采用数据锁定（ Data Caging）技术，来组织特定目录下的数据。比如， 

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17401

Symbian 操作系统按照特殊的标准设计，并使用客户机/ 服务器机制和基于栈的配置，以事件驱动型的通信为特色。12.8.1 基本基础结构Symbian 操作系统的通信系统基础结构建立在基本构件之上。考虑如图12-4

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17404

起点。在这个栈的底层是物理设备，以一定方式链接到计算机。

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17408

下一层，即我们需要关心的第一层，是设备驱动层。

标注 (粉色) - 12.8 Symbian操作系统中的通信 >  位置 17409

；这一层的软件直接通过 LDD 和 PDD 结构与硬件配合工作。

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17411

下一层就是协议实现层，包含了 Symbian 操作系统所支持的各种协议的实现

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17413

最后，应用程序层是最高的一层。该层包含了需要利用通信基础结构的应用程序

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17418

12.8.2 更仔细地观察基础结构 Symbian 操作系统的一个更详细的结构如图 12-5 所示。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17422

\1. 物理设备首先需要注意的是，物理设备层没有变化。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17424

。通过将硬件看作抽象结构并通过这一抽象进行通信，Symbian操作系统的设计人员保证了 Symbian 操作系统可以广泛地兼容现有设备，同时适应未来的硬件。 2. 设备驱动层如图 12-5 所示，设备驱动层被分为两层。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17428

\3. 协议实现层在图 12-5 中，协议实现层分为了若干子层。在协议实现层中使用了四种模块，列举在下面： ·CSY 模块：协议实现层最底层是通信服务，即 CSY 模块。

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17432

·TSY 模块：电话中包含了很大一部分通信基础结构，这些功能需要由特殊的模块来进行实现。电话服务（ TSY）模块实现了这些功能。

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17435

·PRT 模块：协议实现层的核心模块是协议模块（ PRT 模块）。该模块由服务器用来实现具体的协议

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17437

·MTM：由于 Symbian 操作系统被设计用来处理短信息，设

标注 (蓝色) - 12.8 Symbian操作系统中的通信 >  位置 17437

人员专门为处理的所有类型的短信息建立了相应的机制，而这些专门的模块称为信息类型模块（MTM模块）。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17441

根据所使用通信类型的不同，这些模块以不同的方式彼此依赖。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17444

\4. 结构模块化

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17445

基于模块化的思想在这样一个栈式的模型实现中是很有用的。在这个分层的设计中，从例子中可以看出，抽象带来的优势是很明显的。

标注 (黄色) - 12.8 Symbian操作系统中的通信 >  位置 17450

最后，图 12-5 在应用层添加了子层。

​                                                        